{
  "query": "-- データベースインデックス追加スクリプト（twitter_idを除外）\n\n-- ユーザーテーブル\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\nCREATE INDEX IF NOT EXISTS idx_users_created_at ON users(created_at DESC);\n\n-- イベントテーブル\nCREATE INDEX IF NOT EXISTS idx_events_user_id ON events(user_id);\nCREATE INDEX IF NOT EXISTS idx_events_status ON events(status);\nCREATE INDEX IF NOT EXISTS idx_events_event_date ON events(event_date DESC);\nCREATE INDEX IF NOT EXISTS idx_events_user_status ON events(user_id, status);\n\n-- チャレンジテーブル\nCREATE INDEX IF NOT EXISTS idx_challenges_event_id ON challenges(event_id);\nCREATE INDEX IF NOT EXISTS idx_challenges_status ON challenges(status);\nCREATE INDEX IF NOT EXISTS idx_challenges_event_status ON challenges(event_id, status);\n\n-- 参加履歴テーブル\nCREATE INDEX IF NOT EXISTS idx_participations_user_id ON participations(user_id);\nCREATE INDEX IF NOT EXISTS idx_participations_challenge_id ON participations(challenge_id);\nCREATE INDEX IF NOT EXISTS idx_participations_completed_at ON participations(completed_at DESC);\nCREATE INDEX IF NOT EXISTS idx_participations_user_challenge ON participations(user_id, challenge_id);\nCREATE INDEX IF NOT EXISTS idx_participations_challenge_completed ON participations(challenge_id, completed_at DESC);\n\n-- 通知テーブル\nCREATE INDEX IF NOT EXISTS idx_notifications_user_id ON notifications(user_id);\nCREATE INDEX IF NOT EXISTS idx_notifications_is_read ON notifications(is_read);\nCREATE INDEX IF NOT EXISTS idx_notifications_created_at ON notifications(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_notifications_user_read_created ON notifications(user_id, is_read, created_at DESC);\n\n-- メッセージテーブル\nCREATE INDEX IF NOT EXISTS idx_messages_sender_id ON messages(sender_id);\nCREATE INDEX IF NOT EXISTS idx_messages_receiver_id ON messages(receiver_id);\nCREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_messages_conversation ON messages(sender_id, receiver_id, created_at DESC);\n\nSELECT 'データベースインデックスの追加が完了しました' AS status;",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3YCTtbVp6bbE1oz.aaf91d266729 --database 4EfvvuNg9KRk4UPdFprmBJ --execute -- データベースインデックス追加スクリプト（twitter_idを除外）\n\n-- ユーザーテーブル\nCREATE INDEX IF NOT EXISTS idx_users_email ON users(email);\nCREATE INDEX IF NOT EXISTS idx_users_created_at ON users(created_at DESC);\n\n-- イベントテーブル\nCREATE INDEX IF NOT EXISTS idx_events_user_id ON events(user_id);\nCREATE INDEX IF NOT EXISTS idx_events_status ON events(status);\nCREATE INDEX IF NOT EXISTS idx_events_event_date ON events(event_date DESC);\nCREATE INDEX IF NOT EXISTS idx_events_user_status ON events(user_id, status);\n\n-- チャレンジテーブル\nCREATE INDEX IF NOT EXISTS idx_challenges_event_id ON challenges(event_id);\nCREATE INDEX IF NOT EXISTS idx_challenges_status ON challenges(status);\nCREATE INDEX IF NOT EXISTS idx_challenges_event_status ON challenges(event_id, status);\n\n-- 参加履歴テーブル\nCREATE INDEX IF NOT EXISTS idx_participations_user_id ON participations(user_id);\nCREATE INDEX IF NOT EXISTS idx_participations_challenge_id ON participations(challenge_id);\nCREATE INDEX IF NOT EXISTS idx_participations_completed_at ON participations(completed_at DESC);\nCREATE INDEX IF NOT EXISTS idx_participations_user_challenge ON participations(user_id, challenge_id);\nCREATE INDEX IF NOT EXISTS idx_participations_challenge_completed ON participations(challenge_id, completed_at DESC);\n\n-- 通知テーブル\nCREATE INDEX IF NOT EXISTS idx_notifications_user_id ON notifications(user_id);\nCREATE INDEX IF NOT EXISTS idx_notifications_is_read ON notifications(is_read);\nCREATE INDEX IF NOT EXISTS idx_notifications_created_at ON notifications(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_notifications_user_read_created ON notifications(user_id, is_read, created_at DESC);\n\n-- メッセージテーブル\nCREATE INDEX IF NOT EXISTS idx_messages_sender_id ON messages(sender_id);\nCREATE INDEX IF NOT EXISTS idx_messages_receiver_id ON messages(receiver_id);\nCREATE INDEX IF NOT EXISTS idx_messages_created_at ON messages(created_at DESC);\nCREATE INDEX IF NOT EXISTS idx_messages_conversation ON messages(sender_id, receiver_id, created_at DESC);\n\nSELECT 'データベースインデックスの追加が完了しました' AS status;",
  "returncode": 1,
  "logs": [
    "ERROR 1072 (42000) at line 5: column does not exist: created_at"
  ]
}