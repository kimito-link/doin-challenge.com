# Project TODO - 君斗りんくの動員ちゃれんじ

## 完了済み（v1.0 生誕祭アプリ）
- [x] テーマカラーの設定（KimitoLinkブランドカラー）
- [x] 基本的なデータベーススキーマ
- [x] Twitter OAuth認証の実装
- [x] キャラクター・ロゴの組み込み

## 動員ちゃれんじ v2.0

### データベース・API
- [x] チャレンジテーブルの更新（目標タイプ追加）
- [x] 目標タイプ対応（動員/フォロワー/同接/カスタム）
- [x] 貢献度計算ロジック
- [x] 地域別集計API

### チャレンジ一覧画面
- [x] カード形式で動員状況表示
- [x] タイプフィルター（すべて/グループ/ソロ）
- [ ] 地域フィルター機能
- [x] 達成率・目標人数表示

### チャレンジ詳細画面
- [x] 進捗バー・グリッド表示
- [x] 地域別参加者マップ（都道府県別）
- [x] 貢献度ランキング表示
- [ ] チケット情報セクション

### チャレンジ作成画面
- [x] 目標タイプ選択
- [x] 目標数値設定
- [x] 期間・会場設定
- [x] YouTubeプレミア公開対応

### 参加登録機能
- [x] 参加表明フォーム
- [x] 友人追加機能（+○人連れて行く）
- [x] 応援メッセージ投稿
- [x] 貢献度の可視化

### マイページ
- [x] 参加中のチャレンジ一覧
- [x] 自分の貢献度履歴
- [x] 主催したチャレンジ管理

## 動員ちゃれんじ v2.1 新機能

### チケット情報セクション
- [x] チケットテーブルの追加（前売り・当日券）
- [x] チケット価格・購入リンク表示
- [x] チャレンジ作成時のチケット情報入力
- [x] チャレンジ詳細画面でのチケット情報表示

### シェア機能強化（OGP画像）
- [x] OGP画像生成API
- [x] 進捗状況のビジュアル表示
- [x] Twitter/Xシェア用メタタグ
- [x] 動的OGP画像生成

### プッシュ通知機能
- [x] 通知設定テーブル
- [x] 目標達成時の通知
- [x] マイルストーン到達時の通知（25%/50%/75%）
- [x] 通知設定画面

### 参加条件・コミュニティ機能
- [x] 参加条件表示（@idolfunch Twitterフォロー必須）
- [x] 応援のお約束（コミュニティガイドライン）表示
- [x] 応援動画使用許可チェックボックス
- [ ] 素敵なコメントのピックアップ機能

## 動員ちゃれんじ v2.2 新機能

### 素敵なコメントのピックアップ機能
- [x] コメントにピックアップフラグを追加（DB）
- [x] 管理者用コメント管理画面
- [x] ピックアップコメントの一覧表示
- [x] 応援動画用コメントのエクスポート機能

### 地域フィルター機能
- [x] 都道府県別フィルターUI
- [x] 地域別参加者数の集計表示
- [x] 地域ランキング機能

### チャレンジ達成バッジシステム
- [x] バッジテーブルの作成（DB）
- [x] ユーザーバッジ関連テーブル（DB）
- [x] バッジ付与ロジック
- [x] バッジ一覧表示（マイページ）
- [x] バッジ獲得通知

## 動員ちゃれんじ v2.3 新機能

### カウントダウン機能
- [x] イベント当日までの残り日数表示
- [x] 時間・分・秒のリアルタイム更新
- [x] チャレンジ詳細画面でのカウントダウン表示
- [x] ホーム画面のカードでの残り日数表示

### 参加者同士のエール機能
- [x] エールテーブルの作成（DB）
- [x] 参加者へのエール送信機能
- [x] エール受信通知
- [x] エール一覧表示

### 達成記念ページ
- [x] 達成記念ページの作成
- [x] 参加者全員の名前掲載
- [x] 達成日時・統計情報の表示
- [x] SNSシェア機能

## 動員ちゃれんじ v2.4 新機能

### リマインダー機能
- [x] リマインダーテーブルの作成（DB）
- [x] イベント前日通知の設定
- [x] イベント当日通知の設定
- [x] リマインダー設定画面

### 参加者同士のDM機能
- [x] DMテーブルの作成（DB）
- [x] 参加者一覧からDM送信
- [x] DM会話画面
- [x] 未読バッジ表示示画面

### チャレンジテンプレート機能
- [x] テンプレートテーブルの作成（DB）
- [x] チャレンジ設定をテンプレートとして保存
- [x] テンプレート一覧画面
- [x] テンプレートからチャレンジ作成
- [x] 公開テンプレート機能

## 動員ちゃれんじ v2.5 新機能

### チャレンジ検索機能
- [x] 検索API（タイトル・ホスト名・会場名で検索）
- [x] 検索UI（ホーム画面に検索バー追加）
- [x] 検索結果一覧表示
- [x] 検索履歴の保存

### フォロー機能
- [x] フォローテーブルの作成（DB）
- [x] ホスト・アーティストのフォロー/解除
- [x] フォロー中のホスト一覧表示
- [x] 新着チャレンジ通知

### ランキング機能
- [x] 月間・週間貢献度ランキングAPI
- [x] チャレンジ達成率ランキングAPI
- [x] ランキング画面の作成
- [x] ランキングバッジの付与


## 動員ちゃれんじ v2.6 新機能

### チャレンジカテゴリ機能
- [x] カテゴリマスターテーブルの作成（DB）
- [x] チャレンジにカテゴリフィールド追加
- [x] カテゴリ選択UI（チャレンジ作成画面）
- [x] カテゴリフィルター（ホーム画面）
- [x] カテゴリ別チャレンジ一覧

### 参加者プロフィール機能
- [x] 公開プロフィールページの作成
- [x] 参加履歴の表示
- [x] 獲得バッジの表示
- [x] 総貢献度・参加チャレンジ数の表示
- [x] プロフィール編集機能

### チャレンジ招待機能
- [x] 招待テーブルの作成（DB）
- [x] 招待リンク生成API
- [x] QRコード生成機能
- [x] 招待リンクからの参加フロー
- [x] 招待経由の参加者追跡


## 動員ちゃれんじ v2.7 新機能

### チャレンジ統計ダッシュボード
- [x] 統計データテーブルの作成（DB）
- [x] 参加者数推移グラフ（日別・時間別）
- [x] 地域分布グラフ（都道府県別円グラフ）
- [x] 時間帯別参加分析（ヒートマップ）
- [x] ダッシュボード画面の作成
- [ ] 統計データのエクスポート機能

### アチーブメントシステム
- [x] アチーブメントマスターテーブルの作成（DB）
- [x] ユーザーアチーブメントテーブルの作成（DB）
- [x] 連続参加アチーブメント
- [x] 初主催アチーブメント
- [x] 招待達人アチーブメント
- [ ] アチーブメント解除通知
- [x] アチーブメント一覧画面

### チャレンジコラボ機能
- [x] コラボホストテーブルの作成（DB）
- [x] 共同主催者の招待機能
- [x] 共同主催者の権限管理
- [x] コラボチャレンジの表示
- [x] 共同主催者一覧表示


## キミトリンク素材・ロゴ更新

- [x] キミトリンクロゴをアプリに配置
- [x] キャラクター素材（りんくちゃん・アイドル版・ゆっくり版）を配置
- [x] ブランドカラーをテーマに反映（青: #00427B、オレンジ: #DD6500）
- [x] ホーム画面にロゴとゆっくりキャラクターを配置
- [x] マイページにゆっくりキャラクターを配置
- [x] 空状態画面にアイドル版りんくちゃんを配置


## バグ修正

- [x] Twitterログインボタンが灰色になって反応しない問題
- [x] Twitter認証をOAuth 2.0に書き換え


## Twitterフォロー確認機能

- [x] フォロー確認API（Twitter API v2）の実装
- [x] フォロー状態をデータベースに保存
- [x] フォロー確認UIコンポーネントの作成
- [x] プレミアム機能のゲート処理（フォロワー限定）
- [x] フォロー促進モーダルの実装
- [x] フォロー確認のテスト


## レスポンシブデザイン対応

- [x] レスポンシブユーティリティフックの作成
- [x] コンテンツ最大幅コンテナの作成
- [x] ホーム画面のグリッドレイアウト対応
- [x] チャレンジ作成画面のPC対応
- [x] マイページのPC対応
- [ ] ホバー効果の追加

## バグ修正

- [x] ホーム画面のフィルターボタンが縦長に崩れる問題を修正

- [x] Kimito-Link-VoiceのUXデザインガイドラインを作成

## UXガイドラインに基づく改善

- [x] ホーム画面に3ステップ説明セクションを追加
- [x] チャレンジカードのデザインをガイドラインに統一
- [x] PC表示の確認と調整

## KimitoLinkVoice仕様書からの採用

- [x] レスポンシブデザインガイドラインの更新（8段階ブレークポイント）
- [x] 色コントラストガイドラインの追加
- [x] タッチ対応の改善（最小44pxタップエリア）

## UXガイドライン適用

- [x] ボタンのタップエリアを44px以上に統一
- [x] フィルターボタンのタップエリア改善
- [x] PC表示でのホバー効果追加
- [x] PC表示でのレイアウト最適化

## サンプルチャレンジ機能

- [x] サンプルデータ生成APIの実装
- [x] 開発者向けサンプル生成ボタンの追加
- [x] カード表示とグリッドレイアウトの確認

## キャラクター名修正

- [x] サンプルデータのキャラクター名を修正（りんく、こん太、たぬ姉）

## Twitter認証のredirect_uri修正

- [x] redirect_uriをlocalhostから本番URLに修正


## Twitter認証エラー修正

- [x] サーバーログを確認してエラー原因を特定
- [x] 認証フローの修正
- [x] scopeを最小限にして認証テスト
- [ ] 認証成功後にフォロー確認機能を追加
- [x] PKCEデータをデータベースに永続化
- [x] Twitter認証コールバックページの作成

## UI改善 - ロゴ追加

- [x] ホームページにロゴを追加
- [x] チャレンジ作成ページにロゴを追加
- [x] マイページにロゴを追加
- [x] イベント詳細ページにロゴを追加
- [x] 通知ページにロゴを追加
- [x] アチーブメント一覧ページにロゴを追加
- [x] アチーブメント詳細ページにロゴを追加
- [x] コラボレーター一覧ページにロゴを追加
- [x] ダッシュボードページにロゴを追加
- [x] フォロー中ページにロゴを追加
- [x] 招待ページにロゴを追加
- [x] コメント管理ページにロゴを追加
- [x] メッセージ一覧ページにロゴを追加
- [x] メッセージ詳細ページにロゴを追加
- [x] プロフィールページにロゴを追加
- [x] ランキングページにロゴを追加
- [x] リマインダーページにロゴを追加
- [x] テンプレート一覧ページにロゴを追加

## TOPページ改善

- [x] 注目のチャレンジセクション（ハイライト表示）
- [x] 盛り上がりの可視化（総参加者数、地域別）
- [x] LP風キャッチコピーセクション
- [x] チャレンジ一覧の配置調整


## 友人追加機能（名前付き登録）

- [x] 友人テーブルの作成（DB）
- [x] 友人追加APIの実装
- [x] 参加表明フォームに友人追加UIを実装
- [x] 友人のTwitterユーザー名入力・検索機能
- [x] 応援メッセージに友人情報（名前・アイコン・ユーザー名）を表示
- [x] 友人の招待実績の追跡

## Twitterプロフィール自動取得機能

- [x] Twitterユーザー名パーサーの実装（@形式・URL形式対応）
- [x] Twitter APIでプロフィール情報取得APIの実装
- [x] 友人追加フォームにTwitter情報自動取得UIを実装
- [x] 取得した名前・アイコンを友人カードに表示


## りんくちゃんの語りかけセクション（LP風メッセージ）

- [x] TOPページにりんくちゃんの語りかけセクションを追加
- [x] 世界観を伝えるメッセージテキストを実装
- [x] UI/UXを損なわないデザインで配置


## ログイン画面パターン機能

- [x] 複数のログイン画面パターンを設計（6パターン）
- [x] キャラクター・メッセージ・背景のバリエーションを実装
- [x] ランダムまたは順番でパターンを切り替える仕組みを実装
- [x] グラデーション背景・アクセントカラーを追加


## ログイン後のフィードバック機能

- [x] ログイン成功時の「ログインしました」メッセージを実装
- [x] キャラクターの反応（吹き出し）を表示
- [x] ウェルカムアニメーション・トランジションを追加
- [x] ユーザー名を含むパーソナライズドメッセージ


## KimitoLinkVoice風ログインフロー改善

### ログイン前画面の改善
- [x] 「推しと繋がる、みんなで応援する」キャッチコピーを追加
- [x] 3つのキャラクターアイコン表示（りんく、こん太、たぬ姉）
- [x] 3ステップ説明（①Xアカウントでログイン → ②フォロー → ③アクセス）
- [x] フォロー必須アカウントの表示（@streamerfunch、@idolfunch）
- [x] 「重要：認証されるアカウントについて」の説明

### ログアウト専用画面
- [x] ログアウト専用ページの作成
- [x] キャラクターアイコン + チェックマーク表示
- [x] 「またねー♪」の吹き出しメッセージ
- [x] 「ログアウトしました」メッセージ
- [x] 「ログアウトについて」の説明テキスト
- [x] 「ホームページに戻る」「ログイン」ボタン

### ログイン成功後の改善
- [x] ログイン成功モーダルの改善（キャラクター反応）
- [x] フォロー確認フローの追加


## 生成AI時代のDB設計最適化

### AI向けカラムの追加
- [x] ai_summaryカラム（チャレンジの盛り上がり状況をAIが要約）
- [x] intent_tagsカラム（チャレンジの意図・カテゴリをタグ化）
- [x] region_summaryカラム（地域別参加者数の事前集計JSON）
- [x] participant_summaryカラム（参加者サマリーの埋め込み）

### 非同期サマリー再計算（鮮度管理）
- [x] 参加者追加時のサマリー再計算トリガー
- [x] 非同期ジョブでのLLMサマリー生成
- [x] 定期的なサマリー更新バッチ

### AI向け読み取りAPI（1ホップ取得）
- [x] GET /api/challenges/:id/context（AI向けコンテキストドキュメント）
- [x] チャレンジ + 参加者サマリー + 地域サマリーを1レスポンスで返却
- [x] トークン効率を考慮したレスポンス設計

### ハイブリッド構成（CQRS応用）
- [x] 書き込み用（正規化テーブル）と読み取り用（非正規化ビュー）の分離
- [x] 同期パイプラインでの読み取り用データ更新


## バグ修正

- [x] フォロー済みユーザーなのにプレミアム機能がロックされる問題
- [x] スマホからTwitterログイン時にlocalhostにリダイレクトされる問題
