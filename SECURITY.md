# セキュリティポリシー

動員ちゃれんじプロジェクトのセキュリティに関するポリシーを記述しています。セキュリティ上の問題を発見した場合は、このドキュメントに従って報告してください。

---

## サポートされるバージョン

現在サポートされているバージョンとセキュリティアップデートの提供状況は以下の通りです。

| バージョン | サポート状況 | セキュリティアップデート |
|-----------|-------------|------------------------|
| 1.x.x (最新) | ✅ サポート中 | ✅ 提供中 |
| < 1.0.0 | ❌ サポート終了 | ❌ 提供なし |

**推奨事項:**
- 常に最新バージョンを使用してください
- セキュリティアップデートは優先的に適用してください
- サポート終了バージョンの使用は推奨しません

---

## 脆弱性の報告

セキュリティ上の脆弱性を発見した場合は、以下の手順に従って報告してください。

### 報告方法

**重要:** 脆弱性を公開のIssueやPRで報告しないでください。

1. **GitHub Security Advisoriesを使用**（推奨）
   - リポジトリの「Security」タブから「Report a vulnerability」をクリック
   - フォームに従って脆弱性の詳細を記入
   - 送信後、非公開で対応を進めます

2. **メールで報告**
   - 宛先: security@kimito.link（仮）
   - 件名: [SECURITY] 動員ちゃれんじの脆弱性報告
   - 本文: 脆弱性の詳細（下記のテンプレートを参照）

### 報告テンプレート

```
## 脆弱性の概要
<!-- 脆弱性の簡潔な説明 -->

## 影響範囲
<!-- どのバージョンが影響を受けるか -->

## 再現手順
1. 
2. 
3. 

## 期待される動作
<!-- 本来どのように動作すべきか -->

## 実際の動作
<!-- 実際にどのように動作するか -->

## 影響度
<!-- 低 / 中 / 高 / 緊急 -->

## 提案する修正方法（任意）
<!-- 修正方法の提案があれば記載 -->

## 環境
- OS: 
- ブラウザ: 
- バージョン: 
```

### 報告後のプロセス

1. **受領確認**: 報告から48時間以内に受領確認の連絡をします
2. **初期評価**: 5営業日以内に脆弱性の重大度を評価し、対応方針を決定します
3. **修正作業**: 重大度に応じて修正作業を開始します
   - 緊急: 24時間以内
   - 高: 7日以内
   - 中: 30日以内
   - 低: 90日以内
4. **修正リリース**: 修正が完了次第、セキュリティアップデートをリリースします
5. **公開**: 修正リリース後、適切なタイミングで脆弱性の詳細を公開します

---

## セキュリティアップデート方針

### アップデートの種類

| 種類 | 説明 | リリース頻度 |
|------|------|-------------|
| **緊急アップデート** | 重大な脆弱性の修正 | 即座 |
| **定期アップデート** | 軽微な脆弱性の修正 | 月次 |
| **依存関係アップデート** | 依存ライブラリのセキュリティ修正 | 週次（Dependabot） |

### 通知方法

セキュリティアップデートは以下の方法で通知されます：

1. **GitHub Releases**: リリースノートに「Security」ラベルを付与
2. **GitHub Security Advisories**: 重大な脆弱性の場合
3. **Twitter/X**: @kimito_link（仮）で告知

### アップデート手順

```bash
# 最新バージョンを確認
git fetch origin
git checkout main
git pull origin main

# 依存関係を更新
pnpm install

# データベースマイグレーション
pnpm db:push

# 開発サーバーを再起動
pnpm dev
```

---

## セキュリティベストプラクティス

### 開発者向け

- **環境変数の管理**: `.env`ファイルをGitにコミットしない
- **認証情報の保護**: APIキーやシークレットをコードに埋め込まない
- **依存関係の更新**: Dependabotの自動PRを定期的にマージする
- **コードレビュー**: セキュリティ観点でのレビューを実施する
- **テスト**: セキュリティテストを追加する

### ユーザー向け

- **強力なパスワード**: 推測されにくいパスワードを使用する
- **二要素認証**: 可能な限り有効化する（将来実装予定）
- **最新バージョン**: 常に最新バージョンを使用する
- **不審なアクティビティ**: 不審なアクティビティを発見したら報告する

---

## セキュリティ対策

このプロジェクトでは、以下のセキュリティ対策を実施しています。

### 認証・認可

- **OAuth 2.0**: Twitter/Xによる安全な認証
- **セッション管理**: HTTPOnly Cookieによるセッショントークンの保護
- **CSRF対策**: SameSite Cookieによる保護

### データ保護

- **暗号化**: パスワードのハッシュ化（bcrypt）
- **SQL インジェクション対策**: Drizzle ORMのパラメータ化クエリ
- **XSS対策**: Reactの自動エスケープ

### インフラストラクチャ

- **HTTPS**: すべての通信をHTTPSで暗号化
- **環境変数**: 機密情報を環境変数で管理
- **依存関係の監視**: Dependabotによる自動更新

### 監視

- **エラー監視**: Sentryによるエラートラッキング
- **外形監視**: UptimeRobotによる稼働監視
- **ログ**: Vercel Logsによるアクセスログ

---

## 既知の制限事項

現在、以下の制限事項があります。将来のバージョンで改善予定です。

- **レート制限**: 未実装（DDoS攻撃への対策が不十分）
- **二要素認証**: 未実装
- **監査ログ**: 未実装

---

## セキュリティ関連の問い合わせ

セキュリティに関する一般的な質問や懸念事項がある場合は、以下の方法でお問い合わせください：

- **GitHub Discussions**: [https://github.com/kimito-link/doin-challenge.com/discussions](https://github.com/kimito-link/doin-challenge.com/discussions)
- **Email**: security@kimito.link（仮）

---

## 謝辞

セキュリティ上の問題を報告してくださった方々に感謝します。責任ある開示にご協力いただき、ありがとうございます。

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|---------|
| v1.0.0 | 2026-01-27 | 初版作成 |

---

このセキュリティポリシーは、プロジェクトの成長に伴って更新される可能性があります。最新版は常にこのドキュメントを参照してください。
