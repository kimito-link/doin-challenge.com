# リファクタリング次のステップ相談

## 現状のリファクタリング状況

### 完了済み

| ディレクトリ | 直書き色の残存 | 状態 |
|-------------|---------------|------|
| features/events | 0箇所 | ✅ トークン化完了 |

### 未着手

| ディレクトリ | 直書き色の残存 | ファイル数 | 総行数 |
|-------------|---------------|-----------|--------|
| features/home | 16箇所 | 12ファイル | 936行 |
| features/create | 13箇所 | 5ファイル | - |
| features/mypage | 12箇所 | 6ファイル | 595行 |

### 作成済みのトークン

`features/events/ui/theme/tokens.ts`:
```ts
export const eventText = {
  primary: "#E5E7EB",
  secondary: "#9CA3AF",
  muted: "#D1D5DB",
  hint: "#6B7280",
  username: "#FBBF24",
  follower: "#F472B6",
  accent: "#EC4899",
  danger: "#EF4444",
};

export const eventFont = {
  body: 14,
  meta: 12,
  small: 11,
  tiny: 10,
};

export const eventUI = {
  fallback: "#EC4899",
  fallbackAlt: "#8B5CF6",
  badge: "#EC4899",
  iconMuted: "#9CA3AF",
  iconDanger: "#EF4444",
};
```

---

## 選択肢

### 選択肢A: features/home のトークン化
- **作業量**: 16箇所、12ファイル
- **効果**: ホーム画面（最も閲覧頻度が高い）の色が統一される
- **リスク**: 低（eventsと同じパターンで進められる）

### 選択肢B: features/create のトークン化
- **作業量**: 13箇所、5ファイル
- **効果**: チャレンジ作成画面の色が統一される
- **リスク**: 低

### 選択肢C: features/mypage のトークン化
- **作業量**: 12箇所、6ファイル
- **効果**: マイページの色が統一される
- **リスク**: 低

### 選択肢D: 共通トークンファイルを作成
- **作業量**: 中（トークン設計 + 全featuresへの適用）
- **効果**: アプリ全体で一貫した色使用、将来のテーマ対応が容易に
- **リスク**: 中（設計を間違えると後で修正が大変）

### 選択肢E: リファクタリングを一旦停止し、機能開発に戻る
- **作業量**: なし
- **効果**: 新機能（チュートリアル強化など）を先に進められる
- **リスク**: 直書き色が増える可能性

---

## 追加で計画に入れた項目

### チュートリアル/追体験機能の強化（将来計画）
- 「まだ決まってない」選択肢を追加（イベント未定でも事前に動員予測ができる）
- ライブ動員予測の訴求 - 「みんながどれぐらいライブに来てくれるか事前にわかる」
- 本・グッズ販売予測の訴求 - 「本を出したときにどれぐらい売れるか事前にわかる」
- チュートリアル画面でこれらのユースケースを紹介
- 追体験機能（デモモード）でこれらのシナリオを体験できるようにする

---

## GPTへの質問

1. **優先順位**: A〜Eのどれを先に進めるべきか？
2. **トークン設計**: 共通トークン（選択肢D）を先に作るべきか、features単位で進めるべきか？
3. **リファクタリングと機能開発のバランス**: どの程度リファクタリングを進めてから機能開発に戻るべきか？
4. **チュートリアル強化の優先度**: 上記の訴求ポイントはいつ実装すべきか？
