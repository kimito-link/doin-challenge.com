# 動員ちゃれんじ 画面遷移図

本ドキュメントでは、「動員ちゃれんじ」アプリの画面遷移を体系的に整理しています。ユーザーがアプリを起動してから各機能を利用するまでの流れを明確にし、開発・テスト・運用の参考資料として活用できます。

## 1. 画面一覧

| 画面ID | 画面名 | パス | 説明 |
|--------|--------|------|------|
| H001 | ホーム | `/(tabs)/` | チャレンジ一覧、検索、統計表示 |
| H002 | チャレンジ作成 | `/(tabs)/create` | 新規チャレンジの作成フォーム |
| H003 | マイページ | `/(tabs)/mypage` | ユーザープロフィール、参加履歴 |
| E001 | イベント詳細 | `/event/[id]` | チャレンジの詳細情報、参加表明 |
| E002 | ダッシュボード | `/dashboard/[id]` | 統計・分析ダッシュボード |
| E003 | コメント管理 | `/manage-comments/[id]` | ピックアップコメントの管理 |
| E004 | コラボレーター | `/collaborators/[id]` | 共同主催者の管理 |
| E005 | リマインダー | `/reminders/[id]` | リマインダー設定 |
| E006 | 招待 | `/invite/[id]` | 招待リンク・QRコード |
| U001 | プロフィール | `/profile/[userId]` | 公開プロフィール |
| U002 | アチーブメント一覧 | `/achievements` | 獲得バッジ一覧 |
| U003 | アチーブメント詳細 | `/achievement/[id]` | バッジ詳細 |
| U004 | フォロー中 | `/following` | フォロー中のホスト |
| U005 | ランキング | `/rankings` | 貢献度ランキング |
| M001 | メッセージ一覧 | `/messages` | DM一覧 |
| M002 | メッセージ詳細 | `/messages/[partnerId]` | DM会話 |
| N001 | 通知 | `/notifications` | 通知一覧 |
| T001 | テンプレート一覧 | `/templates` | チャレンジテンプレート |
| A001 | Twitter認証 | `/oauth/callback` | OAuth認証コールバック |
| A002 | ログアウト | `/logout` | ログアウト画面 |

## 2. メイン画面遷移フロー

### 2.1 初回起動〜ログインフロー

```
[アプリ起動]
    │
    ▼
[ホーム画面 (H001)]
    │
    ├── ログイン済み ──────────────────────────────────────┐
    │                                                      │
    └── 未ログイン                                         │
        │                                                  │
        ▼                                                  │
    [Xでログインボタン]                                    │
        │                                                  │
        ▼                                                  │
    [Twitter OAuth認証 (A001)]                             │
        │                                                  │
        ├── 認証成功 ───────────────────────────────────────┤
        │       │                                          │
        │       ▼                                          │
        │   [ログイン成功モーダル]                         │
        │       │                                          │
        │       ▼                                          │
        │   [フォロー確認]                                 │
        │       │                                          │
        │       ├── フォロー済み ──────────────────────────┤
        │       │                                          │
        │       └── 未フォロー                             │
        │           │                                      │
        │           ▼                                      │
        │       [フォロー促進モーダル]                     │
        │           │                                      │
        │           ▼                                      │
        │       [Twitterでフォロー]                        │
        │           │                                      │
        │           ▼                                      │
        │       [フォロー完了お祝いモーダル] ──────────────┤
        │                                                  │
        └── 認証失敗                                       │
            │                                              │
            ▼                                              │
        [エラーメッセージ表示]                             │
            │                                              │
            ▼                                              ▼
        [ホーム画面 (H001)] ◄──────────────────────────────┘
```

### 2.2 チャレンジ参加フロー

```
[ホーム画面 (H001)]
    │
    ▼
[チャレンジカードをタップ]
    │
    ▼
[イベント詳細画面 (E001)]
    │
    ├── 進捗バー・カウントダウン表示
    │
    ├── 地域別参加者マップ（日本地図ヒートマップ）
    │       │
    │       ▼
    │   [都道府県をタップ]
    │       │
    │       ▼
    │   [参加者一覧モーダル]
    │
    ├── 動員までの軌跡グラフ
    │
    └── 参加表明セクション
        │
        ├── 未ログイン
        │       │
        │       ▼
        │   [ログイン促進メッセージ]
        │       │
        │       ▼
        │   [Xでログインボタン] → [認証フロー]
        │
        └── ログイン済み
            │
            ▼
        [参加表明フォーム]
            │
            ├── 友人追加（オプション）
            │       │
            │       ▼
            │   [Twitterユーザー名入力]
            │       │
            │       ▼
            │   [プロフィール自動取得]
            │
            ├── 応援メッセージ入力
            │
            └── 動画使用許可チェック
                │
                ▼
            [確認画面]
                │
                ▼
            [参加表明完了]
                │
                ▼
            [シェア促進モーダル]
                │
                ├── Xでシェア
                │       │
                │       ▼
                │   [Twitter投稿画面]
                │
                └── スキップ
                    │
                    ▼
                [応援メッセージセクションへスクロール]
```

### 2.3 チャレンジ作成フロー

```
[タブバー: チャレンジ作成]
    │
    ▼
[チャレンジ作成画面 (H002)]
    │
    ├── 未ログイン
    │       │
    │       ▼
    │   [ログイン促進メッセージ]
    │
    └── ログイン済み
        │
        ▼
    [基本情報入力]
        │
        ├── タイトル
        ├── 目標タイプ（動員/フォロワー/同接/カスタム）
        ├── 目標数値
        ├── カテゴリ選択
        └── 期間・会場設定
            │
            ▼
        [チケット情報入力（オプション）]
            │
            ├── 前売り券価格・リンク
            └── 当日券価格・リンク
                │
                ▼
            [プレビュー確認]
                │
                ▼
            [作成完了]
                │
                ▼
            [イベント詳細画面 (E001)]
```

### 2.4 マイページフロー

```
[タブバー: マイページ]
    │
    ▼
[マイページ画面 (H003)]
    │
    ├── 未ログイン
    │       │
    │       ▼
    │   [ログイン促進画面]
    │       │
    │       ▼
    │   [Xでログインボタン] → [認証フロー]
    │
    └── ログイン済み
        │
        ├── プロフィール情報
        │       │
        │       ▼
        │   [プロフィール編集]
        │
        ├── 参加中のチャレンジ一覧
        │       │
        │       ▼
        │   [チャレンジカードをタップ] → [イベント詳細 (E001)]
        │
        ├── 主催したチャレンジ一覧
        │       │
        │       ▼
        │   [チャレンジカードをタップ] → [イベント詳細 (E001)]
        │
        ├── 獲得バッジ
        │       │
        │       ▼
        │   [アチーブメント一覧 (U002)]
        │       │
        │       ▼
        │   [アチーブメント詳細 (U003)]
        │
        ├── フォロー中
        │       │
        │       ▼
        │   [フォロー中一覧 (U004)]
        │
        └── 設定
            │
            ├── 通知設定 → [通知画面 (N001)]
            │
            └── ログアウト → [ログアウト画面 (A002)]
```

## 3. 主要コンポーネント遷移

### 3.1 日本地図ヒートマップ

```
[JapanDeformedMap コンポーネント]
    │
    ├── 47都道府県ブロック表示
    │       │
    │       ├── 参加者数に応じたアイコン（😢😊🔥🎉）
    │       ├── 参加者数に応じた色（黄色→オレンジ→赤）
    │       └── 地域別色分け
    │
    ├── 都道府県タップ
    │       │
    │       ▼
    │   [PrefectureParticipantsModal]
    │       │
    │       ├── 参加者一覧表示
    │       ├── 都道府県フィルター
    │       └── プロフィールリンク → [プロフィール (U001)]
    │
    ├── 統計サマリー
    │       │
    │       ├── 都道府県数
    │       ├── 総参加者数
    │       └── 最多参加者数
    │
    └── 熱い地域ハイライト
            │
            └── 「○○が熱い！」表示
```

### 3.2 動員までの軌跡グラフ

```
[GrowthTrajectoryChart コンポーネント]
    │
    ├── 成長曲線（赤グラデーション）
    │
    ├── 目標ライン（緑の点線）
    │
    ├── マイルストーンマーカー
    │
    ├── 現在地点「今」マーカー
    │
    └── 凡例
```

## 4. モーダル・オーバーレイ一覧

| モーダル名 | トリガー | 説明 |
|------------|----------|------|
| ログイン成功モーダル | Twitter認証成功時 | キャラクター反応、ウェルカムメッセージ |
| フォロー促進モーダル | 未フォロー状態検出時 | フォロー必須アカウントの案内 |
| フォロー完了お祝いモーダル | フォロー確認成功時 | お祝いメッセージ |
| シェア促進モーダル | 参加表明完了時 | Xでシェアボタン、スキップボタン |
| 参加者一覧モーダル | 都道府県タップ時 | 参加者リスト、フィルター |
| 確認モーダル | 各種確認時 | ログアウト確認など |

## 5. タブバー構成

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│    [🏠 ホーム]    [➕ チャレンジ作成]    [👤 マイページ]   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 6. レスポンシブ対応

本アプリは8段階のブレークポイントに対応しています。

| ブレークポイント | 画面幅 | 対象デバイス |
|------------------|--------|--------------|
| xs | 280px〜319px | 超小型スマホ |
| sm | 320px〜374px | 小型スマホ |
| md | 375px〜413px | 標準スマホ（iPhone 12/13/14） |
| lg | 414px〜767px | 大型スマホ（iPhone Plus/Max） |
| xl | 768px〜1023px | タブレット（iPad） |
| 2xl | 1024px〜1439px | 小型PC |
| 3xl | 1440px〜2559px | 大型PC |
| 4xl | 2560px以上 | 4Kディスプレイ |

## 7. アクセシビリティ対応

すべてのタップ可能な要素は最小44×44pxのタップエリアを確保しています。また、各要素には適切なアクセシビリティラベルが設定されています。

---

**作成日**: 2026年1月15日  
**作成者**: Manus AI  
**バージョン**: v4.47
