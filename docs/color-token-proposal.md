# 直書き色のトークン化提案

## 概要

視認性問題の修正後、プロジェクト全体で直書き色（`#DD6500`、`#EC4899`、`#9CA3AF`）が469箇所で使用されていることが判明しました。再発防止のためのトークン化について相談します。

---

## 現状の使用状況

### 使用箇所の分類

| 色 | 用途 | 箇所数（概算） | 視認性問題 |
|----|------|---------------|-----------|
| `#DD6500`（オレンジ） | タブバーアクティブ、アイコン、日付表示、ボタン背景 | 約50箇所 | 小さいテキストで問題あり |
| `#EC4899`（ピンク） | グラデーション、アクセントカラー、ボタン、強調表示 | 約350箇所 | 小さいテキストで問題あり |
| `#9CA3AF`（グレー） | プレースホルダー、補助テキスト | 約70箇所 | 小さいテキストで問題あり |

### 問題のある使用パターン

**視認性問題が発生するケース:**
- 小さいフォントサイズ（10-11px）でのテキスト表示
- ダーク背景（`#1A1D21`）上での使用

**問題のない使用パターン:**
- グラデーション背景（`colors={["#EC4899", "#8B5CF6"]}`）
- ボタン背景色
- アイコンカラー（大きいサイズ）
- タブバーのアクティブカラー

---

## 修正済み箇所

以下のファイルは既に視認性を改善済み：

| ファイル | 修正内容 |
|---------|---------|
| `features/events/components/ContributionRanking.tsx` | ユーザー名: `#DD6500` → `#FBBF24`、フォロワー数: `#9CA3AF` → `#D1D5DB`、フォントサイズ: 10-11px → 12px |
| `features/events/components/MessageCard.tsx` | ユーザー名: `#DD6500` → `#FBBF24`、フォロワー数: `#EC4899` → `#F472B6`、フォントサイズ: 11px → 12px |

---

## トークン化の選択肢

### 選択肢A: events専用トークンのみ作成（最小限）

**対象:** `features/events/` 配下のコンポーネントのみ

**作成ファイル:** `features/events/ui/theme/tokens.ts`

```typescript
export const eventsTextColors = {
  username: "#FBBF24",    // @username表示用
  meta: "#D1D5DB",        // フォロワー数、日付など
  accent: "#F472B6",      // 強調表示
  muted: "#9CA3AF",       // 補助テキスト
};
```

**メリット:**
- 影響範囲が限定的
- 実装が簡単
- events関連の視認性問題を防止

**デメリット:**
- 他の画面では直書きが残る
- 全体的な一貫性は改善されない

---

### 選択肢B: アプリ全体のテキストトークン作成（中規模）

**対象:** アプリ全体

**作成ファイル:** `constants/text-colors.ts`

```typescript
export const textColors = {
  // 基本
  primary: "#ECEDEE",     // 主要テキスト
  secondary: "#9CA3AF",   // 補助テキスト
  muted: "#6B7280",       // 控えめなテキスト
  
  // アクセント
  accent: {
    orange: "#FBBF24",    // オレンジ系アクセント（視認性改善版）
    pink: "#F472B6",      // ピンク系アクセント（視認性改善版）
  },
  
  // 小さいテキスト専用（12px以下で使用）
  small: {
    username: "#FBBF24",
    meta: "#D1D5DB",
    followers: "#F472B6",
  },
  
  // プレースホルダー
  placeholder: "#6B7280",
};
```

**メリット:**
- アプリ全体で一貫した色使用
- 将来の視認性問題を防止
- ダーク/ライトテーマ対応が容易

**デメリット:**
- 多くのファイルを修正する必要がある
- 既存の色使用を全て見直す必要がある

---

### 選択肢C: 現状維持（修正済み箇所のみ）

**対象:** なし（追加作業なし）

**メリット:**
- 追加作業なし
- 現在の視認性問題は解決済み

**デメリット:**
- 新規コンポーネントで同じ問題が再発する可能性
- 直書き色が残り続ける

---

## 追加で視認性問題がありそうな箇所

検索結果から、以下の箇所も小さいテキストで直書き色を使用しています：

| ファイル | 行 | 内容 | 優先度 |
|---------|-----|------|--------|
| `features/home/components/ChallengeCard.tsx` | 129 | 日付表示 `#DD6500`, 11px | 中 |
| `features/home/components/EngagementSection.tsx` | 50 | タイトル `#DD6500`, 16px | 低（サイズ大） |
| `features/home/components/SectionHeader.tsx` | 29 | 「すべて見る」 `#DD6500`, 14px | 低（サイズ大） |
| `features/create/ui/components/CategorySelector.tsx` | 53 | プレースホルダー `#9CA3AF`, 14px | 低 |
| `features/create/ui/components/TicketInfoSection.tsx` | 93 | 補助テキスト `#9CA3AF`, 12px | 中 |

---

## 質問

1. **トークン化の範囲**: 選択肢A（events専用）、B（アプリ全体）、C（現状維持）のどれが適切ですか？

2. **追加修正の優先度**: 上記の「追加で視認性問題がありそうな箇所」も修正すべきですか？

3. **色の選択**: 現在の修正で使用した色（`#FBBF24`、`#D1D5DB`、`#F472B6`）は適切ですか？

---

## 参考: WCAGコントラスト比（背景 #1A1D21 に対して）

| 色 | コントラスト比 | WCAG AA | 備考 |
|----|---------------|---------|------|
| `#DD6500`（現オレンジ） | 4.78:1 | ギリOK | 小さい文字で読みにくい |
| `#FBBF24`（新オレンジ） | 10.13:1 | OK | 小さい文字でも読みやすい |
| `#EC4899`（現ピンク） | 4.79:1 | ギリOK | 小さい文字で読みにくい |
| `#F472B6`（新ピンク） | 6.39:1 | OK | 改善 |
| `#9CA3AF`（現グレー） | 6.66:1 | OK | 10pxだと潰れやすい |
| `#D1D5DB`（新グレー） | 11.48:1 | OK | 強い |
