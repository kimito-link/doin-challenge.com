# Sentryå°å…¥ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã¯ã€å°†æ¥çš„ã«Sentryã‚’å°å…¥ã™ã‚‹éš›ã®æ‰‹é †ã€ãƒ¡ãƒªãƒƒãƒˆã€ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã€è¨­å®šæ–¹æ³•ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚ç¾æ™‚ç‚¹ã§ã¯`performance-auto-monitor.ts`ãŒé–‹ç™ºç’°å¢ƒã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ã‚’æä¾›ã—ã¦ã„ã¾ã™ãŒã€æœ¬ç•ªç’°å¢ƒã§ã®ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãŒå¿…è¦ã«ãªã£ãŸå ´åˆã¯ã€ã“ã®ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦Sentryã‚’å°å…¥ã—ã¦ãã ã•ã„ã€‚

## Sentryã¨ã¯

**Sentry**ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã‚’æä¾›ã™ã‚‹SaaSãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚React Nativeã€Expoã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾å¿œã—ã¦ãŠã‚Šã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

1. **ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°**: ã‚¢ãƒ—ãƒªã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚„ã‚¨ãƒ©ãƒ¼ã‚’è‡ªå‹•æ¤œå‡º
2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“ã€APIå¿œç­”æ™‚é–“ã‚’è¨ˆæ¸¬
3. **ãƒªãƒªãƒ¼ã‚¹è¿½è·¡**: å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¨ãƒ©ãƒ¼ç‡ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æ¯”è¼ƒ
4. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**: ã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¨ãƒ©ãƒ¼ã«é­é‡ã—ãŸã‹ã‚’è¿½è·¡

## ãƒ¡ãƒªãƒƒãƒˆ

### 1. æœ¬ç•ªç’°å¢ƒã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

**ç¾çŠ¶ã®èª²é¡Œ:**
- `performance-auto-monitor.ts`ã¯é–‹ç™ºç’°å¢ƒï¼ˆ`__DEV__ === true`ï¼‰ã§ã®ã¿å‹•ä½œ
- å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“ãŒåˆ†ã‹ã‚‰ãªã„

**Sentryã§è§£æ±º:**
- æœ¬ç•ªç’°å¢ƒï¼ˆå®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ã§ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“ã‚’è¨ˆæ¸¬
- åœ°åŸŸåˆ¥ã€ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åˆ†æ
- é…ã„ã‚¯ã‚¨ãƒªã‚’è‡ªå‹•æ¤œå‡ºã—ã€ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é€ä¿¡

**ä¾‹:**
```
[Sentry Dashboard]
- ãƒ›ãƒ¼ãƒ ç”»é¢ã®å¹³å‡ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“: 234ms
- æœ€ã‚‚é…ã„ã‚¯ã‚¨ãƒª: events.list (1.2ç§’)
- å½±éŸ¿ã‚’å—ã‘ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼: 123äºº
- åœ°åŸŸ: æ±äº¬ï¼ˆé€Ÿã„: 200msï¼‰ã€å¤§é˜ªï¼ˆé…ã„: 1.5ç§’ï¼‰
```

### 2. ã‚¨ãƒ©ãƒ¼ã®è‡ªå‹•æ¤œå‡ºã¨é€šçŸ¥

**ç¾çŠ¶ã®èª²é¡Œ:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å ±å‘ŠãŒãªã„ã¨ã€ã‚¨ãƒ©ãƒ¼ã«æ°—ã¥ã‘ãªã„
- ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’ç‰¹å®šã™ã‚‹ã®ãŒå›°é›£

**Sentryã§è§£æ±º:**
- ã‚¢ãƒ—ãƒªãŒã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãŸã‚Šã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚Šã—ãŸå ´åˆã€è‡ªå‹•çš„ã«Sentryã«å ±å‘Š
- ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ï¼ˆã‚¨ãƒ©ãƒ¼ã®è©³ç´°ãªå ´æ‰€ï¼‰ã‚’è‡ªå‹•åé›†
- Slackã‚„ãƒ¡ãƒ¼ãƒ«ã§å³åº§ã«é€šçŸ¥

**ä¾‹:**
```
[Sentry Alert]
ğŸš¨ æ–°ã—ã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ
- ã‚¨ãƒ©ãƒ¼: TypeError: Cannot read property 'name' of undefined
- ç”»é¢: ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢
- å½±éŸ¿: 5äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼
- é »åº¦: éå»1æ™‚é–“ã§10å›
```

### 3. ãƒªãƒªãƒ¼ã‚¹å¾Œã®å“è³ªä¿è¨¼

**ç¾çŠ¶ã®èª²é¡Œ:**
- æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸå¾Œã€å•é¡ŒãŒã‚ã‚‹ã‹ã©ã†ã‹åˆ†ã‹ã‚‰ãªã„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ”¹å–„ã—ãŸã‹ã€æ‚ªåŒ–ã—ãŸã‹ã‚’æ¯”è¼ƒã§ããªã„

**Sentryã§è§£æ±º:**
- å„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ç‡ã‚’è‡ªå‹•è¨ˆæ¸¬
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å¤‰åŒ–ã‚’å¯è¦–åŒ–ï¼ˆv6.65 vs v6.66ï¼‰
- æ–°æ©Ÿèƒ½ã®ã‚¨ãƒ©ãƒ¼ç‡ã‚’è¿½è·¡

**ä¾‹:**
```
[Sentry Release Comparison]
v6.65 â†’ v6.66
- ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ç‡: 0.5% â†’ 0.3% (æ”¹å–„)
- å¹³å‡ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“: 250ms â†’ 200ms (æ”¹å–„)
- æ–°æ©Ÿèƒ½ã®ã‚¨ãƒ©ãƒ¼ç‡: 0% (å•é¡Œãªã—)
```

### 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆã®æ”¹å–„

**ç¾çŠ¶ã®èª²é¡Œ:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã€Œã‚¢ãƒ—ãƒªãŒå‹•ã‹ãªã„ã€ã¨ã„ã†å ±å‘ŠãŒã‚ã£ã¦ã‚‚ã€åŸå› ãŒåˆ†ã‹ã‚‰ãªã„
- å†ç¾æ‰‹é †ã‚’èã„ã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦šãˆã¦ã„ãªã„ã“ã¨ãŒå¤šã„

**Sentryã§è§£æ±º:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’æ¤œç´¢
- ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸæ™‚ã®ç”»é¢ã€æ“ä½œå±¥æ­´ã‚’ç¢ºèª
- åŸå› ã‚’ç‰¹å®šã—ã€è¿…é€Ÿã«å¯¾å¿œ

**ä¾‹:**
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢ãŒé–‹ã‘ã¾ã›ã‚“ã€
â†“
Sentryã§ç¢ºèª: ã€Œã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ events.getById ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã€
â†“
åŸå› : ã€Œã‚¤ãƒ™ãƒ³ãƒˆIDãŒä¸æ­£ï¼ˆå‰Šé™¤æ¸ˆã¿ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã€
â†“
å¯¾å¿œ: ã€Œå‰Šé™¤æ¸ˆã¿ã‚¤ãƒ™ãƒ³ãƒˆã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã€
```

## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ

### 1. è¿½åŠ ã‚³ã‚¹ãƒˆ

**ç„¡æ–™ãƒ—ãƒ©ãƒ³:**
- æœˆé–“5,000ã‚¨ãƒ©ãƒ¼
- æœˆé–“10,000ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³
- 1ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

**æœ‰æ–™ãƒ—ãƒ©ãƒ³:**
- Developer: $26/æœˆï¼ˆæœˆé–“50,000ã‚¨ãƒ©ãƒ¼ï¼‰
- Team: $80/æœˆï¼ˆæœˆé–“100,000ã‚¨ãƒ©ãƒ¼ï¼‰
- Business: ã‚«ã‚¹ã‚¿ãƒ ä¾¡æ ¼

**æ¨å¥¨:**
- åˆæœŸã¯ç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ååˆ†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ãŒå¢—ãˆãŸã‚‰æœ‰æ–™ãƒ—ãƒ©ãƒ³ã«ç§»è¡Œ

### 2. ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã®æ‡¸å¿µ

**é€ä¿¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿:**
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã€ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±
- ç”»é¢åã€æ“ä½œå±¥æ­´

**å¯¾ç­–:**
- å€‹äººæƒ…å ±ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€é›»è©±ç•ªå·ï¼‰ã¯é€ä¿¡ã—ãªã„è¨­å®šãŒå¯èƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã¯åŒ¿ååŒ–ï¼ˆãƒãƒƒã‚·ãƒ¥åŒ–ï¼‰ã§ãã‚‹
- GDPRã«æº–æ‹ ã—ãŸè¨­å®šãŒå¯èƒ½

### 3. åˆæœŸè¨­å®šã®æ‰‹é–“

**å¿…è¦ãªä½œæ¥­:**
- Sentryãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆï¼ˆ5åˆ†ï¼‰
- DSNã®å–å¾—ã¨ç’°å¢ƒå¤‰æ•°ã®è¨­å®šï¼ˆ5åˆ†ï¼‰
- `app.config.ts`ã®æ›´æ–°ï¼ˆ5åˆ†ï¼‰
- `performance-auto-monitor.ts`ã®æ›´æ–°ï¼ˆ10åˆ†ï¼‰

**åˆè¨ˆ:** ç´„25åˆ†

## å°å…¥æ‰‹é †

### Step 1: Sentryãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

1. https://sentry.io/ ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒCreate Projectã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã€ŒReact Nativeã€ã‚’é¸æŠ
4. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’å…¥åŠ›ï¼ˆä¾‹: `birthday-celebration`ï¼‰
5. ã€ŒCreate Projectã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### Step 2: DSNã®å–å¾—

1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€ŒSettingsã€â†’ã€ŒProjectsã€â†’ã€Œbirthday-celebrationã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€ŒClient Keys (DSN)ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. DSNã‚’ã‚³ãƒ”ãƒ¼ï¼ˆä¾‹: `https://abc123@o123456.ingest.sentry.io/789012`ï¼‰

### Step 3: ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

**é–‹ç™ºç’°å¢ƒ:**

`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€DSNã‚’è¨­å®šï¼š

```bash
# Sentry DSN
SENTRY_DSN=https://abc123@o123456.ingest.sentry.io/789012
```

**æœ¬ç•ªç’°å¢ƒ:**

Vercelã€Railwayã€Expo EASãªã©ã®ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼š

```bash
SENTRY_DSN=https://abc123@o123456.ingest.sentry.io/789012
```

### Step 4: `app.config.ts`ã®æ›´æ–°

```typescript
// app.config.ts
const config: ExpoConfig = {
  // ... æ—¢å­˜ã®è¨­å®š ...
  plugins: [
    // ... æ—¢å­˜ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ ...
    [
      "sentry-expo",
      {
        organization: "your-org", // Sentryã®çµ„ç¹”å
        project: "birthday-celebration", // Sentryã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå
      },
    ],
  ],
  extra: {
    sentryDsn: process.env.SENTRY_DSN,
  },
};
```

### Step 5: Sentryã®åˆæœŸåŒ–

`app/_layout.tsx`ã§Sentryã‚’åˆæœŸåŒ–ï¼š

```typescript
// app/_layout.tsx
import * as Sentry from "@sentry/react-native";
import Constants from "expo-constants";

// Sentryã®åˆæœŸåŒ–ï¼ˆæœ¬ç•ªç’°å¢ƒã®ã¿ï¼‰
if (!__DEV__ && Constants.expoConfig?.extra?.sentryDsn) {
  Sentry.init({
    dsn: Constants.expoConfig.extra.sentryDsn,
    enableInExpoDevelopment: false, // é–‹ç™ºç’°å¢ƒã§ã¯ç„¡åŠ¹
    debug: false, // ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’ç„¡åŠ¹åŒ–
    tracesSampleRate: 1.0, // å…¨ã¦ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆæ¸¬ï¼ˆæœ¬ç•ªã§ã¯0.1-0.5ã‚’æ¨å¥¨ï¼‰
  });
}

export default function RootLayout() {
  // ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...
}
```

### Step 6: `performance-auto-monitor.ts`ã®æ›´æ–°

æœ¬ç•ªç’°å¢ƒã§Sentryã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡ï¼š

```typescript
// lib/performance-auto-monitor.ts
import * as Sentry from "@sentry/react-native";

function logQueryPerformance(
  queryKey: string,
  duration: number,
  hasCache: boolean,
  status: "success" | "error",
  error?: unknown
) {
  // é–‹ç™ºç’°å¢ƒ: ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°
  if (__DEV__) {
    // ... æ—¢å­˜ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚° ...
    return;
  }

  // æœ¬ç•ªç’°å¢ƒ: Sentryã«é€ä¿¡
  const queryName = extractQueryName(queryKey);
  const loadType = hasCache ? "cached" : "initial";

  if (status === "error") {
    Sentry.captureException(error, {
      tags: {
        query: queryName,
        loadType,
      },
    });
    return;
  }

  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’é€ä¿¡
  Sentry.addBreadcrumb({
    category: "performance",
    message: `Query ${queryName} (${loadType}) completed in ${duration}ms`,
    level: duration > SLOW_QUERY_THRESHOLD ? "warning" : "info",
    data: {
      query: queryName,
      duration,
      loadType,
    },
  });

  // é…ã„ã‚¯ã‚¨ãƒªã¯è­¦å‘Šã¨ã—ã¦é€ä¿¡
  if (!hasCache && duration >= SLOW_QUERY_THRESHOLD) {
    Sentry.captureMessage(
      `Slow query: ${queryName} took ${duration}ms`,
      "warning"
    );
  } else if (hasCache && duration >= CACHED_QUERY_THRESHOLD) {
    Sentry.captureMessage(
      `Slow cached query: ${queryName} took ${duration}ms`,
      "warning"
    );
  }
}
```

### Step 7: å‹•ä½œç¢ºèª

1. **é–‹ç™ºç’°å¢ƒã§ç¢ºèª:**
   ```bash
   pnpm dev
   ```
   - Metro Bundlerã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
   - Sentryã«ã¯é€ä¿¡ã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª

2. **æœ¬ç•ªç’°å¢ƒã§ç¢ºèª:**
   ```bash
   pnpm build
   pnpm start
   ```
   - Sentryã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

## è¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### 1. ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã®èª¿æ•´

**æ¨å¥¨è¨­å®š:**

```typescript
Sentry.init({
  dsn: Constants.expoConfig.extra.sentryDsn,
  tracesSampleRate: 0.1, // 10%ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆæ¸¬ï¼ˆã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼‰
});
```

| ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆ | èª¬æ˜ | æ¨å¥¨ã‚·ãƒ¼ãƒ³ |
|-------------------|------|-----------|
| `1.0` (100%) | å…¨ã¦ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆæ¸¬ | åˆæœŸå°å…¥ã€å•é¡Œèª¿æŸ»ä¸­ |
| `0.5` (50%) | åŠåˆ†ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆæ¸¬ | ãƒãƒ©ãƒ³ã‚¹é‡è¦– |
| `0.1` (10%) | 10%ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆæ¸¬ | ã‚³ã‚¹ãƒˆå‰Šæ¸›ã€å¤§è¦æ¨¡ã‚¢ãƒ—ãƒª |

### 2. å€‹äººæƒ…å ±ã®é™¤å¤–

```typescript
Sentry.init({
  dsn: Constants.expoConfig.extra.sentryDsn,
  beforeSend(event) {
    // ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’é™¤å¤–
    if (event.user?.email) {
      delete event.user.email;
    }
    // é›»è©±ç•ªå·ã‚’é™¤å¤–
    if (event.user?.phone) {
      delete event.user.phone;
    }
    return event;
  },
});
```

### 3. ç’°å¢ƒåˆ¥ã®è¨­å®š

```typescript
Sentry.init({
  dsn: Constants.expoConfig.extra.sentryDsn,
  environment: __DEV__ ? "development" : "production",
  release: Constants.expoConfig?.version, // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·
});
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. Sentryã«ãƒ‡ãƒ¼ã‚¿ãŒé€ä¿¡ã•ã‚Œãªã„

**åŸå› :**
- DSNãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„
- é–‹ç™ºç’°å¢ƒã§å®Ÿè¡Œã—ã¦ã„ã‚‹ï¼ˆ`__DEV__ === true`ï¼‰

**å¯¾ç­–:**
```typescript
// ä¸€æ™‚çš„ã«é–‹ç™ºç’°å¢ƒã§ã‚‚æœ‰åŠ¹åŒ–
Sentry.init({
  dsn: Constants.expoConfig.extra.sentryDsn,
  enableInExpoDevelopment: true, // é–‹ç™ºç’°å¢ƒã§ã‚‚æœ‰åŠ¹
  debug: true, // ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’æœ‰åŠ¹åŒ–
});
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŸå› :**
- `tracesSampleRate`ãŒ0ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹
- ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆãŒä½ã™ãã‚‹ï¼ˆ0.01ãªã©ï¼‰

**å¯¾ç­–:**
```typescript
Sentry.init({
  dsn: Constants.expoConfig.extra.sentryDsn,
  tracesSampleRate: 1.0, // å…¨ã¦ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨ˆæ¸¬
});
```

### 3. ã‚¨ãƒ©ãƒ¼ãŒé‡è¤‡ã—ã¦é€ä¿¡ã•ã‚Œã‚‹

**åŸå› :**
- React Queryã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ã«ã‚ˆã‚Šã€åŒã˜ã‚¨ãƒ©ãƒ¼ãŒè¤‡æ•°å›é€ä¿¡ã•ã‚Œã‚‹

**å¯¾ç­–:**
```typescript
// lib/performance-auto-monitor.ts
const sentErrorKeys = new Set<string>();

function logQueryPerformance(...) {
  if (status === "error") {
    const errorKey = `${queryName}-${error?.message}`;
    if (sentErrorKeys.has(errorKey)) {
      return; // æ—¢ã«é€ä¿¡æ¸ˆã¿
    }
    sentErrorKeys.add(errorKey);
    Sentry.captureException(error, { ... });
  }
}
```

## ã¾ã¨ã‚

Sentryã¯æœ¬ç•ªç’°å¢ƒã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–ã¨ã‚¨ãƒ©ãƒ¼ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã«éå¸¸ã«æœ‰ç”¨ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç¾æ™‚ç‚¹ã§ã¯`performance-auto-monitor.ts`ãŒé–‹ç™ºç’°å¢ƒã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ã‚’æä¾›ã—ã¦ã„ã¾ã™ãŒã€ä»¥ä¸‹ã®å ´åˆã«Sentryã®å°å…¥ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ï¼š

1. **æœ¬ç•ªç’°å¢ƒã§ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ç›£è¦–ã—ãŸã„**
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ã‚¨ãƒ©ãƒ¼å ±å‘Šã«è¿…é€Ÿã«å¯¾å¿œã—ãŸã„**
3. **ãƒªãƒªãƒ¼ã‚¹å¾Œã®å“è³ªä¿è¨¼ã‚’å¼·åŒ–ã—ãŸã„**
4. **åœ°åŸŸåˆ¥ã€ãƒ‡ãƒã‚¤ã‚¹åˆ¥ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åˆ†æã—ãŸã„**

å°å…¥æ‰‹é †ã¯ç´„25åˆ†ã§å®Œäº†ã—ã€ç„¡æ–™ãƒ—ãƒ©ãƒ³ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã¾ã™ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã«å¾“ã£ã¦ã€å¿…è¦ã«ãªã£ãŸæ™‚ã«Sentryã‚’å°å…¥ã—ã¦ãã ã•ã„ã€‚

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹**: `docs/performance-best-practices.md`
- **è‡ªå‹•è¨ˆæ¸¬ã®è©³ç´°**: `docs/performance-monitoring-auto.md`
- **æ‰‹å‹•è¨ˆæ¸¬ã®è©³ç´°**: `docs/performance-monitoring.md`
- **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®åˆ†æ**: `docs/loading-state-analysis.md`
