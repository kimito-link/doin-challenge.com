# 主要ユーザーフローの動作確認リスト

## 概要

このドキュメントは、Web版リリース前に確認すべき主要ユーザーフローをリスト化したものです。

## 最重要フロー10個

### 1. 新規ユーザー登録・ログイン

**フロー:**
1. トップページにアクセス
2. 「ログイン」ボタンをクリック
3. OAuth認証（Google/GitHub）を選択
4. 認証完了後、ホーム画面に遷移

**確認ポイント:**
- [ ] OAuth認証が正常に動作する
- [ ] 認証後、ホーム画面に遷移する
- [ ] ユーザー情報が正しく表示される
- [ ] セッションが維持される

**エッジケース:**
- [ ] 認証キャンセル時、エラーメッセージが表示される
- [ ] 認証失敗時、再試行できる
- [ ] セッション切れ時、ログイン画面に遷移する

---

### 2. イベント一覧の閲覧

**フロー:**
1. ホーム画面にアクセス
2. イベント一覧が表示される
3. フィルター（ジャンル、日時）を適用
4. 検索ボックスでイベントを検索

**確認ポイント:**
- [ ] イベント一覧が正しく表示される
- [ ] フィルターが正常に動作する
- [ ] 検索機能が正常に動作する
- [ ] ページネーションが正常に動作する

**エッジケース:**
- [ ] イベントが0件の場合、空状態が表示される
- [ ] 検索結果が0件の場合、空状態が表示される
- [ ] フィルターをクリアできる

---

### 3. イベント詳細の閲覧

**フロー:**
1. イベント一覧からイベントをクリック
2. イベント詳細画面に遷移
3. イベント情報（タイトル、日時、場所、説明）が表示される
4. 参加予定人数、応援メッセージが表示される

**確認ポイント:**
- [ ] イベント詳細が正しく表示される
- [ ] 参加予定人数が正しく表示される
- [ ] 応援メッセージが正しく表示される
- [ ] 画像が正しく表示される

**エッジケース:**
- [ ] イベントが存在しない場合、404エラーが表示される
- [ ] 応援メッセージが0件の場合、空状態が表示される

---

### 4. 参加表明

**フロー:**
1. イベント詳細画面で「参加予定を表明」ボタンをクリック
2. 参加方法（会場/配信/両方）を選択
3. 性別（男性/女性/その他/未回答）を選択
4. 「参加表明する」ボタンをクリック
5. 参加完了画面が表示される

**確認ポイント:**
- [ ] 参加表明フォームが正しく表示される
- [ ] 参加方法を選択できる
- [ ] 性別を選択できる
- [ ] 参加表明が正常に完了する
- [ ] 参加完了画面が表示される

**エッジケース:**
- [ ] 未ログイン時、ログイン画面に遷移する
- [ ] 既に参加表明済みの場合、エラーメッセージが表示される
- [ ] 入力が不正な場合、バリデーションエラーが表示される
- [ ] 二重送信を防止できる

---

### 5. 応援メッセージの投稿

**フロー:**
1. イベント詳細画面で「応援メッセージを投稿」ボタンをクリック
2. メッセージを入力
3. 性別（男性/女性/その他/未回答）を選択
4. 「投稿する」ボタンをクリック
5. 投稿完了画面が表示される

**確認ポイント:**
- [ ] 応援メッセージフォームが正しく表示される
- [ ] メッセージを入力できる
- [ ] 性別を選択できる
- [ ] 投稿が正常に完了する
- [ ] 投稿完了画面が表示される

**エッジケース:**
- [ ] 未ログイン時、ログイン画面に遷移する
- [ ] メッセージが空の場合、バリデーションエラーが表示される
- [ ] メッセージが長すぎる場合、バリデーションエラーが表示される
- [ ] 二重送信を防止できる

---

### 6. 応援メッセージの閲覧

**フロー:**
1. イベント詳細画面で応援メッセージセクションにスクロール
2. 応援メッセージ一覧が表示される
3. 性別フィルターを適用
4. もっと見るボタンをクリック

**確認ポイント:**
- [ ] 応援メッセージ一覧が正しく表示される
- [ ] 性別フィルターが正常に動作する
- [ ] もっと見るボタンが正常に動作する
- [ ] メッセージが正しく表示される

**エッジケース:**
- [ ] 応援メッセージが0件の場合、空状態が表示される
- [ ] フィルター結果が0件の場合、空状態が表示される

---

### 7. プロフィール編集

**フロー:**
1. マイページにアクセス
2. 「プロフィール編集」ボタンをクリック
3. 名前、性別、自己紹介を編集
4. 「保存する」ボタンをクリック
5. 保存完了画面が表示される

**確認ポイント:**
- [ ] プロフィール編集フォームが正しく表示される
- [ ] 名前、性別、自己紹介を編集できる
- [ ] 保存が正常に完了する
- [ ] 保存完了画面が表示される

**エッジケース:**
- [ ] 未ログイン時、ログイン画面に遷移する
- [ ] 名前が空の場合、バリデーションエラーが表示される
- [ ] 自己紹介が長すぎる場合、バリデーションエラーが表示される

---

### 8. 参加予定イベントの確認

**フロー:**
1. マイページにアクセス
2. 「参加予定」タブをクリック
3. 参加予定イベント一覧が表示される
4. イベントをクリックして詳細画面に遷移

**確認ポイント:**
- [ ] 参加予定イベント一覧が正しく表示される
- [ ] イベントをクリックして詳細画面に遷移できる
- [ ] 参加予定が0件の場合、空状態が表示される

**エッジケース:**
- [ ] 未ログイン時、ログイン画面に遷移する
- [ ] 参加予定が0件の場合、空状態が表示される

---

### 9. 投稿した応援メッセージの確認

**フロー:**
1. マイページにアクセス
2. 「投稿したメッセージ」タブをクリック
3. 投稿した応援メッセージ一覧が表示される
4. メッセージをクリックしてイベント詳細画面に遷移

**確認ポイント:**
- [ ] 投稿した応援メッセージ一覧が正しく表示される
- [ ] メッセージをクリックしてイベント詳細画面に遷移できる
- [ ] 投稿が0件の場合、空状態が表示される

**エッジケース:**
- [ ] 未ログイン時、ログイン画面に遷移する
- [ ] 投稿が0件の場合、空状態が表示される

---

### 10. ログアウト

**フロー:**
1. マイページにアクセス
2. 「ログアウト」ボタンをクリック
3. ログアウト確認ダイアログが表示される
4. 「ログアウトする」ボタンをクリック
5. ホーム画面に遷移

**確認ポイント:**
- [ ] ログアウト確認ダイアログが表示される
- [ ] ログアウトが正常に完了する
- [ ] ホーム画面に遷移する
- [ ] セッションが削除される

**エッジケース:**
- [ ] ログアウトキャンセル時、マイページに戻る

---

## エッジケースの洗い出し

### 認証関連

- [ ] セッション切れ時、ログイン画面に遷移する
- [ ] 認証キャンセル時、エラーメッセージが表示される
- [ ] 認証失敗時、再試行できる
- [ ] 未ログイン時、ログインが必要な画面にアクセスできない

### データ関連

- [ ] データが0件の場合、空状態が表示される
- [ ] データが存在しない場合、404エラーが表示される
- [ ] データ取得失敗時、エラーメッセージが表示される
- [ ] データ更新失敗時、エラーメッセージが表示される

### 入力関連

- [ ] 入力が不正な場合、バリデーションエラーが表示される
- [ ] 入力が空の場合、バリデーションエラーが表示される
- [ ] 入力が長すぎる場合、バリデーションエラーが表示される
- [ ] 二重送信を防止できる

### ネットワーク関連

- [ ] ネットワークエラー時、エラーメッセージが表示される
- [ ] タイムアウト時、エラーメッセージが表示される
- [ ] リトライできる

### パフォーマンス関連

- [ ] ページ読み込み速度が3秒以内
- [ ] LCPが3秒以内
- [ ] リアルタイム更新が正常に動作する

---

## テスト実施手順

### 1. 手動テスト

1. **ブラウザで確認**
   - Chrome（最新版）
   - Safari（最新版）
   - Firefox（最新版）

2. **デバイスで確認**
   - デスクトップ（1920x1080）
   - タブレット（768x1024）
   - モバイル（375x667）

3. **ネットワーク状態で確認**
   - 高速（Wi-Fi）
   - 低速（3G）
   - オフライン

### 2. 自動テスト

1. **E2Eテスト**
   - GitHub Actionsで自動実行
   - 主要フロー10個をテスト

2. **ユニットテスト**
   - Vitestで実行
   - カバレッジ80%以上

3. **統合テスト**
   - tRPCのAPIをテスト
   - データベースの整合性をテスト

---

## まとめ

### 確認すべき主要フロー

1. 新規ユーザー登録・ログイン
2. イベント一覧の閲覧
3. イベント詳細の閲覧
4. 参加表明
5. 応援メッセージの投稿
6. 応援メッセージの閲覧
7. プロフィール編集
8. 参加予定イベントの確認
9. 投稿した応援メッセージの確認
10. ログアウト

### 重要なポイント

- **全フローを確認**: 主要フロー10個を全て確認する
- **エッジケースを確認**: 異常系も含めて確認する
- **複数ブラウザで確認**: Chrome、Safari、Firefoxで確認する
- **複数デバイスで確認**: デスクトップ、タブレット、モバイルで確認する
