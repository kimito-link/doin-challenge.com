# 視認性問題レポート

## 概要

イベント詳細画面（`app/event/[id].tsx`）において、ダークテーマ背景に対して一部のテキスト要素の視認性が低い問題が確認されています。

---

## 問題箇所一覧

### 1. 貢献度ランキング - ユーザー名

| 項目 | 内容 |
|------|------|
| **画面** | イベント詳細画面 |
| **セクション** | 貢献度ランキング |
| **問題要素** | ユーザー名（@username） |
| **現在の色** | `#DD6500`（オレンジ） |
| **背景色** | `#1A1D21`（ダークグレー） |
| **問題** | オレンジ色が背景に対してコントラスト不足で読みにくい |
| **ファイル** | `features/events/components/ContributionRanking.tsx` |
| **該当行** | 135行目 |
| **優先度** | 高 |

**現在のコード:**
```tsx
<Text style={{ color: "#DD6500", fontSize: 11 }}>@{p.username}</Text>
```

---

### 2. 応援メッセージ - ユーザー名

| 項目 | 内容 |
|------|------|
| **画面** | イベント詳細画面 |
| **セクション** | 応援メッセージ |
| **問題要素** | ユーザー名（@username） |
| **現在の色** | `#DD6500`（オレンジ） |
| **背景色** | `#1A1D21`（ダークグレー） |
| **問題** | オレンジ色が背景に対してコントラスト不足で読みにくい |
| **ファイル** | `features/events/components/MessageCard.tsx` |
| **該当行** | 104行目 |
| **優先度** | 高 |

**現在のコード:**
```tsx
<Text style={{ color: "#DD6500", fontSize: 14 }}>@{participation.username}</Text>
```

---

### 3. 応援メッセージ - フォロワー数

| 項目 | 内容 |
|------|------|
| **画面** | イベント詳細画面 |
| **セクション** | 応援メッセージ |
| **問題要素** | フォロワー数表示 |
| **現在の色** | `#EC4899`（ピンク） |
| **背景色** | `#1A1D21`（ダークグレー） |
| **問題** | ピンク色が小さいフォントサイズ（11px）と組み合わさり読みにくい |
| **ファイル** | `features/events/components/MessageCard.tsx` |
| **該当行** | 113行目 |
| **優先度** | 中 |

**現在のコード:**
```tsx
<Text style={{ color: "#EC4899", fontSize: 11 }}>
  {participation.followersCount.toLocaleString()} フォロワー
</Text>
```

---

### 4. 貢献度ランキング - フォロワー数

| 項目 | 内容 |
|------|------|
| **画面** | イベント詳細画面 |
| **セクション** | 貢献度ランキング |
| **問題要素** | フォロワー数表示 |
| **現在の色** | `#9CA3AF`（グレー） |
| **背景色** | `#1A1D21`（ダークグレー） |
| **問題** | グレー色が小さいフォントサイズ（10px）と組み合わさり読みにくい |
| **ファイル** | `features/events/components/ContributionRanking.tsx` |
| **該当行** | 146行目 |
| **優先度** | 中 |

**現在のコード:**
```tsx
<Text style={{ color: "#9CA3AF", fontSize: 10, marginTop: 2 }}>
  {p.followersCount >= 10000
    ? `${(p.followersCount / 10000).toFixed(1)}万`
    : p.followersCount.toLocaleString()}
  フォロワー
</Text>
```

---

## 修正対象ファイル

| ファイルパス | 問題数 | 優先度 |
|-------------|--------|--------|
| `features/events/components/ContributionRanking.tsx` | 2 | 高 |
| `features/events/components/MessageCard.tsx` | 2 | 高 |

---

## 推奨される修正方針

### 方針1: 色の変更

ユーザー名の色を視認性の高い色に変更する：

| 要素 | 現在の色 | 推奨色候補 |
|------|----------|------------|
| ユーザー名 | `#DD6500` | `#F97316`（明るいオレンジ）または `#FBBF24`（アンバー） |
| フォロワー数 | `#EC4899` / `#9CA3AF` | `#F472B6`（明るいピンク）または `#D1D5DB`（明るいグレー） |

### 方針2: フォントサイズの調整

小さいフォントサイズ（10-11px）の要素は、色のコントラストだけでなくサイズも問題になる可能性がある：

- 最小フォントサイズを12pxに統一することを検討

### 方針3: コントラスト比の確認

WCAG 2.1のコントラスト比基準（AA: 4.5:1以上、AAA: 7:1以上）を満たす色を選択する。

---

## 確認用スクリーンショット

スクリーンショット（IMG_1262.PNG）で確認できる問題箇所：

1. **貢献度ランキング**
   - 1位: 「君斗りんく@クリエイター応援」のユーザー名がピンク/オレンジで読みにくい
   - 2位: 「たぬ姉」のユーザー名も同様

2. **応援メッセージ**
   - 「君斗りんく@クリエイター応援」のユーザー名がピンク/オレンジで読みにくい
   - 「@streamerfunch」の表示が背景に溶け込んでいる

---

## チェックリスト

- [x] ContributionRanking.tsx のユーザー名色を修正（#DD6500 → #FBBF24）
- [x] ContributionRanking.tsx のフォロワー数色を修正（#9CA3AF → #D1D5DB）
- [x] MessageCard.tsx のユーザー名色を修正（#DD6500 → #FBBF24）
- [x] MessageCard.tsx のフォロワー数色を修正（#EC4899 → #F472B6）
- [x] 修正後のコントラスト比を確認（すべてAA以上、2つはAAA達成）
- [ ] 実機で視認性を確認

---

## 備考

- 他の画面でも同様の色（`#DD6500`、`#EC4899`）が使用されている可能性があるため、全体的な色の見直しが必要かもしれない
- ダークテーマ専用の色パレットを定義することで、一貫性のある視認性改善が可能


---

## コントラスト比検証結果（2026-01-29）

WCAG 2.1基準に基づくコントラスト比チェック結果：

| 要素 | 色 | フォントサイズ | コントラスト比 | WCAG 2.1 |
|------|-----|---------------|---------------|----------|
| **ユーザー名（修正後）** | #FBBF24 | 11px | **10.13:1** | **AAA ✅✅✅** |
| **フォロワー数（明るいグレー）** | #D1D5DB | 10px | **11.48:1** | **AAA ✅✅✅** |
| **フォロワー数（明るいピンク）** | #F472B6 | 11px | **6.39:1** | **AA ✅** |

### 修正前との比較

| 要素 | 修正前 | 修正後 | 改善 |
|------|--------|--------|------|
| ユーザー名 | 4.78:1 (AA) | **10.13:1 (AAA)** | +5.35 |
| フォロワー数（グレー） | 6.66:1 (AA) | **11.48:1 (AAA)** | +4.82 |
| フォロワー数（ピンク） | 4.79:1 (AA) | **6.39:1 (AA)** | +1.60 |

### 結論

すべての要素がWCAG 2.1の**AA基準（4.5:1以上）を満たし**、ユーザー名とフォロワー数（グレー）は**AAA基準（7:1以上）を達成**しました。

修正前も全てAA基準を満たしていましたが、修正後はさらに視認性が向上しています。
