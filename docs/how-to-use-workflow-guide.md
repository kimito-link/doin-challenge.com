# GitHub ワークフロー品質管理ガイド 使い方

**どんなプロジェクトでも5ステップで導入できる**

このガイドは、GitHub ワークフロー品質管理ガイドの使い方を説明します。

---

## 目次

1. [導入の流れ](#導入の流れ)
2. [ステップ1: ファイルをコピー](#ステップ1-ファイルをコピー)
3. [ステップ2: プロジェクトに合わせてカスタマイズ](#ステップ2-プロジェクトに合わせてカスタマイズ)
4. [ステップ3: 最初のPRを作成](#ステップ3-最初のprを作成)
5. [ステップ4: ChatGPTに相談](#ステップ4-chatgptに相談)
6. [ステップ5: レビューとマージ](#ステップ5-レビューとマージ)
7. [継続的な改善](#継続的な改善)

---

## 導入の流れ

```
1. ファイルをコピー
   ↓
2. プロジェクトに合わせてカスタマイズ
   ↓
3. 最初のPRを作成
   ↓
4. ChatGPTに相談
   ↓
5. レビューとマージ
   ↓
6. 継続的な改善
```

---

## ステップ1: ファイルをコピー

### 1.1 docsディレクトリを作成

```bash
# プロジェクトルートで実行
mkdir -p docs
```

### 1.2 テンプレートファイルをコピー

```bash
# 以下のファイルをdocsディレクトリにコピー
cp github-workflow-quality-guide.md docs/
cp implementation-guide-template.md docs/implementation-guide.md
cp ng-list-template.md docs/ng-list.md
cp review-checklist-template.md docs/review-checklist-template.md
```

### 1.3 ファイル構成を確認

```
project/
├── docs/
│   ├── github-workflow-quality-guide.md  # メインガイド
│   ├── implementation-guide.md           # 実装ガイド
│   ├── ng-list.md                        # NG集
│   └── review-checklist-template.md      # レビューチェックリスト
├── src/
└── ...
```

---

## ステップ2: プロジェクトに合わせてカスタマイズ

### 2.1 implementation-guide.md をカスタマイズ

**置き換える項目**:

1. `{プロジェクト名}` → プロジェクトの実際の名前
2. `{プロジェクトの目的}` → プロジェクトの目的を1〜2文で
3. `{React/Vue/Next.js等}` → 使用しているフレームワーク
4. `{TypeScript/JavaScript等}` → 使用している言語
5. `{Jest/Vitest等}` → 使用しているテストフレームワーク

**追加する項目**:

- アーキテクチャの全体構成
- 技術スタックの詳細
- PR分割戦略の具体例

### 2.2 ng-list.md をカスタマイズ

**追加する項目**:

1. **触ってはいけないファイル**
   - 本番環境で動作している重要なファイル
   - 認証/決済など、触ると危険なファイル

2. **使ってはいけないライブラリ/関数**
   - セキュリティリスクがあるライブラリ
   - パフォーマンスが悪いライブラリ

3. **禁止されている実装パターン**
   - グローバル状態への直接アクセス
   - any型の使用
   - 非同期処理のawait忘れ

4. **禁止ワード**
   - 法務リスクがある言葉（絶対、完璧、保証等）

### 2.3 review-checklist-template.md をカスタマイズ

**置き換える項目**:

1. `{プロジェクト名}` → プロジェクトの実際の名前

**追加する項目**:

- プロジェクト固有のチェック項目
- テストカバレッジの目標値

---

## ステップ3: 最初のPRを作成

### 3.1 PRの目的を明確にする

```markdown
## PR-1: ログインボタンとモーダルUI

### 目的

ログイン機能の第一歩として、ボタンとモーダルのUIを実装する。
API呼び出しは次のPRで実装する。

### 実装内容

- [ ] ログインボタンコンポーネント作成
- [ ] ログインモーダルコンポーネント作成
- [ ] ユニットテスト追加

### 影響範囲

- 変更ファイル: `components/auth/LoginButton.tsx`, `components/auth/LoginModal.tsx`
- 影響する機能: なし（新規機能）

### テスト

- [ ] ユニットテスト追加
- [ ] 既存テスト全パス
```

### 3.2 実装する

```bash
# ブランチを作成
git checkout -b feature/pr-1-login-ui

# 実装
# ...

# コミット
git add .
git commit -m "feat: add login button and modal UI"

# プッシュ
git push origin feature/pr-1-login-ui
```

### 3.3 PRを作成

GitHub上でPRを作成し、Draft状態にする。

---

## ステップ4: ChatGPTに相談

### 4.1 相談内容を準備

以下のファイルを準備します。

1. `docs/implementation-guide.md`
2. `docs/ng-list.md`
3. `git diff main...feature/pr-1-login-ui` の結果

### 4.2 ChatGPTに送信

```
以下のPRを実装しました。
実装ガイドとNG集に違反していないか、
デグレードリスクがないか確認してください。

## 実装ガイド

（docs/implementation-guide.mdの内容をコピペ）

## NG集

（docs/ng-list.mdの内容をコピペ）

## 実装したコード差分

（git diffの結果をコピペ）

## 質問

1. この実装は実装ガイドに沿っていますか？
2. NG集に違反していませんか？
3. デグレードリスクはありますか？
4. より良い実装方法はありますか？
```

### 4.3 ChatGPTの回答を確認

ChatGPTからの指摘があれば、修正します。

---

## ステップ5: レビューとマージ

### 5.1 レビューチェックリストを作成

```bash
# PR-1のレビューチェックリストを作成
cp docs/review-checklist-template.md docs/pr1-review-checklist.md
```

### 5.2 レビューチェックリストを埋める

`docs/pr1-review-checklist.md` を開き、チェック項目を埋めます。

### 5.3 PRをReady for Reviewにする

GitHub上でPRをReady for Reviewにします。

### 5.4 レビューを受ける

レビュアーがレビューチェックリストを使ってレビューします。

### 5.5 マージ

レビュー承認後、マージします。

```bash
# GitHubでマージボタンをクリック
```

---

## 継続的な改善

### 6.1 NG集を更新

新しいNG項目が見つかった場合、`docs/ng-list.md` に追記します。

```markdown
### 新しいNG項目

**発生日**: 2024-01-20

**問題**: ログイン処理でトークンが保存されない

**原因**: AsyncStorageの非同期処理をawaitしていなかった

**対策**: AsyncStorageの全ての呼び出しにawaitを追加

**NG例**:
\`\`\`typescript
// NG: awaitがない
AsyncStorage.setItem('token', token);
navigate('/home');
\`\`\`

**OK例**:
\`\`\`typescript
// OK: awaitを使う
await AsyncStorage.setItem('token', token);
navigate('/home');
\`\`\`
```

### 6.2 実装ガイドを更新

新しい実装原則が見つかった場合、`docs/implementation-guide.md` に追記します。

### 6.3 レビューチェックリストを更新

新しいチェック項目が必要な場合、`docs/review-checklist-template.md` に追記します。

---

## よくある質問

### Q1: どのくらいの頻度でNG集を更新すべきですか？

**A**: 問題が発生したらすぐに更新してください。週1回の定期レビューもおすすめです。

### Q2: ChatGPTに相談するタイミングは？

**A**: 実装前と実装後の両方で相談することをおすすめします。

- **実装前**: 実装方針を相談
- **実装後**: コードレビューを依頼

### Q3: PRのサイズはどのくらいが適切ですか？

**A**: 変更ファイル数が3〜10ファイル程度が目安です。大きすぎる場合は分割してください。

### Q4: レビューチェックリストは毎回作成する必要がありますか？

**A**: はい、毎回作成することをおすすめします。レビュー漏れを防ぐためです。

### Q5: このワークフローは小規模プロジェクトでも有効ですか？

**A**: はい、小規模プロジェクトでも有効です。特にデグレード防止に効果的です。

---

## トラブルシューティング

### 問題1: NG集が長くなりすぎた

**解決策**: カテゴリごとに分割する

```
docs/
├── ng-list/
│   ├── files.md          # 触ってはいけないファイル
│   ├── libraries.md      # 使ってはいけないライブラリ
│   ├── patterns.md       # 禁止されている実装パターン
│   └── words.md          # 禁止ワード
```

### 問題2: レビューに時間がかかりすぎる

**解決策**: PRを小さく分割する

- 1PR = 1つの明確な目的
- 変更ファイル数: 3〜10ファイル程度

### 問題3: ChatGPTの回答が不十分

**解決策**: 質問を具体的にする

```
# NG: 抽象的な質問
この実装は正しいですか？

# OK: 具体的な質問
この実装は、実装ガイドの「コンポーネントの独立性」原則に沿っていますか？
グローバル状態に依存していないか確認してください。
```

---

## まとめ

このワークフローを使うことで、以下のメリットがあります。

1. **品質向上**: デグレードや設計ミスを防ぐ
2. **開発速度向上**: レビューがスムーズになり、手戻りが減る
3. **チーム協働**: ドキュメントが残り、知識が共有される
4. **安心感**: 「どこか直したら他が壊れる」問題が解消される

**今すぐ導入して、品質の高い開発を始めましょう！**

---

## 参考リンク

- [GitHub ワークフロー品質管理ガイド（メイン）](github-workflow-quality-guide.md)
- [実装ガイドテンプレート](implementation-guide-template.md)
- [NG集テンプレート](ng-list-template.md)
- [レビューチェックリストテンプレート](review-checklist-template.md)
