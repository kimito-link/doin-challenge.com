# ChatGPT相談: ジャンル絞り込み（思想・前提・ポリシーベース）

---

## 📋 背景

生誕祭応援アプリ「君斗りんくの動員ちゃれんじ」のジャンルを絞り込みたい。

**現在のジャンル**:
- ライブ動画
- YouTubeリアルタイム視聴動員
- ホスト
- その他

**絞り込み後のジャンル**:
- ライブ動画
- YouTubeリアルタイム視聴動員

**理由**:
- ホストは後で追加できる
- 今は絞って分かりやすくしたい

---

## 🎯 相談内容

AI時代のプロダクト開発は、表に見える機能・画面ではなく、**『思想』『前提』『ポリシー』**で成果が決まる。

そこで、ジャンル絞り込みを「思想・前提・ポリシー」ベースで設計したい。

---

## ① 思想（Why）

### 質問

**ジャンルを絞ることで、ユーザーのどんな幸せが増えるのか？**

### 仮説

- **迷いを減らす**: 選択肢が多いと迷う、絞ることで決断が速くなる
- **分かりやすさ**: 「このアプリは何ができるのか」が明確になる
- **集中できる**: ライブ動画とYouTubeに特化することで、機能の質が上がる

### 確認したいこと

1. この仮説は妥当か？
2. 他にどんな幸せが増えるか？
3. 逆に、ジャンルを絞ることで失われる幸せはあるか？

---

## ② 前提（Assumptions）

### 質問

**ホストを後で追加できる設計になっているか？**

### 現在の設計

#### データベーススキーマ

```typescript
// server/db/schema/goals.ts
export const goals = pgTable("goals", {
  id: serial("id").primaryKey(),
  userId: integer("user_id").notNull(),
  genre: varchar("genre", { length: 50 }).notNull(), // ← ここ
  targetDate: date("target_date").notNull(),
  targetCount: integer("target_count").notNull(),
  currentCount: integer("current_count").default(0).notNull(),
  createdAt: timestamp("created_at").defaultNow().notNull(),
  updatedAt: timestamp("updated_at").defaultNow().notNull(),
});
```

#### UI

```typescript
// components/organisms/mypage-content.tsx
const genres = [
  { id: "live", label: "ライブ動画", icon: "📹" },
  { id: "youtube", label: "YouTubeリアルタイム視聴動員", icon: "▶️" },
  { id: "host", label: "ホスト", icon: "🍾" },
  { id: "other", label: "その他", icon: "✨" },
];
```

### 確認したいこと

1. `genre`フィールドは文字列なので、後でホストを追加できるか？
2. 既存データ（ホストを選んだユーザー）はどうなるか？
3. ホストを追加するときに、データベース移行が必要か？

---

## ③ ポリシー（Rules）

### 質問

**既存データを壊さずにジャンルを絞る方法は？**

### 想定されるリスク

1. **既存データの削除**: ホストを選んだユーザーのデータが消える
2. **UIの不整合**: ホストを選んだユーザーがマイページを開いたときにエラー
3. **データベース移行の失敗**: スキーマ変更でデータが壊れる

### 確認したいこと

1. 既存データを保持したまま、UIだけ絞る方法は？
2. ホストを選んだユーザーには、どう表示するか？
3. データベース移行は必要か？

---

## 🎯 期待する回答

### 1. 思想（Why）

- ジャンルを絞ることで増える幸せ
- 失われる幸せ
- 判断基準（絞るべきか、残すべきか）

### 2. 前提（Assumptions）

- ホストを後で追加できる設計か
- 既存データの扱い
- データベース移行の必要性

### 3. ポリシー（Rules）

- 既存データを壊さない方法
- UIの不整合を防ぐ方法
- ホストを選んだユーザーへの対応

### 4. 実装方針

- **パターンA**: UIだけ絞る（データベースは変更しない）
- **パターンB**: データベースも変更する（既存データは移行）
- **パターンC**: その他の方法

どのパターンが最適か、理由とともに教えてください。

---

## 📚 参考情報

### プロジェクト概要

- **名前**: 君斗りんくの動員ちゃれんじ
- **目的**: 推しの生誕祭を盛り上げるための目標設定・進捗管理アプリ
- **ユーザー**: VTuberファン、アイドルファン
- **技術スタック**: Next.js, PostgreSQL, Drizzle ORM

### 現在の機能

1. **マイページ**: 推しの生誕祭を盛り上げよう（ジャンル選択）
2. **目標設定**: ジャンルごとに目標を設定
3. **進捗管理**: 目標に対する進捗を記録

### Phase 2実装ガイドの思想

> 「迷わない／怖がらず／戻ってこれる」

この思想は、ログインUX改善のために作成したものですが、ジャンル絞り込みにも適用できると考えています。

---

## 🎉 まとめ

AI時代のプロダクト開発は、**『思想』『前提』『ポリシー』**で成果が決まる。

ジャンル絞り込みを「思想・前提・ポリシー」ベースで設計することで、以下を実現したい：

1. **ユーザーの幸せを増やす**（思想）
2. **後で追加できる設計**（前提）
3. **既存データを壊さない**（ポリシー）

この3つを満たす実装方針を教えてください。
