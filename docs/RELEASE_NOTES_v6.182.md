# リリースノート v6.182

**リリース日**: 2025-01-31  
**バージョン**: 6.182

## 概要

ファクタリング作業の完了とX APIコスト管理機能の改善を実施しました。

## 主な変更内容

### 🎨 コンポーネント統一

#### SearchBarの改善
- **SearchBarをSearchInputベースに移行**
  - コード量を約70%削減（約200行→約60行）
  - サジェスト機能とデバウンス機能を統合
  - 統一テーマを使用（ダークモード対応）

#### Checkboxの統一
- **challenge-created-modalで統一Checkboxコンポーネントを使用**
  - アイコン表示に対応
  - アクションボタンに対応
  - チェック状態の視覚的フィードバック（打ち消し線など）

#### その他のコンポーネント統一
- **RetryButtonコンポーネントを統一**
  - エラーフォールバックコンポーネントで統一使用
  - バリアント（retry, reload, tryAgain, primary）とサイズ（sm, md）に対応

- **Skeletonコンポーネントを統一**
  - 単一の実装に統合
  - SKELETON_CONFIGを使用したアニメーション設定

### 🔧 型定義の統一

#### Gender型の統一
- **FormGender型を導入**
  - フォーム入力時の未選択状態（空文字列）を表現
  - 標準Gender型（"male" | "female" | "unspecified"）と区別
  - 型安全性と保守性を向上

### 💰 X APIコスト管理機能の改善

#### エンドポイント別コスト表示
- **管理画面でエンドポイント別のコストを表示**
  - どのエンドポイントがコストを消費しているかを可視化
  - コストバーで視覚的に表示

#### 日次レポート機能
- **毎日のAPI使用量とコストをメール通知**
  - 今月の累計使用量とコスト
  - エンドポイント別使用量トップ5
  - Manus Notification Service（Forge）経由で通知
  - Webhook経由でも通知可能

#### キャッシュ最適化
- **フォロー状態のキャッシュ期間を24時間から48時間に延長**
  - API呼び出し回数を約50%削減
  - 環境変数`FOLLOW_STATUS_CACHE_TTL_HOURS`で設定可能（デフォルト: 48時間）

## 技術的な改善

### コードの統一性
- 検索入力がSearchInputで統一
- Checkboxが統一コンポーネントで統一
- エラーフォールバックがRetryButtonで統一
- ローディング表示がSkeletonで統一

### 保守性の向上
- コード量の削減（SearchBar: 約70%削減）
- 機能改善が一箇所で反映される設計
- 型安全性の向上

### アクセシビリティの向上
- 統一Checkboxのアクセシビリティ機能を利用
- スクリーンリーダー対応の一貫性

## リリースノートの追加方法

本番環境で以下のコマンドを実行してリリースノートをデータベースに追加してください：

```bash
npx tsx scripts/add-release-note.ts
```

または、管理画面から手動で追加することもできます。

## 次のステップ

1. デプロイの確認（GitHub Actionsの完了を待つ）
2. リリースノートの追加（上記コマンドを実行）
3. 動作確認（検索機能、チェックリスト機能など）
