# Gitで開発する基本作法

**最終更新**: 2026-02-04  
**対象者**: 開発者全員

このドキュメントは、Gitを使った開発の基本ワークフローを説明します。

---

## 手順一覧（クイックリファレンス）

1. **フォルダ（ディレクトリ）を作る**
2. **その場所をターミナルで開く**  
   - PowerShell または Git Bash: `cd パス名`  
   - または Cursor / VSCode / Windsurf などのエディタのターミナルで開く
3. ターミナルで **`git init`**
4. ターミナルで **`git add .`**（`.` は「全てのファイル」という意味）
5. ターミナルで **`git commit -m '初期コミット'`**
6. **Cursor / Claude Code / Windsurf などの CLI（AIアシスタント）**に、以下を順に入力する：
   - **6-1**: 「WEBアプリの要件定義をしたいです。docsフォルダ内にREQUIREMENTS.mdで保存します。まだ作業はしないでください。これから作りたいモノを言うので、不明瞭なところがあれば質問してください。」
   - **6-2**: 作りたいモノを言う。質問に答える。
   - **6-3**: 自分で理解できるものができたら、「ファイルに保存してください」と指示する。
   - **6-4**: 「REQUIREMENTS.mdを元に、TDD駆動開発用の、設計書・タスク・テストケースを作ってdocsフォルダに保存してください。」
   - **6-5**: 作業履歴（PROGRESS.md）を記録したら、**`git commit`** する。
   - **6-6**: 「TODOに従ってTDD実装してください。テストに通らない場合は次に進まずに、確実な動作を確認してから次に進んでください。1つの作業を終えるたびに、作業内容の要約をコメントとしてcommitしてください。その際は作業履歴をPROGRESS.mdにつけて、次に作業を再開するときにスムーズにできるように準備しておいてください。」

---

## 初期セットアップ（手順 1〜5 の詳細）

### 1. フォルダ（ディレクトリ）を作る

プロジェクト用のフォルダを作成します。

### 2. その場所をターミナルで開く

以下のいずれかの方法でターミナルを開きます：

- **PowerShell**: `cd パス名`
- **Git Bash**: `cd パス名`
- **Cursor / VSCode / Windsurf**: エディタの統合ターミナルを使用

### 3. Gitリポジトリを初期化

```bash
git init
```

### 4. ファイルをステージング

```bash
git add .
```

**注意**: `.` は「全てのファイル」という意味です。

### 5. 初期コミット

```bash
git commit -m '初期コミット'
```

---

## AIアシスタント（Cursor / Claude Code / Windsurf）を使った開発フロー（手順 6 の詳細）

### Step 6-1: 要件定義の準備

AIアシスタント（Cursor、Claude Code、Windsurf などの CLI）に、そのまま以下を入力します：

```
WEBアプリの要件定義をしたいです。docsフォルダ内にREQUIREMENTS.mdで保存します。まだ作業はしないでください。これから作りたいモノを言うので、不明瞭なところがあれば質問してください。
```

### Step 6-2: 要件の説明

作りたいモノを説明します。AIが質問してきたら、それに答えます。

### Step 6-3: 要件定義の保存

自分で理解できる内容がまとまったら、ファイルに保存するように指示します：

```
理解できた内容をREQUIREMENTS.mdに保存してください。
```

### Step 6-4: 設計書・タスク・テストケースの作成

AIアシスタントに以下の指示を入力します：

```
REQUIREMENTS.mdを元に、TDD駆動開発用の、設計書・タスク・テストケースを作ってdocsフォルダに保存してください。
```

### Step 6-5: 作業履歴の記録とコミット

作業履歴を **PROGRESS.md** に記録したら、git commit します：

```bash
git add docs/PROGRESS.md
git commit -m 'docs: 作業履歴を記録'
```

### Step 6-6: TDD実装

AIアシスタントに以下の指示を入力します：

```
TODOに従ってTDD実装してください。テストに通らない場合は次に進まずに、確実な動作を確認してから次に進んでください。1つの作業を終えるたびに、作業内容の要約をコメントとしてcommitしてください。その際は作業履歴をPROGRESS.mdにつけて、次に作業を再開するときにスムーズにできるように準備しておいてください。
```

**ポイント**:
- テストが通るまで次に進まない
- 1作業ごとに commit（要約をメッセージに含める）
- 毎回 PROGRESS.md を更新し、再開時に続きから取りかかれるようにする

---

## Gate 1運用ルール（必須）

「壊れやすい変更」を必ず止めるため、以下を**必須運用**とする。

- **1変更 = 1commit = 1バージョン**を厳守
- `shared/version.ts` を更新し、**バージョン番号を必ず上げる**
- `scripts/diff-check.sh` を実行して結果を記録
- PRテンプレートのGate 1チェックリストを**必ず埋める**

**コミット例**:

```bash
git commit -m 'v6.181: UI層: ホームのボタン文言を整理'
```

---

## コミットのベストプラクティス

### コミットメッセージの形式

```
<type>: <subject>

<body>
```

**Typeの種類:**

- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの動作に影響しない変更（フォーマット、セミコロンなど）
- `refactor`: リファクタリング
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更

**例:**

```bash
git commit -m 'feat: ユーザー認証機能を追加'
git commit -m 'fix: ログイン時のエラーハンドリングを修正'
git commit -m 'docs: 開発ワークフローを追加'
```

### 1つの作業ごとにコミット

- **良い例**: 1つの機能や修正ごとにコミット
- **悪い例**: 1日の作業を1つのコミットにまとめる

### 作業履歴の記録

`PROGRESS.md`に以下を記録します：

- 完了した作業
- 現在進行中の作業
- 次の作業予定
- 発生した問題と解決方法

---

## 日常的な開発フロー

### 1. 最新のコードを取得

```bash
git pull origin main
```

### 2. ブランチを作成（機能開発の場合）

```bash
git checkout -b feature/new-feature
```

### 3. コードを編集

エディタでコードを編集します。

### 4. 変更を確認

```bash
git status
git diff
```

### 5. 変更をステージング

```bash
git add .
# または特定のファイルのみ
git add path/to/file.ts
```

### 6. コミット

```bash
git commit -m 'feat: 機能の説明'
```

### 7. リモートにプッシュ

```bash
git push origin feature/new-feature
```

### 8. プルリクエストを作成

GitHub上でプルリクエストを作成し、レビューを依頼します。

---

## トラブルシューティング

### 変更を破棄したい

```bash
# ステージング前の変更を破棄
git checkout .

# 特定のファイルのみ
git checkout path/to/file.ts
```

### コミットを取り消したい

```bash
# 直前のコミットを取り消す（変更は保持）
git reset --soft HEAD~1

# 直前のコミットを取り消す（変更も破棄）
git reset --hard HEAD~1
```

### コンフリクトを解決

```bash
# コンフリクトが発生したファイルを編集
# コンフリクトマーカー（<<<<<<<, =======, >>>>>>>）を削除して解決

# 解決後、ステージング
git add path/to/file.ts

# コミット
git commit -m 'fix: コンフリクトを解決'
```

---

## 関連ドキュメント

- [docs/LOCAL_DEVELOPMENT_WORKFLOW.md](./LOCAL_DEVELOPMENT_WORKFLOW.md) - ローカル開発ワークフロー
- [docs/DATA_DESIGN_PRINCIPLES.md](./DATA_DESIGN_PRINCIPLES.md) - データ構造から考える開発原則
- [docs/TROUBLESHOOTING.md](./TROUBLESHOOTING.md) - トラブルシューティング

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2026-02-02 | v1.0 | 初版作成 - Git開発の基本作法を確立 |
| 2026-02-04 | v1.1 | 手順一覧（1〜6, 6-1〜6-6）を冒頭に追加。Cursor/Claude Code/Windsurf を明記。TDD・PROGRESS.md の運用を整理 |
