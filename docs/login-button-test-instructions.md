# 本番環境でのログインボタンテスト手順

## 目的

ホーム画面に追加したログインボタンが正しく動作し、カスタムログイン画面（モーダル）が表示されることを確認します。

---

## 前提条件

- GitHub Actionsでデプロイが完了していること
- 本番環境のURL: https://doin-challenge.com

---

## 手順

### ステップ1: 本番環境を開く

1. ブラウザで https://doin-challenge.com を開く
2. **シークレットモード（プライベートブラウジング）**で開くことを推奨（キャッシュの影響を避けるため）

### ステップ2: ログアウト状態を確認

1. ホーム画面が表示される
2. 右上のヘッダーに「**Xでログイン**」ボタンが表示されていることを確認

### ステップ3: ログインボタンをクリック

1. 「**Xでログイン**」ボタンをクリック
2. カスタムログイン画面（モーダル）が表示されることを確認

### ステップ4: カスタムログイン画面の内容を確認

以下の要素が表示されていることを確認します：

| 要素 | 期待値 |
|------|--------|
| タイトル | 「Xでログインしますか？」 |
| 説明 | 「このあとXの公式画面に移動します。戻ってきたらログイン完了です。」 |
| りんくの吹き出し | 「ログインすると、参加履歴やお気に入りが使えるよ！」 |
| ボタン | 「Xでログイン」「やめておく」 |

### ステップ5: ログインフローをテスト

1. 「**Xでログイン**」ボタンをクリック
2. Twitter公式ログイン画面に遷移することを確認
3. Twitterでログイン
4. doin-challenge.comに戻ってくることを確認
5. ログイン後、ヘッダーに「**ログアウト**」ボタンが表示されることを確認

---

## 期待される結果

### ✅ 正常な場合

- ホーム画面に「Xでログイン」ボタンが表示される
- ボタンをクリックすると、カスタムログイン画面（モーダル）が表示される
- モーダルの内容が正しい
- ログインフローが正常に動作する

### ❌ 異常な場合

以下のいずれかの問題が発生した場合：

1. **「Xでログイン」ボタンが表示されない**
   - デプロイが完了していない可能性があります
   - GitHub Actionsのワークフローを確認してください

2. **カスタムログイン画面が表示されない**
   - コンポーネントの実装に問題がある可能性があります
   - ブラウザのコンソールでエラーを確認してください

3. **Twitter公式ログイン画面に直接遷移する**
   - カスタムログイン画面の実装が正しくありません
   - `app/(tabs)/index.tsx`と`components/organisms/app-header.tsx`を確認してください

---

## トラブルシューティング

### 問題1: 「Xでログイン」ボタンが表示されない

**原因**: デプロイが完了していない、またはキャッシュが残っている

**解決方法**:
1. ブラウザをリロード（Ctrl+F5 または Cmd+Shift+R）
2. シークレットモードで開く
3. GitHub Actionsのワークフローを確認

### 問題2: カスタムログイン画面が表示されない

**原因**: コンポーネントの実装に問題がある

**解決方法**:
1. ブラウザのコンソールでエラーを確認
2. `components/organisms/app-header.tsx`の実装を確認
3. `hooks/use-auth-ux-machine.ts`の実装を確認

### 問題3: Twitter公式ログイン画面に直接遷移する

**原因**: カスタムログイン画面の実装が正しくない

**解決方法**:
1. `app/(tabs)/index.tsx`で`showLoginButton={true}`が設定されているか確認
2. `components/organisms/app-header.tsx`で認証UXモーダルが正しく実装されているか確認

---

## 確認後の対応

### ✅ 正常な場合

次のステップ（docs/status.mdの更新）に進んでください。

### ❌ 異常な場合

上記のトラブルシューティングを参照し、問題を解決してください。
