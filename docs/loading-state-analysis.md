# ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¨­è¨ˆã®å…¨ç”»é¢åˆ†æ

## æ¦‚è¦

ã‚¢ãƒ—ãƒªå†…ã®å…¨ç”»é¢ã‚’èª¿æŸ»ã—ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¨­è¨ˆï¼ˆ`isInitialLoading`, `isRefreshing`, `isLoadingMore`ï¼‰ã®é©ç”¨çŠ¶æ³ã‚’åˆ†æã—ã¾ã—ãŸã€‚

## ã‚µãƒãƒªãƒ¼

**å®Œäº†æ¸ˆã¿ï¼š10ç”»é¢**
- ãƒ›ãƒ¼ãƒ ã€ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆPhase 1 - v6.59-v6.60ï¼‰
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼ˆPhase 2 - v6.62ï¼‰
- é€šçŸ¥ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§ã€å®Ÿç¸¾ä¸€è¦§ã€æ‹›å¾…è©³ç´°ï¼ˆPhase 3 - v6.63ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆç®¡ç†ç”»é¢ - v6.64ï¼‰

**ã‚¹ã‚­ãƒƒãƒ—æ¸ˆã¿ï¼š39ç”»é¢**
- ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã—ï¼ˆãƒ•ã‚©ãƒ¼ãƒ ã€è¨­å®šã€é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼‰
- è»½å¾®ãªãƒ‡ãƒ¼ã‚¿å–å¾—ã®ã¿ï¼ˆã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ã€ãƒ˜ãƒ«ãƒ—ï¼‰
- ç®¡ç†ç”»é¢ï¼ˆä½¿ç”¨é »åº¦ãŒä½ã„ï¼‰

## ç”»é¢åˆ†é¡

### âœ… æ—¢ã«æœ€é©åŒ–æ¸ˆã¿ï¼ˆv6.59-v6.64ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ | å‚™è€ƒ |
|------|---------|----------------|------|
| **ãƒ›ãƒ¼ãƒ ** | `app/(tabs)/index.tsx` | `isInitialLoading`, `isRefreshing`, `isLoadingMore` | å®Œå…¨å®Ÿè£… |
| **ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°** | `app/event/[id].tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **ãƒ©ãƒ³ã‚­ãƒ³ã‚°** | `app/rankings.tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«** | `app/profile/[userId].tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** | `app/dashboard/[id].tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **é€šçŸ¥** | `app/notifications.tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§** | `app/messages/index.tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **å®Ÿç¸¾ä¸€è¦§** | `app/achievements.tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **æ‹›å¾…è©³ç´°** | `app/invites/[id].tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†** | `app/admin/users.tsx` | `isInitialLoading`, `isRefreshing` | å®Œå…¨å®Ÿè£… |
| **ãƒã‚¤ãƒšãƒ¼ã‚¸** | `app/(tabs)/mypage.tsx` | èªè¨¼çŠ¶æ…‹ã®ã¿ | æ—¢ã«æœ€é© |

### ğŸ“ ãƒ•ã‚©ãƒ¼ãƒ ç”»é¢ï¼ˆå„ªå…ˆåº¦: ä½ - ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã—ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|------|---------|------|
| **ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ** | `app/create.tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã—ï¼ˆãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®ã¿ï¼‰ |
| **ã‚¤ãƒ™ãƒ³ãƒˆç·¨é›†** | `app/edit/[id].tsx` | åˆæœŸå€¤å–å¾—ã¯è»½å¾® |
| **å‚åŠ ãƒ•ã‚©ãƒ¼ãƒ ** | `app/participate/[id].tsx` | åˆæœŸå€¤å–å¾—ã¯è»½å¾® |

### ğŸ”— ãƒªãƒ³ã‚¯ãƒ»æ‹›å¾…ç”»é¢ï¼ˆå„ªå…ˆåº¦: ä½ - ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã—ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|------|---------|------|
| **ãƒªãƒ³ã‚¯ç®¡ç†** | `app/links/index.tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |
| **ãƒªãƒ³ã‚¯ä½œæˆ** | `app/links/create.tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |
| **æ‹›å¾…ç®¡ç†** | `app/invites/index.tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |

### ğŸ’¬ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»é€šçŸ¥ç”»é¢ï¼ˆå„ªå…ˆåº¦: ä½ - ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã—ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|------|---------|------|
| **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è©³ç´°** | `app/messages/[id].tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |
| **é€šçŸ¥è¨­å®š** | `app/notifications/settings.tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |
| **é€šçŸ¥è©³ç´°** | `app/notifications/[id].tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |

### ğŸ‘¥ ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ç”»é¢ï¼ˆå„ªå…ˆåº¦: ä½ - ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã—ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|------|---------|------|
| **ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼** | `app/followers/[userId].tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |
| **ãƒ•ã‚©ãƒ­ãƒ¼ä¸­** | `app/following/[userId].tsx` | ãƒ‡ãƒ¼ã‚¿å–å¾—ãªã— |

### ğŸ› ï¸ ç®¡ç†ç”»é¢ï¼ˆå„ªå…ˆåº¦: æœ€ä½ - ä½¿ç”¨é »åº¦ãŒä½ã„ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç¾çŠ¶ | å‚™è€ƒ |
|------|---------|------|------|
| **ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** | `app/admin/index.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **APIä½¿ç”¨çŠ¶æ³** | `app/admin/api-usage.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§** | `app/admin/data-integrity.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°** | `app/admin/errors.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±** | `app/admin/system.tsx` | æœªå®Ÿè£… | è»½å¾®ãªãƒ‡ãƒ¼ã‚¿å–å¾—ã®ã¿ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†** | `app/admin/users.tsx` | âœ… å®Œäº† | `isInitialLoading`, `isRefreshing` |
| **ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†** | `app/admin/challenges.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **å‚åŠ ç®¡ç†** | `app/admin/participations.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **ã‚«ãƒ†ã‚´ãƒªç®¡ç†** | `app/admin/categories.tsx` | æœªå®Ÿè£… | ä½¿ç”¨é »åº¦ãŒä½ã„ |

### ğŸ”§ ãã®ä»–ï¼ˆå„ªå…ˆåº¦: æœ€ä½ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|------|---------|------|
| **ãƒ˜ãƒ«ãƒ—** | `app/help.tsx` | é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿ |
| **ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ** | `app/release-notes.tsx` | é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã¿ |
| **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ** | `app/templates/index.tsx` | ä½¿ç”¨é »åº¦ãŒä½ã„ |
| **ãƒ‡ãƒ¢** | `app/demo/index.tsx` | ãƒ‡ãƒ¢ç”¨ç”»é¢ |
| **ãƒ†ãƒ¼ãƒãƒ©ãƒœ** | `app/dev/theme-lab.tsx` | é–‹ç™ºç”¨ç”»é¢ |

### âš™ï¸ ã‚·ã‚¹ãƒ†ãƒ ç”»é¢ï¼ˆå¯¾è±¡å¤–ï¼‰

| ç”»é¢ | ãƒ•ã‚¡ã‚¤ãƒ« | ç†ç”± |
|------|---------|------|
| **OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯** | `app/oauth/callback.tsx` | è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ |
| **Twitter ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯** | `app/oauth/twitter-callback.tsx` | è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ |
| **ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ** | `app/logout.tsx` | è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ |
| **404** | `app/+not-found.tsx` | ã‚¨ãƒ©ãƒ¼ç”»é¢ |

## å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// 1. ã‚¯ã‚¨ãƒªã«isFetchingã‚’è¿½åŠ 
const { data, isLoading, isFetching } = trpc.xxx.useQuery(...);

// 2. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è¨ˆç®—
const hasData = !!data;
const isInitialLoading = isLoading && !hasData;
const isRefreshing = isFetching && hasData;

// 3. ã‚¹ã‚±ãƒ«ãƒˆãƒ³è¡¨ç¤º
if (isInitialLoading) {
  return <XxxSkeleton />;
}

// 4. æ›´æ–°ä¸­ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿
{isRefreshing && <RefreshingIndicator />}
```

### ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è©³ç´°ç­‰ï¼‰

```typescript
const { 
  data, 
  isLoading, 
  isFetching, 
  isFetchingNextPage 
} = trpc.xxx.useInfiniteQuery(...);

const isInitialLoading = isLoading && !hasData;
const isRefreshing = isFetching && hasData && !isFetchingNextPage;
const isLoadingMore = isFetchingNextPage;
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

| çŠ¶æ…‹ | ç›®æ¨™æ™‚é–“ | èª¬æ˜ |
|------|---------|------|
| **åˆå›ãƒ­ãƒ¼ãƒ‰** | < 1ç§’ | ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã®ãƒ‡ãƒ¼ã‚¿å–å¾— |
| **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚ã‚Š** | < 100ms | React Queryã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ã®è¡¨ç¤º |
| **è£æ›´æ–°** | éåŒæœŸ | å°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã§é€šçŸ¥ã€ã‚¹ã‚±ãƒ«ãƒˆãƒ³ãªã— |

## å®Œäº†ã—ãŸæ”¹å–„ï¼ˆv6.59-v6.64ï¼‰

### å…¨ç”»é¢ã¸ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¨­è¨ˆã®é©ç”¨
**æ”¹å–„ã•ã‚ŒãŸç”»é¢ï¼ˆ10ç”»é¢ï¼‰:**
1. **ãƒ›ãƒ¼ãƒ ç”»é¢** (v6.59)
2. **ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ç”»é¢** (v6.60)
3. **ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”»é¢** (v6.60)
4. **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢** (v6.62)
5. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢** (v6.62)
6. **é€šçŸ¥ç”»é¢** (v6.63)
7. **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§ç”»é¢** (v6.63)
8. **å®Ÿç¸¾ä¸€è¦§ç”»é¢** (v6.63)
9. **æ‹›å¾…è©³ç´°ç”»é¢** (v6.63)
10. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ç”»é¢** (v6.64)

**çµ±ä¸€ã•ã‚ŒãŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹:**
- `isInitialLoading`: åˆå›ãƒ­ãƒ¼ãƒ‰ä¸­ï¼ˆãƒ‡ãƒ¼ã‚¿ãªã—ï¼‰
- `isRefreshing`: ãƒ‡ãƒ¼ã‚¿ä¿æŒã—ãŸã¾ã¾è£ã§æ›´æ–°ä¸­
- `isLoadingMore`: ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¸­ï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ã®ã¿ï¼‰
- `hasData`: ãƒ‡ãƒ¼ã‚¿ã®æœ‰ç„¡ã‚’æ˜ç¤º

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- React Queryè¨­å®š: staleTime 30åˆ†ã€gcTime 2æ™‚é–“
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰ã®å³åº§è¡¨ç¤º
- åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã¿ã‚¹ã‚±ãƒ«ãƒˆãƒ³è¡¨ç¤º
- ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–°æ™‚ã¯å°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿

### performance-monitorå°å…¥
- ä¸»è¦3ç”»é¢ï¼ˆãƒ›ãƒ¼ãƒ ã€ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ã€ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼‰ã«è‡ªå‹•è¨ˆæ¸¬æ©Ÿèƒ½ã‚’å°å…¥
- é–‹ç™ºç’°å¢ƒã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ™‚é–“ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã«å‡ºåŠ›
- 1ç§’ä»¥ä¸Šã‹ã‹ã£ãŸå ´åˆã¯è­¦å‘Š
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚‹ã®ã«100msä»¥ä¸Šã‹ã‹ã£ãŸå ´åˆã‚‚è­¦å‘Š

### æŠ€è¡“çš„æ”¹å–„
- å¾Œæ–¹äº’æ›æ€§ã‚’ç¶­æŒï¼ˆ`@deprecated`ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãï¼‰
- å…¨ç”»é¢ã§çµ±ä¸€ã•ã‚ŒãŸãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ç®¡ç†
- ãƒ†ã‚¹ãƒˆã«ã‚ˆã‚‹å¥‘ç´„ã®å›ºå®šï¼ˆv6.59ï¼‰
- è©³ç´°ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å‘ä¸Š
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚‹å ´åˆã¯å³åº§ã«ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- âœ… åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã¿ã‚¹ã‚±ãƒ«ãƒˆãƒ³è¡¨ç¤º
- âœ… ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰æ›´æ–°æ™‚ã¯å°ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã§é€šçŸ¥
- âœ… ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä¸­ã¯å°‚ç”¨ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ï¼‰
- âœ… å…¨ç”»é¢ã§çµ±ä¸€ã•ã‚ŒãŸä½“é¨“

## å‚è€ƒè³‡æ–™

- [performance-monitoring.md](./performance-monitoring.md) - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨ˆæ¸¬ã®è©³ç´°
- [useHomeData.ts](../features/home/hooks/useHomeData.ts) - æ¨™æº–å®Ÿè£…ã®å‚è€ƒä¾‹
- [useEventDetail.ts](../features/event/hooks/useEventDetail.ts) - è©³ç´°ç”»é¢ã®å‚è€ƒä¾‹
