# 統合チェックリスト (Integrated Checklist)

**最終更新**: 2026-01-30
**バージョン**: v6.168

このドキュメントは、すべてのチェック項目を統合したものです。プロジェクトの完成度を一目で確認できます。

---

## 認証機能

- [x] ホーム画面で「Xでログイン」ボタンが表示される
- [x] ボタンをクリックすると**オリジナルのログイン画面（カスタム認証ボタン）**が表示される
- [x] Twitter公式ログイン画面に**直接飛ばない**
- [x] ログイン完了後、マイページにリダイレクトされる
- [x] ログイン後、ユーザー名とアイコンが表示される
- [x] マイページで「ログアウト」ボタンが表示される
- [x] ボタンをクリックするとログアウトできる
- [x] ログアウト後、ホーム画面に戻る

---

## 画像表示

- [x] 画像の読み込みが遅い場合、スケルトンローダーが表示される
- [x] 画像が正しいアスペクト比で表示される
- [x] マイページでユーザーのプロフィール画像が表示される
- [x] 参加者一覧でプロフィール画像が表示される
- [ ] ホーム画面のチャレンジカードにサムネイル画像が表示される（**データベース確認が必要**）
- [ ] サムネイルが**抜けていない**（空白になっていない）（**データベース確認が必要**）

---

## お気に入り機能

- [x] ホーム画面のチャレンジカードに⭐アイコンが表示される
- [x] ⭐アイコンをタップすると、お気に入りに登録される
- [x] 登録後、アイコンが金色に変わる
- [x] 金色の⭐アイコンをタップすると、お気に入りから削除される
- [x] 削除後、アイコンが元の色に戻る
- [x] マイページに「気になるイベントリスト」セクションが表示される
- [x] お気に入り登録したチャレンジが一覧表示される
- [x] お気に入りが0件の場合、セクションが非表示になる

---

## ホーム画面

- [x] チャレンジカードが正しくグリッド表示される
- [x] フィルターボタン（すべて/ソロ/グループ）が表示される
- [x] 検索バーが表示される
- [x] 「すべて」タブをタップすると、全チャレンジが表示される
- [x] 「ソロ」タブをタップすると、ソロチャレンジのみ表示される
- [x] 「グループ」タブをタップすると、グループチャレンジのみ表示される
- [x] 「お気に入り」タブをタップすると、お気に入りのみ表示される
- [x] 検索バーにテキストを入力すると、リアルタイムで絞り込まれる
- [x] 検索結果が0件の場合、「該当するチャレンジがありません」と表示される

---

## マイページ

- [x] プロフィールカードが表示される
- [x] バッジセクションが表示される
- [x] 「気になるイベントリスト」セクションが表示される（お気に入りがある場合）
- [x] 「参加チャレンジ」セクションが表示される
- [x] 「主催チャレンジ」セクションが表示される
- [x] 各セクションのチャレンジカードをタップすると、詳細画面に遷移する
- [x] ログアウトボタンが動作する

---

## UI/UX

- [x] PC表示で正しくレイアウトされる
- [x] スマホ表示で正しくレイアウトされる
- [x] タブレット表示で正しくレイアウトされる
- [x] ボタンのホバー効果が動作する（PC）
- [x] ボタンのタップフィードバックが動作する（スマホ）
- [x] ローディングアニメーションが表示される

---

## Gate 1（壊れない／戻せる）

### diff-check（危険ファイル検知）

- [x] `server/_core/oauth.ts`に変更がある場合、追加のチェックを実施
- [x] `server/_core/auth*`に変更がある場合、追加のチェックを実施
- [x] `vercel.json`に変更がある場合、追加のチェックを実施
- [x] `railway.json`に変更がある場合、追加のチェックを実施
- [x] `.env*`に変更がある場合、追加のチェックを実施
- [x] `app.config.ts`に変更がある場合、追加のチェックを実施
- [x] `health`関連ファイルに変更がある場合、追加のチェックを実施
- [x] `build-info`関連ファイルに変更がある場合、追加のチェックを実施

### デプロイ後検証

- [x] `/api/health`が`ok: true`を返すこと
- [x] `commitSha`が期待値（`GITHUB_SHA`）と一致すること
- [x] ログイン開始URLが想定ドメインであること

### 監視ツール

- [x] UptimeRobotで`/api/health`を監視（5分間隔）
- [x] Sentry導入（通知は最小3種類だけ）
  - [x] ログイン失敗の急増（OAuth callback error）
  - [x] 5xxの急増
  - [x] "unknown version"検知（healthがunknownを返したら例外を投げる）

---

## 視認性の問題

- [x] ホーム画面のテキストとボタンのコントラスト比を確認（WCAG 2.1 AA基準）
- [x] イベント詳細画面のテキストとボタンのコントラスト比を確認（WCAG 2.1 AA基準）
- [x] イベント詳細画面以外の画面でも視認性の問題がないか確認
- [ ] 実機で視認性を確認（**ユーザーに確認を依頼**）

---

## 環境変数の設定

- [x] Sentryの環境変数`SENTRY_DSN`を設定
- [x] Sentryの環境変数`NEXT_PUBLIC_SENTRY_DSN`を設定
- [x] Vercelで再デプロイ
- [x] Sentryの動作確認（テストエラーを送信）

---

## 外部サービスの設定

- [x] UptimeRobotアカウントを作成
- [x] UptimeRobotでモニターを作成（`/api/health`を5分間隔で監視）
- [x] UptimeRobotでアラート設定（メール通知）
- [x] UptimeRobotの動作確認（ステータスが「Up」）

---

## データベースの確認

- [ ] データベースでhostProfileImageカラムを確認（**ユーザーに確認を依頼**）
- [ ] hostProfileImageカラムに値が入っていない場合、手動またはSQLで更新
- [ ] 本番環境でサムネイル画像が表示されることを確認

---

## 完了率

**全体**: 51/57 (89%)

| カテゴリ | 完了 | 未完了 | 完了率 |
|---------|------|--------|--------|
| 認証機能 | 8/8 | 0/8 | 100% |
| 画像表示 | 4/6 | 2/6 | 67% |
| お気に入り機能 | 8/8 | 0/8 | 100% |
| ホーム画面 | 9/9 | 0/9 | 100% |
| マイページ | 7/7 | 0/7 | 100% |
| UI/UX | 6/6 | 0/6 | 100% |
| Gate 1 | 11/11 | 0/11 | 100% |
| 視認性の問題 | 3/4 | 1/4 | 75% |
| 環境変数の設定 | 4/4 | 0/4 | 100% |
| 外部サービスの設定 | 4/4 | 0/4 | 100% |
| データベースの確認 | 0/3 | 3/3 | 0% |

---

## 次のアクション

1. **データベースでhostProfileImageを確認**: Manusの管理画面で「Database」→「Challenges」を確認
2. **本番環境でサムネイル画像が表示されることを確認**: デプロイ後、ホーム画面のチャレンジカード（4番以降）にサムネイル画像が表示されることを確認
3. **実機で視認性を確認**: スマホで本番環境にアクセスし、視認性に問題がないか確認
