__d(function(g,r,i,a,m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return b}});var t=e(r(_d[0])),n=e(r(_d[1])),l=e(r(_d[2])),o=e(r(_d[3])),s=e(r(_d[4])),d=r(_d[5]),c=r(_d[6]),u=r(_d[7]),f=r(_d[8]),h=r(_d[9]),j=r(_d[10]),x=e(r(_d[11]));!(function(e){if(e&&e.__esModule)return e;var t={};e&&Object.keys(e).forEach(function(n){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})}),t.default=e})(r(_d[12]));r(_d[13]);var y=r(_d[14]),p=r(_d[15]);function b(){const e=(0,j.useColors)(),b=(0,d.useRouter)(),{user:C,isAuthenticated:A}=(0,h.useAuth)(),[_,z]=(0,c.useState)(null),[S,k]=(0,c.useState)(!1),{data:w,isLoading:R,refetch:E}=f.trpc.notifications.list.useQuery(void 0,{enabled:A}),D=f.trpc.notifications.markAsRead.useMutation({onSuccess:()=>E()}),v=f.trpc.notifications.markAllAsRead.useMutation({onSuccess:()=>E()});(0,c.useEffect)(()=>{F()},[]);const F=async()=>{},I=w?.filter(e=>!e.isRead).length||0,P=e=>{switch(e){case"goal_reached":return"emoji-events";case"milestone_25":case"milestone_50":case"milestone_75":return"flag";case"new_participant":return"person-add";default:return"notifications"}},B=e=>{switch(e){case"goal_reached":return"#FFD700";case"milestone_25":return"#4ADE80";case"milestone_50":return"#60A5FA";case"milestone_75":return"#A78BFA";case"new_participant":return"#EC4899";default:return"#9CA3AF"}};return A?(0,p.jsx)(u.ScreenContainer,{edges:["top","left","right"],containerClassName:"bg-background",children:(0,p.jsxs)(o.default,{style:{flex:1,backgroundColor:e.background},children:[(0,p.jsx)(y.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,p.jsxs)(l.default,{onPress:()=>b.back(),style:{flexDirection:"row",alignItems:"center"},children:[(0,p.jsx)(x.default,{name:"arrow-back",size:24,color:e.foreground}),(0,p.jsx)(t.default,{style:{color:e.foreground,marginLeft:8},children:"\u623b\u308b"})]})}),(0,p.jsx)(n.default,{style:{paddingHorizontal:16,paddingBottom:8},children:(0,p.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,p.jsx)(t.default,{style:{color:e.foreground,fontSize:20,fontWeight:"bold"},children:"\u901a\u77e5"}),I>0&&(0,p.jsx)(n.default,{style:{backgroundColor:"#EC4899",borderRadius:12,paddingHorizontal:8,paddingVertical:2,marginLeft:8},children:(0,p.jsx)(t.default,{style:{color:e.foreground,fontSize:12,fontWeight:"bold"},children:I})}),(0,p.jsx)(n.default,{style:{flex:1}}),I>0&&(0,p.jsx)(l.default,{onPress:()=>v.mutate(),style:{backgroundColor:"#1A1D21",borderRadius:8,paddingHorizontal:12,paddingVertical:8},children:(0,p.jsx)(t.default,{style:{color:"#EC4899",fontSize:12},children:"\u3059\u3079\u3066\u65e2\u8aad"})})]})}),!1,(0,p.jsx)(n.default,{style:{paddingHorizontal:16},children:R?(0,p.jsx)(n.default,{style:{alignItems:"center",paddingVertical:40},children:(0,p.jsx)(s.default,{size:"large",color:"#EC4899"})}):w&&w.length>0?w.map(o=>(0,p.jsx)(l.default,{onPress:()=>{o.isRead||D.mutate({id:o.id}),b.push(`/event/${o.challengeId}`)},style:{backgroundColor:o.isRead?"#1A1D21":"#1E2530",borderRadius:12,padding:16,marginBottom:12,borderWidth:1,borderColor:o.isRead?"#2D3139":"#EC4899"},children:(0,p.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"flex-start"},children:[(0,p.jsx)(n.default,{style:{width:44,height:44,borderRadius:22,backgroundColor:B(o.type)+"20",alignItems:"center",justifyContent:"center"},children:(0,p.jsx)(x.default,{name:P(o.type),size:24,color:B(o.type)})}),(0,p.jsxs)(n.default,{style:{flex:1,marginLeft:12},children:[(0,p.jsx)(t.default,{style:{color:e.foreground,fontSize:14,fontWeight:"bold"},children:o.title}),(0,p.jsx)(t.default,{style:{color:"#9CA3AF",fontSize:13,marginTop:4,lineHeight:18},children:o.body}),(0,p.jsx)(t.default,{style:{color:"#6B7280",fontSize:11,marginTop:8},children:new Date(o.sentAt).toLocaleString("ja-JP")})]}),!o.isRead&&(0,p.jsx)(n.default,{style:{width:8,height:8,borderRadius:4,backgroundColor:"#EC4899"}})]})},o.id)):(0,p.jsxs)(n.default,{style:{alignItems:"center",paddingVertical:40},children:[(0,p.jsx)(x.default,{name:"notifications-none",size:64,color:"#6B7280"}),(0,p.jsx)(t.default,{style:{color:"#9CA3AF",fontSize:16,marginTop:16},children:"\u901a\u77e5\u306f\u3042\u308a\u307e\u305b\u3093"})]})}),(0,p.jsx)(n.default,{style:{height:100}})]})}):(0,p.jsx)(u.ScreenContainer,{edges:["top","left","right"],containerClassName:"bg-background",children:(0,p.jsxs)(n.default,{style:{flex:1,alignItems:"center",justifyContent:"center",padding:24},children:[(0,p.jsx)(x.default,{name:"notifications-off",size:64,color:"#6B7280"}),(0,p.jsx)(t.default,{style:{color:"#9CA3AF",fontSize:16,marginTop:16,textAlign:"center"},children:"\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308b\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3059"})]})})}},1578,[188,109,229,133,227,473,3,1083,1087,1185,728,712,1480,104,1196,2]);