__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return S}});var t=r(d[0]),o=e(r(d[1])),l=e(r(d[2])),n=e(r(d[3])),s=e(r(d[4])),c=e(r(d[5])),u=e(r(d[6])),f=r(d[7]),h=r(d[8]),y=r(d[9]),x=r(d[10]),b=r(d[11]),p=r(d[12]),j=e(r(d[13])),C=r(d[14]),I=r(d[15]),k=r(d[16]);function S(){const e=(0,t.c)(125),S=(0,p.useColors)(),E=(0,f.useRouter)(),{id:z}=(0,f.useLocalSearchParams)(),B=parseInt(z||"0",10),{user:R,isAuthenticated:W}=(0,b.useAuth)(),[V,w]=(0,h.useState)("all"),[D,P]=(0,h.useState)(""),[v,H]=(0,h.useState)(null);let F;e[0]!==B?(F={id:B},e[0]=B,e[1]=F):F=e[1];const N=B>0;let T;e[2]!==N?(T={enabled:N},e[2]=N,e[3]=T):T=e[3];const{data:L}=x.trpc.events.getById.useQuery(F,T);let M;e[4]!==B?(M={eventId:B},e[4]=B,e[5]=M):M=e[5];const U=B>0;let O;e[6]!==U?(O={enabled:U},e[6]=U,e[7]=O):O=e[7];const{data:Q,refetch:q}=x.trpc.participations.listByEvent.useQuery(M,O);let G;e[8]!==B?(G={challengeId:B},e[8]=B,e[9]=G):G=e[9];const J=B>0;let K;e[10]!==J?(K={enabled:J},e[10]=J,e[11]=K):K=e[11];const{data:X,refetch:Y}=x.trpc.pickedComments.list.useQuery(G,K);let Z;e[12]!==q||e[13]!==Y?(Z={onSuccess:()=>{q(),Y(),H(null),P("")}},e[12]=q,e[13]=Y,e[14]=Z):Z=e[14];const $=x.trpc.pickedComments.pick.useMutation(Z);let ee;e[15]!==q||e[16]!==Y?(ee={onSuccess:()=>{q(),Y()}},e[15]=q,e[16]=Y,e[17]=ee):ee=e[17];const te=x.trpc.pickedComments.unpick.useMutation(ee);let re;e[18]!==Y?(re={onSuccess:()=>{Y()}},e[18]=Y,e[19]=re):re=e[19];const oe=x.trpc.pickedComments.markAsUsed.useMutation(re);if(!W||!(L?.hostUserId===R?.id||"admin"===R?.role)){let t,n,s,c;return e[20]===Symbol.for("react.memo_cache_sentinel")?(t=["top","left","right"],e[20]=t):t=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(n={flex:1,alignItems:"center",justifyContent:"center",padding:24},s=(0,k.jsx)(j.default,{name:"lock",size:64,color:"#6B7280"}),e[21]=n,e[22]=s):(n=e[21],s=e[22]),e[23]===Symbol.for("react.memo_cache_sentinel")?(c=(0,k.jsx)(y.ScreenContainer,{edges:t,containerClassName:"bg-background",children:(0,k.jsxs)(l.default,{style:n,children:[s,(0,k.jsx)(o.default,{style:{color:"#9CA3AF",fontSize:16,marginTop:16,textAlign:"center"},children:"\u3053\u306e\u6a5f\u80fd\u306f\u30c1\u30e3\u30ec\u30f3\u30b8\u306e\u4e3b\u50ac\u8005\u307e\u305f\u306f\u7ba1\u7406\u8005\u306e\u307f\u5229\u7528\u3067\u304d\u307e\u3059"})]})}),e[23]=c):c=e[23],c}let le;e[24]!==X?(le=new Set(X?.map(A)||[]),e[24]=X,e[25]=le):le=e[25];const ne=le;let de,ie,se,ae,ce,ue,fe,ge,he,me,ye,xe,be,pe;if(e[26]!==L?.title||e[27]!==B||e[28]!==S.background||e[29]!==S.foreground||e[30]!==oe||e[31]!==Q||e[32]!==$||e[33]!==D||e[34]!==X||e[35]!==ne||e[36]!==v||e[37]!==E||e[38]!==V||e[39]!==te){const t=Q?.filter(_)||[];let f;e[50]!==B||e[51]!==$||e[52]!==D||e[53]!==v?(f=e=>{v===e?$.mutate({participationId:e,challengeId:B,reason:D||void 0}):(H(e),P(""))},e[50]=B,e[51]=$,e[52]=D,e[53]=v,e[54]=f):f=e[54];const h=f;let x;e[55]!==B||e[56]!==te?(x=e=>{c.default.alert("\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u89e3\u9664","\u3053\u306e\u30b3\u30e1\u30f3\u30c8\u306e\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u89e3\u9664\u3057\u307e\u3059\u304b\uff1f",[{text:"\u30ad\u30e3\u30f3\u30bb\u30eb",style:"cancel"},{text:"\u89e3\u9664",style:"destructive",onPress:()=>te.mutate({participationId:e,challengeId:B})}])},e[55]=B,e[56]=te,e[57]=x):x=e[57];const b=x;let p;e[58]!==B||e[59]!==oe?(p=e=>{oe.mutate({id:e,challengeId:B})},e[58]=B,e[59]=oe,e[60]=p):p=e[60];const A=p;let z,R,W,F,N,T,M,U;se=y.ScreenContainer,e[61]===Symbol.for("react.memo_cache_sentinel")?(he=["top","left","right"],e[61]=he):he=e[61],me="bg-background",ie=s.default,e[62]!==S.background?(ue={flex:1,backgroundColor:S.background},e[62]=S.background,e[63]=ue):ue=e[63],e[64]!==E?(z=()=>E.back(),e[64]=E,e[65]=z):z=e[65],e[66]===Symbol.for("react.memo_cache_sentinel")?(R={flexDirection:"row",alignItems:"center"},e[66]=R):R=e[66],e[67]!==S.foreground?(W=(0,k.jsx)(j.default,{name:"arrow-back",size:24,color:S.foreground}),e[67]=S.foreground,e[68]=W):W=e[68],e[69]!==S.foreground?(F=(0,k.jsx)(o.default,{style:{color:S.foreground,marginLeft:8},children:"\u623b\u308b"}),e[69]=S.foreground,e[70]=F):F=e[70],e[71]!==z||e[72]!==W||e[73]!==F?(fe=(0,k.jsx)(I.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,k.jsxs)(n.default,{onPress:z,style:R,children:[W,F]})}),e[71]=z,e[72]=W,e[73]=F,e[74]=fe):fe=e[74],e[75]===Symbol.for("react.memo_cache_sentinel")?(N={paddingHorizontal:16,paddingTop:8},e[75]=N):N=e[75],e[76]===Symbol.for("react.memo_cache_sentinel")?(T={marginBottom:16},e[76]=T):T=e[76],e[77]!==S.foreground?(M=(0,k.jsx)(o.default,{style:{color:S.foreground,fontSize:18,fontWeight:"bold"},children:"\u30b3\u30e1\u30f3\u30c8\u7ba1\u7406"}),e[77]=S.foreground,e[78]=M):M=e[78],e[79]===Symbol.for("react.memo_cache_sentinel")?(U={color:"#9CA3AF",fontSize:12},e[79]=U):U=e[79];const O=L?.title;let q,G,J,K;e[80]!==O?(q=(0,k.jsx)(o.default,{style:U,numberOfLines:1,children:O}),e[80]=O,e[81]=q):q=e[81],e[82]!==M||e[83]!==q?(G=(0,k.jsxs)(l.default,{style:T,children:[M,q]}),e[82]=M,e[83]=q,e[84]=G):G=e[84],e[85]===Symbol.for("react.memo_cache_sentinel")?(J={flexDirection:"row",marginBottom:16,gap:8},e[85]=J):J=e[85],e[86]===Symbol.for("react.memo_cache_sentinel")?(K=()=>w("all"),e[86]=K):K=e[86];const Y="all"===V?"#EC4899":"#1A1D21";let Z,ee;e[87]!==Y?(Z={flex:1,paddingVertical:12,borderRadius:8,backgroundColor:Y,alignItems:"center"},e[87]=Y,e[88]=Z):Z=e[88],e[89]!==S.foreground?(ee={color:S.foreground,fontWeight:"bold"},e[89]=S.foreground,e[90]=ee):ee=e[90];const re=(0,k.jsx)(n.default,{onPress:K,style:Z,children:(0,k.jsxs)(o.default,{style:ee,children:["\u3059\u3079\u3066 (",t.length,")"]})});let le;e[91]===Symbol.for("react.memo_cache_sentinel")?(le=()=>w("picked"),e[91]=le):le=e[91];const ye="picked"===V?"#EC4899":"#1A1D21";let xe,be;e[92]!==ye?(xe={flex:1,paddingVertical:12,borderRadius:8,backgroundColor:ye,alignItems:"center"},e[92]=ye,e[93]=xe):xe=e[93],e[94]!==S.foreground?(be={color:S.foreground,fontWeight:"bold"},e[94]=S.foreground,e[95]=be):be=e[95];const pe=X?.length||0;let je,Ce,Ie;e[96]!==be||e[97]!==pe?(je=(0,k.jsxs)(o.default,{style:be,children:["\u30d4\u30c3\u30af\u30a2\u30c3\u30d7 (",pe,")"]}),e[96]=be,e[97]=pe,e[98]=je):je=e[98],e[99]!==xe||e[100]!==je?(Ce=(0,k.jsx)(n.default,{onPress:le,style:xe,children:je}),e[99]=xe,e[100]=je,e[101]=Ce):Ce=e[101],e[102]!==re||e[103]!==Ce?(Ie=(0,k.jsxs)(l.default,{style:J,children:[re,Ce]}),e[102]=re,e[103]=Ce,e[104]=Ie):Ie=e[104],e[105]!==G||e[106]!==Ie?(ge=(0,k.jsxs)(l.default,{style:N,children:[G,Ie]}),e[105]=G,e[106]=Ie,e[107]=ge):ge=e[107],de=l.default,e[108]===Symbol.for("react.memo_cache_sentinel")?(ae={paddingHorizontal:16},e[108]=ae):ae=e[108],ce="all"===V?t.length>0?t.map(e=>{const t=ne.has(e.id),s=v===e.id;return(0,k.jsxs)(l.default,{style:{backgroundColor:t?"#1E2530":"#1A1D21",borderRadius:12,padding:16,marginBottom:12,borderWidth:t?2:1,borderColor:t?"#EC4899":"#2D3139"},children:[(0,k.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:12},children:[e.profileImage?(0,k.jsx)(C.Image,{source:{uri:e.profileImage},style:{width:40,height:40,borderRadius:20}}):(0,k.jsx)(l.default,{style:{width:40,height:40,borderRadius:20,backgroundColor:"#EC4899",alignItems:"center",justifyContent:"center"},children:(0,k.jsx)(o.default,{style:{color:S.foreground,fontWeight:"bold"},children:e.displayName?.charAt(0)||"?"})}),(0,k.jsxs)(l.default,{style:{flex:1,marginLeft:12},children:[(0,k.jsx)(o.default,{style:{color:S.foreground,fontWeight:"bold"},children:e.isAnonymous?"\u533f\u540d":e.displayName}),e.prefecture&&(0,k.jsx)(o.default,{style:{color:"#9CA3AF",fontSize:12},children:e.prefecture})]}),t&&(0,k.jsx)(l.default,{style:{backgroundColor:"#EC4899",borderRadius:4,paddingHorizontal:8,paddingVertical:4},children:(0,k.jsx)(o.default,{style:{color:S.foreground,fontSize:10,fontWeight:"bold"},children:"\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u6e08"})})]}),(0,k.jsx)(o.default,{style:{color:"#E5E7EB",fontSize:14,lineHeight:20,marginBottom:12},children:e.message}),s&&(0,k.jsx)(l.default,{style:{marginBottom:12},children:(0,k.jsx)(u.default,{value:D,onChangeText:P,placeholder:"\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u7406\u7531\uff08\u4efb\u610f\uff09",placeholderTextColor:"#6B7280",style:{backgroundColor:S.background,borderRadius:8,padding:12,color:S.foreground,borderWidth:1,borderColor:"#EC4899"},multiline:!0})}),(0,k.jsx)(l.default,{style:{flexDirection:"row",gap:8},children:t?(0,k.jsx)(n.default,{onPress:()=>b(e.id),style:{flex:1,backgroundColor:"#374151",borderRadius:8,paddingVertical:10,alignItems:"center"},children:(0,k.jsx)(o.default,{style:{color:S.foreground,fontWeight:"bold"},children:"\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u89e3\u9664"})}):(0,k.jsxs)(k.Fragment,{children:[s&&(0,k.jsx)(n.default,{onPress:()=>H(null),style:{flex:1,backgroundColor:"#374151",borderRadius:8,paddingVertical:10,alignItems:"center"},children:(0,k.jsx)(o.default,{style:{color:S.foreground},children:"\u30ad\u30e3\u30f3\u30bb\u30eb"})}),(0,k.jsx)(n.default,{onPress:()=>h(e.id),disabled:$.isPending,style:{flex:1,backgroundColor:"#EC4899",borderRadius:8,paddingVertical:10,alignItems:"center"},children:(0,k.jsx)(o.default,{style:{color:S.foreground,fontWeight:"bold"},children:s?"\u78ba\u5b9a":"\u30d4\u30c3\u30af\u30a2\u30c3\u30d7"})})]})})]},e.id)}):(0,k.jsxs)(l.default,{style:{alignItems:"center",paddingVertical:40},children:[(0,k.jsx)(j.default,{name:"chat-bubble-outline",size:64,color:"#6B7280"}),(0,k.jsx)(o.default,{style:{color:"#9CA3AF",fontSize:16,marginTop:16},children:"\u30b3\u30e1\u30f3\u30c8\u304c\u3042\u308a\u307e\u305b\u3093"})]}):X&&X.length>0?X.map(e=>(0,k.jsxs)(l.default,{style:{backgroundColor:"#1E2530",borderRadius:12,padding:16,marginBottom:12,borderWidth:2,borderColor:e.isUsedInVideo?"#4ADE80":"#EC4899"},children:[(0,k.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:12},children:[e.participation?.profileImage?(0,k.jsx)(C.Image,{source:{uri:e.participation.profileImage},style:{width:40,height:40,borderRadius:20}}):(0,k.jsx)(l.default,{style:{width:40,height:40,borderRadius:20,backgroundColor:"#EC4899",alignItems:"center",justifyContent:"center"},children:(0,k.jsx)(o.default,{style:{color:S.foreground,fontWeight:"bold"},children:e.participation?.displayName?.charAt(0)||"?"})}),(0,k.jsxs)(l.default,{style:{flex:1,marginLeft:12},children:[(0,k.jsx)(o.default,{style:{color:S.foreground,fontWeight:"bold"},children:e.participation?.isAnonymous?"\u533f\u540d":e.participation?.displayName}),e.reason&&(0,k.jsxs)(o.default,{style:{color:"#EC4899",fontSize:12},children:["\u7406\u7531: ",e.reason]})]}),e.isUsedInVideo&&(0,k.jsx)(l.default,{style:{backgroundColor:"#4ADE80",borderRadius:4,paddingHorizontal:8,paddingVertical:4},children:(0,k.jsx)(o.default,{style:{color:"#000",fontSize:10,fontWeight:"bold"},children:"\u52d5\u753b\u4f7f\u7528\u6e08"})})]}),(0,k.jsx)(o.default,{style:{color:"#E5E7EB",fontSize:14,lineHeight:20,marginBottom:12},children:e.participation?.message}),(0,k.jsxs)(l.default,{style:{flexDirection:"row",gap:8},children:[(0,k.jsx)(n.default,{onPress:()=>b(e.participationId),style:{flex:1,backgroundColor:"#374151",borderRadius:8,paddingVertical:10,alignItems:"center"},children:(0,k.jsx)(o.default,{style:{color:S.foreground},children:"\u89e3\u9664"})}),!e.isUsedInVideo&&(0,k.jsx)(n.default,{onPress:()=>A(e.id),style:{flex:1,backgroundColor:"#4ADE80",borderRadius:8,paddingVertical:10,alignItems:"center"},children:(0,k.jsx)(o.default,{style:{color:"#000",fontWeight:"bold"},children:"\u52d5\u753b\u4f7f\u7528\u6e08\u307f\u306b\u3059\u308b"})})]})]},e.id)):(0,k.jsxs)(l.default,{style:{alignItems:"center",paddingVertical:40},children:[(0,k.jsx)(j.default,{name:"star-outline",size:64,color:"#6B7280"}),(0,k.jsx)(o.default,{style:{color:"#9CA3AF",fontSize:16,marginTop:16},children:"\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u305f\u30b3\u30e1\u30f3\u30c8\u306f\u3042\u308a\u307e\u305b\u3093"})]}),e[26]=L?.title,e[27]=B,e[28]=S.background,e[29]=S.foreground,e[30]=oe,e[31]=Q,e[32]=$,e[33]=D,e[34]=X,e[35]=ne,e[36]=v,e[37]=E,e[38]=V,e[39]=te,e[40]=de,e[41]=ie,e[42]=se,e[43]=ae,e[44]=ce,e[45]=ue,e[46]=fe,e[47]=ge,e[48]=he,e[49]=me}else de=e[40],ie=e[41],se=e[42],ae=e[43],ce=e[44],ue=e[45],fe=e[46],ge=e[47],he=e[48],me=e[49];return e[109]!==de||e[110]!==ae||e[111]!==ce?(ye=(0,k.jsx)(de,{style:ae,children:ce}),e[109]=de,e[110]=ae,e[111]=ce,e[112]=ye):ye=e[112],e[113]===Symbol.for("react.memo_cache_sentinel")?(xe=(0,k.jsx)(l.default,{style:{height:100}}),e[113]=xe):xe=e[113],e[114]!==ie||e[115]!==ue||e[116]!==fe||e[117]!==ge||e[118]!==ye?(be=(0,k.jsxs)(ie,{style:ue,children:[fe,ge,ye,xe]}),e[114]=ie,e[115]=ue,e[116]=fe,e[117]=ge,e[118]=ye,e[119]=be):be=e[119],e[120]!==se||e[121]!==he||e[122]!==me||e[123]!==be?(pe=(0,k.jsx)(se,{edges:he,containerClassName:me,children:be}),e[120]=se,e[121]=he,e[122]=me,e[123]=be,e[124]=pe):pe=e[124],pe}function _(e){return e.message&&e.message.trim().length>0}function A(e){return e.participationId}},1586,[1685,188,109,229,133,101,252,473,3,1083,1087,1185,728,712,1056,1210,2]);