__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return z}});var t=r(d[0]),o=e(r(d[1])),n=e(r(d[2])),l=e(r(d[3])),s=e(r(d[4])),c=e(r(d[5]));r(d[6]);var f=r(d[7]),u=r(d[8]),h=r(d[9]),y=r(d[10]),x=r(d[11]),b=r(d[12]),j=e(r(d[13])),C=r(d[14]),p=r(d[15]),S=r(d[16]);const A={weekly:"\u9031\u9593",monthly:"\u6708\u9593",all:"\u7d2f\u8a08"};function z(){const e=(0,t.c)(59),z=(0,u.useRouter)(),{user:_}=(0,b.useAuth)(),[w,I]=(0,h.useState)(!1),[k,W]=(0,h.useState)("monthly"),[B,F]=(0,h.useState)("contribution");let R;e[0]!==k?(R={period:k,limit:50},e[0]=k,e[1]=R):R=e[1];const{data:L,isLoading:P,refetch:v}=x.trpc.rankings.contribution.useQuery(R);let E;e[2]===Symbol.for("react.memo_cache_sentinel")?(E={limit:50},e[2]=E):E=e[2];const{data:H,isLoading:V,refetch:N}=x.trpc.rankings.hosts.useQuery(E);let T;e[3]!==k?(T={period:k},e[3]=k,e[4]=T):T=e[4];const Q=!!_;let M;e[5]!==Q?(M={enabled:Q},e[5]=Q,e[6]=M):M=e[6];const{data:O}=x.trpc.rankings.myPosition.useQuery(T,M);let $;e[7]!==v||e[8]!==N||e[9]!==B?($=async()=>{I(!0),"contribution"===B?await v():await N(),I(!1)},e[7]=v,e[8]=N,e[9]=B,e[10]=$):$=e[10];const G=$,U="contribution"===B?P:V,q="contribution"===B?L:H;let J,K,X,Y,Z,ee,te,oe,ne;e[11]!==z?(J=()=>z.back(),e[11]=z,e[12]=J):J=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(K={flexDirection:"row",alignItems:"center"},X=(0,S.jsx)(j.default,{name:"arrow-back",size:24,color:"#fff"}),e[13]=K,e[14]=X):(K=e[13],X=e[14]),e[15]===Symbol.for("react.memo_cache_sentinel")?(Y=(0,S.jsx)(n.default,{style:{color:"#fff",marginLeft:8},children:"\u623b\u308b"}),e[15]=Y):Y=e[15],e[16]!==J?(Z=(0,S.jsx)(p.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,S.jsxs)(s.default,{onPress:J,style:K,children:[X,Y]})}),e[16]=J,e[17]=Z):Z=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(ee={paddingHorizontal:16,paddingVertical:12,borderBottomWidth:1,borderBottomColor:"#2D3139"},e[18]=ee):ee=e[18],e[19]===Symbol.for("react.memo_cache_sentinel")?(te=(0,S.jsx)(l.default,{style:ee,children:(0,S.jsx)(n.default,{style:{color:"#fff",fontSize:18,fontWeight:"bold"},children:"\u30e9\u30f3\u30ad\u30f3\u30b0"})}),e[19]=te):te=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(oe={flexDirection:"row",paddingHorizontal:16,paddingVertical:12,gap:8},e[20]=oe):oe=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(ne=()=>F("contribution"),e[21]=ne):ne=e[21];const le="contribution"===B?"#DD6500":"#1A1D21";let re;e[22]!==le?(re={flex:1,paddingVertical:12,borderRadius:12,backgroundColor:le,alignItems:"center"},e[22]=le,e[23]=re):re=e[23];const ie="contribution"===B?"bold":"normal";let se,ae,de;e[24]!==ie?(se=(0,S.jsx)(n.default,{style:{color:"#fff",fontWeight:ie},children:"\u8ca2\u732e\u5ea6"}),e[24]=ie,e[25]=se):se=e[25],e[26]!==re||e[27]!==se?(ae=(0,S.jsx)(s.default,{onPress:ne,style:re,children:se}),e[26]=re,e[27]=se,e[28]=ae):ae=e[28],e[29]===Symbol.for("react.memo_cache_sentinel")?(de=()=>F("hosts"),e[29]=de):de=e[29];const ce="hosts"===B?"#DD6500":"#1A1D21";let fe;e[30]!==ce?(fe={flex:1,paddingVertical:12,borderRadius:12,backgroundColor:ce,alignItems:"center"},e[30]=ce,e[31]=fe):fe=e[31];const ue="hosts"===B?"bold":"normal";let he,me,ge,ye,xe,be,je;return e[32]!==ue?(he=(0,S.jsx)(n.default,{style:{color:"#fff",fontWeight:ue},children:"\u30db\u30b9\u30c8"}),e[32]=ue,e[33]=he):he=e[33],e[34]!==fe||e[35]!==he?(me=(0,S.jsx)(s.default,{onPress:de,style:fe,children:he}),e[34]=fe,e[35]=he,e[36]=me):me=e[36],e[37]!==ae||e[38]!==me?(ge=(0,S.jsxs)(l.default,{style:oe,children:[ae,me]}),e[37]=ae,e[38]=me,e[39]=ge):ge=e[39],e[40]!==k||e[41]!==B?(ye="contribution"===B&&(0,S.jsx)(l.default,{style:{flexDirection:"row",paddingHorizontal:16,paddingBottom:12,gap:8},children:["weekly","monthly","all"].map(e=>(0,S.jsx)(s.default,{onPress:()=>W(e),style:{paddingHorizontal:16,paddingVertical:8,borderRadius:20,backgroundColor:k===e?"#EC4899":"#2D3139"},children:(0,S.jsx)(n.default,{style:{color:"#fff",fontSize:13},children:A[e]})},e))}),e[40]=k,e[41]=B,e[42]=ye):ye=e[42],e[43]!==O||e[44]!==B||e[45]!==_?(xe=_&&O&&"contribution"===B&&(0,S.jsxs)(l.default,{style:{marginHorizontal:16,marginBottom:12,padding:16,borderRadius:12,backgroundColor:"#1A1D21",borderWidth:1,borderColor:"#DD6500"},children:[(0,S.jsx)(n.default,{style:{color:"#9CA3AF",fontSize:12,marginBottom:4},children:"\u3042\u306a\u305f\u306e\u9806\u4f4d"}),(0,S.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,S.jsx)(n.default,{style:{color:"#DD6500",fontSize:32,fontWeight:"bold"},children:O.position||"-"}),(0,S.jsx)(n.default,{style:{color:"#9CA3AF",fontSize:14,marginLeft:4},children:"\u4f4d"})]}),(0,S.jsxs)(l.default,{style:{alignItems:"flex-end"},children:[(0,S.jsx)(n.default,{style:{color:"#EC4899",fontSize:20,fontWeight:"bold"},children:O.totalContribution?.toLocaleString()||0}),(0,S.jsx)(n.default,{style:{color:"#9CA3AF",fontSize:12},children:"\u8ca2\u732e\u5ea6"})]})]})]}),e[43]=O,e[44]=B,e[45]=_,e[46]=xe):xe=e[46],e[47]!==q||e[48]!==U||e[49]!==G||e[50]!==w||e[51]!==B?(be=U?(0,S.jsx)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(n.default,{style:{color:"#9CA3AF"},children:"\u8aad\u307f\u8fbc\u307f\u4e2d..."})}):q&&q.length>0?(0,S.jsx)(o.default,{data:q,keyExtractor:D,renderItem:e=>{const{item:t,index:o}=e;return(0,S.jsxs)(l.default,{style:{flexDirection:"row",alignItems:"center",padding:16,borderBottomWidth:1,borderBottomColor:"#2D3139"},children:[(0,S.jsx)(l.default,{style:{width:40,alignItems:"center"},children:o<3?(0,S.jsx)(C.LinearGradient,{colors:0===o?["#FFD700","#FFA500"]:1===o?["#C0C0C0","#A0A0A0"]:["#CD7F32","#8B4513"],style:{width:32,height:32,borderRadius:16,alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(n.default,{style:{color:"#fff",fontSize:16,fontWeight:"bold"},children:o+1})}):(0,S.jsx)(n.default,{style:{color:"#9CA3AF",fontSize:16,fontWeight:"bold"},children:o+1})}),t.userImage?(0,S.jsx)(f.Image,{source:{uri:t.userImage||void 0},style:{width:48,height:48,borderRadius:24,marginLeft:8}}):(0,S.jsx)(l.default,{style:{width:48,height:48,borderRadius:24,marginLeft:8,backgroundColor:"#EC4899",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(n.default,{style:{color:"#fff",fontSize:20,fontWeight:"bold"},children:(t.userName||"?")[0]})}),(0,S.jsxs)(l.default,{style:{flex:1,marginLeft:12},children:[(0,S.jsx)(n.default,{style:{color:"#fff",fontSize:16,fontWeight:"600"},children:t.userName||"\u533f\u540d"}),"hosts"===B&&(0,S.jsxs)(n.default,{style:{color:"#9CA3AF",fontSize:12,marginTop:2},children:[t.participationCount||0," \u56de\u53c2\u52a0"]})]}),(0,S.jsxs)(l.default,{style:{alignItems:"flex-end"},children:[(0,S.jsx)(n.default,{style:{color:"#EC4899",fontSize:18,fontWeight:"bold"},children:(t.totalContribution||0).toLocaleString()}),(0,S.jsx)(n.default,{style:{color:"#9CA3AF",fontSize:10},children:"contribution"===B?"\u8ca2\u732e\u5ea6":"\u7dcf\u52d5\u54e1\u6570"})]})]})},refreshControl:(0,S.jsx)(c.default,{refreshing:w,onRefresh:G,tintColor:"#DD6500"}),contentContainerStyle:{paddingBottom:100},windowSize:5,maxToRenderPerBatch:10,initialNumToRender:10,removeClippedSubviews:!1,updateCellsBatchingPeriod:50}):(0,S.jsxs)(l.default,{style:{flex:1,alignItems:"center",justifyContent:"center",padding:32},children:[(0,S.jsx)(j.default,{name:"leaderboard",size:64,color:"#4B5563"}),(0,S.jsx)(n.default,{style:{color:"#fff",fontSize:18,fontWeight:"bold",marginTop:16,marginBottom:8},children:"\u307e\u3060\u30e9\u30f3\u30ad\u30f3\u30b0\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"}),(0,S.jsx)(n.default,{style:{color:"#9CA3AF",fontSize:14,textAlign:"center"},children:"\u30c1\u30e3\u30ec\u30f3\u30b8\u306b\u53c2\u52a0\u3057\u3066\u8ca2\u732e\u5ea6\u3092\u4e0a\u3052\u307e\u3057\u3087\u3046"})]}),e[47]=q,e[48]=U,e[49]=G,e[50]=w,e[51]=B,e[52]=be):be=e[52],e[53]!==Z||e[54]!==ge||e[55]!==ye||e[56]!==xe||e[57]!==be?(je=(0,S.jsxs)(y.ScreenContainer,{containerClassName:"bg-background",children:[Z,te,ge,ye,xe,be]}),e[53]=Z,e[54]=ge,e[55]=ye,e[56]=xe,e[57]=be,e[58]=je):je=e[58],je}function D(e,t){return`${e.userId||e.hostUserId}-${t}`}},1599,[1685,107,188,109,229,132,104,1056,473,3,1083,1087,1185,712,1206,1210,2]);