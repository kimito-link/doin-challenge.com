__d(function(g,r,i,a,m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return _}});var t=r(_d[0]),l=r(_d[1]),s=e(r(_d[2])),c=e(r(_d[3])),n=e(r(_d[4])),d=e(r(_d[5])),o=e(r(_d[6])),u=e(r(_d[7])),f=r(_d[8]),x=r(_d[9]),b=r(_d[10]),h=r(_d[11]);!(function(e){if(e&&e.__esModule)return e;var t={};e&&Object.keys(e).forEach(function(l){var s=Object.getOwnPropertyDescriptor(e,l);Object.defineProperty(t,l,s.get?s:{enumerable:!0,get:function(){return e[l]}})}),t.default=e})(r(_d[12]));r(_d[13]);var j=r(_d[14]),y=r(_d[15]);function _(){const e=(0,t.c)(67),{id:_}=(0,f.useLocalSearchParams)(),N=(0,f.useRouter)(),{user:p}=(0,h.useAuth)(),S=parseInt(_||"0",10),[w,C]=(0,l.useState)(!0),[v,k]=(0,l.useState)(!0),[P,O]=(0,l.useState)(!1);let I;e[0]!==S?(I={id:S},e[0]=S,e[1]=I):I=e[1];const{data:M}=b.trpc.events.getById.useQuery(I);let A;e[2]!==S?(A={challengeId:S},e[2]=S,e[3]=A):A=e[3];const D=!!p;let T;e[4]!==D?(T={enabled:D},e[4]=D,e[5]=T):T=e[5];const{data:V}=b.trpc.reminders.getForChallenge.useQuery(A,T),E=b.trpc.reminders.create.useMutation(),L=b.trpc.reminders.delete.useMutation();let Q,B,F;e[6]!==V?(Q=()=>{V&&(C("day_before"===V.reminderType),k("day_of"===V.reminderType),O("hour_before"===V.reminderType))},B=[V],e[6]=V,e[7]=Q,e[8]=B):(Q=e[7],B=e[8]),(0,l.useEffect)(Q,B),e[9]!==S||e[10]!==E||e[11]!==L||e[12]!==V?(F=async(e,t)=>{if(t)try{await E.mutateAsync({challengeId:S,reminderType:e}),u.default.alert("\u8a2d\u5b9a\u5b8c\u4e86","\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3057\u305f")}catch{u.default.alert("\u30a8\u30e9\u30fc","\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u306e\u8a2d\u5b9a\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}else if(V)try{await L.mutateAsync({id:V.id}),u.default.alert("\u8a2d\u5b9a\u5b8c\u4e86","\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3092\u89e3\u9664\u3057\u307e\u3057\u305f")}catch{u.default.alert("\u30a8\u30e9\u30fc","\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u306e\u89e3\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}e:switch(e){case"day_before":C(t);break e;case"day_of":k(t);break e;case"hour_before":O(t)}},e[9]=S,e[10]=E,e[11]=L,e[12]=V,e[13]=F):F=e[13];const H=F;if(!p){let t,l,n,o;return e[14]===Symbol.for("react.memo_cache_sentinel")?(t=(0,y.jsx)(c.default,{className:"text-lg text-muted text-center",children:"\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3059"}),e[14]=t):t=e[14],e[15]!==N?(l=()=>N.push("/oauth"),e[15]=N,e[16]=l):l=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(n=(0,y.jsx)(c.default,{className:"text-background font-bold",children:"\u30ed\u30b0\u30a4\u30f3"}),e[17]=n):n=e[17],e[18]!==l?(o=(0,y.jsx)(x.ScreenContainer,{className:"p-6",children:(0,y.jsxs)(s.default,{className:"flex-1 items-center justify-center",children:[t,(0,y.jsx)(d.default,{onPress:l,className:"mt-4 bg-primary px-6 py-3 rounded-full",children:n})]})}),e[18]=l,e[19]=o):o=e[19],o}let J,R,q,z,G,K,U,W,X,Y,Z;e[20]!==N?(J=()=>N.back(),e[20]=N,e[21]=J):J=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(R=(0,y.jsx)(c.default,{className:"text-foreground",children:"\u2190 \u623b\u308b"}),e[22]=R):R=e[22],e[23]!==J?(q=(0,y.jsx)(j.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,y.jsx)(d.default,{onPress:J,className:"flex-row items-center",children:R})}),e[23]=J,e[24]=q):q=e[24],e[25]===Symbol.for("react.memo_cache_sentinel")?(z=(0,y.jsx)(c.default,{className:"text-2xl font-bold text-foreground",children:"\u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u8a2d\u5b9a"}),e[25]=z):z=e[25],e[26]!==M?(G=M&&(0,y.jsx)(c.default,{className:"text-sm text-muted mt-1",numberOfLines:1,children:M.title}),e[26]=M,e[27]=G):G=e[27],e[28]!==G?(K=(0,y.jsxs)(s.default,{className:"mb-6",children:[z,G]}),e[28]=G,e[29]=K):K=e[29],e[30]!==M?(U=M&&(0,y.jsxs)(s.default,{className:"bg-surface rounded-2xl p-4 mb-6 border border-border",children:[(0,y.jsx)(c.default,{className:"text-sm text-muted mb-1",children:"\u30a4\u30d9\u30f3\u30c8\u65e5\u6642"}),(0,y.jsx)(c.default,{className:"text-lg font-bold text-foreground",children:new Date(M.eventDate).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric",weekday:"short",hour:"2-digit",minute:"2-digit"})})]}),e[30]=M,e[31]=U):U=e[31],e[32]===Symbol.for("react.memo_cache_sentinel")?(W=(0,y.jsxs)(s.default,{className:"p-4 border-b border-border",children:[(0,y.jsx)(c.default,{className:"text-lg font-bold text-foreground mb-1",children:"\u901a\u77e5\u30bf\u30a4\u30df\u30f3\u30b0"}),(0,y.jsx)(c.default,{className:"text-sm text-muted",children:"\u30a4\u30d9\u30f3\u30c8\u524d\u306b\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]}),e[32]=W):W=e[32],e[33]===Symbol.for("react.memo_cache_sentinel")?(X=(0,y.jsxs)(s.default,{className:"flex-1 mr-4",children:[(0,y.jsx)(c.default,{className:"text-base font-medium text-foreground",children:"\u524d\u65e5\u901a\u77e5"}),(0,y.jsx)(c.default,{className:"text-sm text-muted",children:"\u30a4\u30d9\u30f3\u30c8\u524d\u65e5\u306e\u671d9\u6642\u306b\u901a\u77e5"})]}),e[33]=X):X=e[33],e[34]!==H?(Y=e=>H("day_before",e),e[34]=H,e[35]=Y):Y=e[35],e[36]===Symbol.for("react.memo_cache_sentinel")?(Z={false:"#334155",true:"#f472b6"},e[36]=Z):Z=e[36];const $=w?"#ec4899":"#94a3b8";let ee,te,re,ae;e[37]!==w||e[38]!==Y||e[39]!==$?(ee=(0,y.jsxs)(s.default,{className:"flex-row items-center justify-between p-4 border-b border-border",children:[X,(0,y.jsx)(o.default,{value:w,onValueChange:Y,trackColor:Z,thumbColor:$})]}),e[37]=w,e[38]=Y,e[39]=$,e[40]=ee):ee=e[40],e[41]===Symbol.for("react.memo_cache_sentinel")?(te=(0,y.jsxs)(s.default,{className:"flex-1 mr-4",children:[(0,y.jsx)(c.default,{className:"text-base font-medium text-foreground",children:"\u5f53\u65e5\u901a\u77e5"}),(0,y.jsx)(c.default,{className:"text-sm text-muted",children:"\u30a4\u30d9\u30f3\u30c8\u5f53\u65e5\u306e\u671d9\u6642\u306b\u901a\u77e5"})]}),e[41]=te):te=e[41],e[42]!==H?(re=e=>H("day_of",e),e[42]=H,e[43]=re):re=e[43],e[44]===Symbol.for("react.memo_cache_sentinel")?(ae={false:"#334155",true:"#f472b6"},e[44]=ae):ae=e[44];const le=v?"#ec4899":"#94a3b8";let se,ce,ne,de;e[45]!==v||e[46]!==re||e[47]!==le?(se=(0,y.jsxs)(s.default,{className:"flex-row items-center justify-between p-4 border-b border-border",children:[te,(0,y.jsx)(o.default,{value:v,onValueChange:re,trackColor:ae,thumbColor:le})]}),e[45]=v,e[46]=re,e[47]=le,e[48]=se):se=e[48],e[49]===Symbol.for("react.memo_cache_sentinel")?(ce=(0,y.jsxs)(s.default,{className:"flex-1 mr-4",children:[(0,y.jsx)(c.default,{className:"text-base font-medium text-foreground",children:"1\u6642\u9593\u524d\u901a\u77e5"}),(0,y.jsx)(c.default,{className:"text-sm text-muted",children:"\u30a4\u30d9\u30f3\u30c8\u958b\u59cb1\u6642\u9593\u524d\u306b\u901a\u77e5"})]}),e[49]=ce):ce=e[49],e[50]!==H?(ne=e=>H("hour_before",e),e[50]=H,e[51]=ne):ne=e[51],e[52]===Symbol.for("react.memo_cache_sentinel")?(de={false:"#334155",true:"#f472b6"},e[52]=de):de=e[52];const oe=P?"#ec4899":"#94a3b8";let ue,me,fe,ie;return e[53]!==P||e[54]!==ne||e[55]!==oe?(ue=(0,y.jsxs)(s.default,{className:"flex-row items-center justify-between p-4",children:[ce,(0,y.jsx)(o.default,{value:P,onValueChange:ne,trackColor:de,thumbColor:oe})]}),e[53]=P,e[54]=ne,e[55]=oe,e[56]=ue):ue=e[56],e[57]!==ee||e[58]!==se||e[59]!==ue?(me=(0,y.jsxs)(s.default,{className:"bg-surface rounded-2xl border border-border overflow-hidden",children:[W,ee,se,ue]}),e[57]=ee,e[58]=se,e[59]=ue,e[60]=me):me=e[60],e[61]===Symbol.for("react.memo_cache_sentinel")?(fe=(0,y.jsx)(s.default,{className:"mt-6 p-4 bg-surface/50 rounded-xl",children:(0,y.jsx)(c.default,{className:"text-sm text-muted text-center",children:"\ud83d\udca1 \u30ea\u30de\u30a4\u30f3\u30c0\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30a4\u30d9\u30f3\u30c8\u3092\u5fd8\u308c\u305a\u306b\u53c2\u52a0\u3067\u304d\u307e\u3059\u3002 \u901a\u77e5\u306f\u30d7\u30c3\u30b7\u30e5\u901a\u77e5\u3067\u5c4a\u304d\u307e\u3059\u3002"})}),e[61]=fe):fe=e[61],e[62]!==K||e[63]!==U||e[64]!==me||e[65]!==q?(ie=(0,y.jsx)(x.ScreenContainer,{className:"p-6",children:(0,y.jsxs)(n.default,{showsVerticalScrollIndicator:!1,children:[q,K,U,me,fe]})}),e[62]=K,e[63]=U,e[64]=me,e[65]=q,e[66]=ie):ie=e[66],ie}},1600,[1685,3,109,188,133,229,250,101,473,1083,1087,1185,708,104,1210,2]);