__d(function(g,r,i,a,m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return O}});var t=r(_d[0]),s=r(_d[1]),o=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(s){var o=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:function(){return e[s]}})}),t.default=e,t})(r(_d[2])),n=r(_d[3]),c=r(_d[4]),l=r(_d[5]),u=e(r(_d[6])),d=e(r(_d[7])),f=e(r(_d[8])),h=r(_d[9]),w=e(r(_d[10])),p=r(_d[11]),x=r(_d[12]),T=r(_d[13]),j=r(_d[14]),I=r(_d[15]);const y=r(_d[16]),A={success:r(_d[17]),error:r(_d[18]),networkError:r(_d[19]),cancelled:r(_d[20]),expired:r(_d[21])},b="follow_success_modal_shown";function O(){const e=(0,c.useRouter)(),O=(0,c.useLocalSearchParams)(),[k,v]=(0,l.useState)("processing"),[S,_]=(0,l.useState)(null),[N,C]=(0,l.useState)("general"),[F,U]=(0,l.useState)(!1),[E,M]=(0,l.useState)(null),[P,R]=(0,l.useState)("/(tabs)/mypage"),D=(0,l.useRef)(!1);return(0,l.useEffect)(()=>{(async()=>{console.log("[Twitter OAuth] Callback handler triggered"),console.log("[Twitter OAuth] Params received:",{data:O.data?"present":"missing",error:O.error});try{if(O.error){console.error("[Twitter OAuth] Error parameter found:",O.error),v("error");try{const e=JSON.parse(decodeURIComponent(O.error));"access_denied"===e.code?(_("\u8a8d\u8a3c\u304c\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\u3002\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u306b\u306fTwitter\u8a8d\u8a3c\u3092\u8a31\u53ef\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),C("cancelled")):e.message?e.message.includes("fetch failed")||e.message.includes("network")?(_("\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"),C("network")):e.message.includes("Invalid or expired state")?(_("\u8a8d\u8a3c\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),C("expired")):e.message.includes("exchange code")?(_("Twitter\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"),C("general")):(_(e.message),C("general")):(_("\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f"),C("general"))}catch{_(O.error)}return}if(!O.data)return console.error("[Twitter OAuth] Missing data parameter"),v("error"),void _("\u8a8d\u8a3c\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093");try{const t=JSON.parse(decodeURIComponent(O.data));console.log("[Twitter OAuth] User data parsed:",{twitterId:t.twitterId,username:t.username,name:t.name,description:t.description});const s={id:parseInt(t.twitterId)||0,openId:`twitter:${t.twitterId}`,name:t.name,email:null,loginMethod:"twitter",lastSignedIn:new Date,username:t.username,profileImage:t.profileImage,followersCount:t.followersCount,description:t.description,twitterId:t.twitterId,twitterAccessToken:t.accessToken,isFollowingTarget:t.isFollowingTarget,targetAccount:t.targetAccount};await o.setUserInfo(s),console.log("[Twitter OAuth] User info stored successfully via Auth module"),t.accessToken&&(await(0,n.saveTokenData)({accessToken:t.accessToken,refreshToken:t.refreshToken,expiresIn:7200}),console.log("[Twitter OAuth] Token data stored for auto-refresh")),await(0,p.saveAccount)({id:t.twitterId,username:t.username,displayName:t.name,profileImageUrl:t.profileImage}),console.log("[Twitter OAuth] Account saved for multi-account switching"),v("success"),console.log("[Twitter OAuth] Authentication successful");let c="/(tabs)/mypage";if("undefined"!=typeof window){const e=localStorage.getItem("auth_return_url");e&&(c=e,localStorage.removeItem("auth_return_url"),console.log("[Twitter OAuth] Using saved return URL:",c))}if(R(c),t.isFollowingTarget){D.current=!0,M(t.targetAccount);await w.default.getItem(b)?setTimeout(()=>{console.log("[Twitter OAuth] Executing redirect to:",c),e.replace(c)},1500):(console.log("[Twitter OAuth] Showing follow success modal"),U(!0),await w.default.setItem(b,"true"))}else setTimeout(()=>{console.log("[Twitter OAuth] Executing redirect to:",c),e.replace(c)},1500)}catch(e){console.error("[Twitter OAuth] Failed to parse user data:",e),v("error"),_("\u8a8d\u8a3c\u30c7\u30fc\u30bf\u306e\u89e3\u6790\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}}catch(e){console.error("[Twitter OAuth] Callback error:",e),v("error"),_(e instanceof Error?e.message:"\u8a8d\u8a3c\u306e\u5b8c\u4e86\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}})()},[O.data,O.error,e]),(0,I.jsx)(h.SafeAreaView,{className:"flex-1 bg-background",edges:["top","bottom","left","right"],children:(0,I.jsxs)(t.ThemedView,{className:"flex-1 items-center justify-center gap-4 p-5",children:["processing"===k&&(0,I.jsxs)(f.default,{className:"items-center justify-center gap-4",children:[(0,I.jsx)(x.Image,{source:y,style:{width:120,height:40},contentFit:"contain"}),(0,I.jsx)(T.BlinkingLink,{variant:"normalClosed",size:100,blinkInterval:2500,style:{marginVertical:12}}),(0,I.jsx)(u.default,{size:"large",color:"#F97316"}),(0,I.jsx)(d.default,{className:"mt-2 text-base leading-6 text-center text-foreground",children:"\u8a8d\u8a3c\u3092\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059..."})]}),"success"===k&&(0,I.jsxs)(f.default,{className:"items-center justify-center gap-4",children:[(0,I.jsx)(j.CelebrationAnimation,{visible:!0,characterSize:120,showConfetti:!0}),(0,I.jsx)(x.Image,{source:y,style:{width:120,height:40,marginTop:140},contentFit:"contain"}),(0,I.jsx)(d.default,{className:"text-xl font-bold text-center text-success",children:"\u8a8d\u8a3c\u6210\u529f\uff01"}),(0,I.jsx)(d.default,{className:"text-base leading-6 text-center text-muted",children:"\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u307e\u3059..."})]}),"error"===k&&(0,I.jsxs)(f.default,{className:"items-center justify-center gap-4",children:[(0,I.jsx)(x.Image,{source:y,style:{width:120,height:40},contentFit:"contain"}),(0,I.jsx)(x.Image,{source:"network"===N?A.networkError:"cancelled"===N?A.cancelled:"expired"===N?A.expired:A.error,style:{width:120,height:120,marginVertical:16},contentFit:"contain"}),(0,I.jsx)(d.default,{className:"mb-2 text-xl font-bold leading-7 text-error",children:"\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f"}),(0,I.jsx)(d.default,{className:"text-base leading-6 text-center text-foreground px-4",children:S}),(0,I.jsx)(d.default,{className:"mt-4 text-primary underline",onPress:()=>{e.replace("/(tabs)/mypage")},children:"\u30de\u30a4\u30da\u30fc\u30b8\u306b\u623b\u3063\u3066\u518d\u30ed\u30b0\u30a4\u30f3"})]}),(0,I.jsx)(s.FollowSuccessModal,{visible:F,onClose:()=>{U(!1),console.log("[Twitter OAuth] Modal closed, redirecting to:",P),e.replace(P)},targetUsername:E?.username||"idolfunch",targetDisplayName:E?.name||"\u541b\u6597\u308a\u3093\u304f"})]})})}},1595,[1506,1596,1181,1201,473,3,227,188,109,1642,1686,1259,1056,1253,1597,2,1266,1209,1256,1254,1213,1255]);
__d(function(g,r,_i,a,m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),_e.FollowSuccessModal=function(e){const c=(0,t.c)(50),{visible:s,onClose:p,targetUsername:k,targetDisplayName:B}=e,T=void 0===k?"idolfunch":k;const I=(0,_.useSharedValue)(.5),z=(0,_.useSharedValue)(0),E=(0,_.useSharedValue)(0),D=(0,_.useSharedValue)(0),M=(0,_.useSharedValue)(0),O=(0,f.useRef)(!1);let V,A;c[0]!==E||c[1]!==M||c[2]!==z||c[3]!==I||c[4]!==D||c[5]!==s?(V=()=>{s?(O.current,z.value=(0,_.withSpring)(1,{damping:15}),I.value=(0,_.withSpring)(1,{damping:12,stiffness:100}),E.value=(0,_.withDelay)(200,(0,_.withSpring)(1,{damping:10,stiffness:80})),D.value=(0,_.withDelay)(400,(0,_.withSpring)(1,{damping:8,stiffness:100})),M.value=(0,_.withDelay)(300,(0,_.withSpring)(1,{damping:15}))):(z.value=0,I.value=.5,E.value=0,D.value=0,M.value=0,O.current=!1)},A=[s,z,I,E,D,M],c[0]=E,c[1]=M,c[2]=z,c[3]=I,c[4]=D,c[5]=s,c[6]=V,c[7]=A):(V=c[6],A=c[7]);(0,f.useEffect)(V,A);const F=(0,_.useAnimatedStyle)((function({_worklet_12325257455625_init_data:e,opacity:t,scale:o}){const l=()=>({opacity:t.value,transform:[{scale:o.value}]});return l.__closure={opacity:t,scale:o},l.__workletHash=0xb35b297a809,l.__initData=e,l})({_worklet_12325257455625_init_data:w,opacity:z,scale:I})),R=(0,_.useAnimatedStyle)((function({_worklet_10636919412012_init_data:e,characterScale:t}){const o=()=>({transform:[{scale:t.value}]});return o.__closure={characterScale:t},o.__workletHash=0x9ac99cd952c,o.__initData=e,o})({_worklet_10636919412012_init_data:S,characterScale:E})),H=(0,_.useAnimatedStyle)((function({_worklet_38208423245_init_data:e,starScale:t}){const o=()=>({transform:[{scale:t.value}]});return o.__closure={starScale:t},o.__workletHash=38208423245,o.__initData=e,o})({_worklet_38208423245_init_data:b,starScale:D})),W=(0,_.useAnimatedStyle)((function({_worklet_2573287952669_init_data:e,confettiOpacity:t}){const o=()=>({opacity:t.value});return o.__closure={confettiOpacity:t},o.__workletHash=2573287952669,o.__initData=e,o})({_worklet_2573287952669_init_data:v,confettiOpacity:M}));let L,P,Y,q,N,U,G,J,K,Q,X,Z,$,ee,te,ae,oe,re,le,ne,ie,ce,se;c[8]!==F?(L=[C.container,F],c[8]=F,c[9]=L):L=c[9];c[10]!==W?(P=[C.confettiContainer,W],c[10]=W,c[11]=P):P=c[11];c[12]===Symbol.for("react.memo_cache_sentinel")?(Y=[...Array(12)].map(j),c[12]=Y):Y=c[12];c[13]!==P?(q=(0,y.jsx)(h.default.View,{style:P,children:Y}),c[13]=P,c[14]=q):q=c[14];c[15]!==H?(N=[C.starContainer,H],c[15]=H,c[16]=N):N=c[16];c[17]===Symbol.for("react.memo_cache_sentinel")?(U=(0,y.jsx)(d.default,{name:"star",size:48,color:"#FBBF24"}),c[17]=U):U=c[17];c[18]!==N?(G=(0,y.jsx)(h.default.View,{style:N,children:U}),c[18]=N,c[19]=G):G=c[19];c[20]!==R?(J=[C.characterContainer,R],c[20]=R,c[21]=J):J=c[21];c[22]===Symbol.for("react.memo_cache_sentinel")?(K=(0,y.jsx)(u.Image,{source:x.linkYukkuri,style:C.characterImage,contentFit:"contain"}),c[22]=K):K=c[22];c[23]!==J?(Q=(0,y.jsx)(h.default.View,{style:J,children:K}),c[23]=J,c[24]=Q):Q=c[24];c[25]===Symbol.for("react.memo_cache_sentinel")?(X=(0,y.jsx)(l.default,{style:C.title,children:"\ud83c\udf89 \u304a\u3081\u3067\u3068\u3046\uff01"}),Z=(0,y.jsx)(l.default,{style:C.subtitle,children:"\u30d7\u30ec\u30df\u30a2\u30e0\u6a5f\u80fd\u304c\u89e3\u653e\u3055\u308c\u307e\u3057\u305f"}),c[25]=X,c[26]=Z):(X=c[25],Z=c[26]);c[27]===Symbol.for("react.memo_cache_sentinel")?($=(0,y.jsx)(d.default,{name:"check-circle",size:20,color:"#22C55E"}),c[27]=$):$=c[27];c[28]!==T?(ee=(0,y.jsxs)(o.default,{style:C.followInfo,children:[$,(0,y.jsxs)(l.default,{style:C.followText,children:["@",T,"\u3092\u30d5\u30a9\u30ed\u30fc\u4e2d"]})]}),c[28]=T,c[29]=ee):ee=c[29];c[30]===Symbol.for("react.memo_cache_sentinel")?(te=(0,y.jsx)(l.default,{style:C.featureTitle,children:"\u4f7f\u3048\u308b\u6a5f\u80fd:"}),c[30]=te):te=c[30];c[31]===Symbol.for("react.memo_cache_sentinel")?(ae=(0,y.jsxs)(o.default,{style:C.featureItem,children:[(0,y.jsx)(d.default,{name:"add-circle",size:16,color:"#EC4899"}),(0,y.jsx)(l.default,{style:C.featureText,children:"\u30c1\u30e3\u30ec\u30f3\u30b8\u4f5c\u6210"})]}),c[31]=ae):ae=c[31];c[32]===Symbol.for("react.memo_cache_sentinel")?(oe=(0,y.jsxs)(o.default,{style:C.featureItem,children:[(0,y.jsx)(d.default,{name:"analytics",size:16,color:"#EC4899"}),(0,y.jsx)(l.default,{style:C.featureText,children:"\u7d71\u8a08\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9"})]}),c[32]=oe):oe=c[32];c[33]===Symbol.for("react.memo_cache_sentinel")?(re=(0,y.jsxs)(o.default,{style:C.featureList,children:[te,ae,oe,(0,y.jsxs)(o.default,{style:C.featureItem,children:[(0,y.jsx)(d.default,{name:"people",size:16,color:"#EC4899"}),(0,y.jsx)(l.default,{style:C.featureText,children:"\u30b3\u30e9\u30dc\u6a5f\u80fd"})]})]}),c[33]=re):re=c[33];c[34]!==ee?(le=(0,y.jsxs)(o.default,{style:C.messageContainer,children:[X,Z,ee,re]}),c[34]=ee,c[35]=le):le=c[35];c[36]===Symbol.for("react.memo_cache_sentinel")?(ne=(0,y.jsx)(l.default,{style:C.closeButtonText,children:"\u3055\u3063\u305d\u304f\u4f7f\u3063\u3066\u307f\u308b\uff01"}),c[36]=ne):ne=c[36];c[37]!==p?(ie=(0,y.jsx)(i.default,{style:C.closeButton,onPress:p,activeOpacity:.8,children:ne}),c[37]=p,c[38]=ie):ie=c[38];c[39]!==G||c[40]!==Q||c[41]!==le||c[42]!==ie||c[43]!==L||c[44]!==q?(ce=(0,y.jsx)(o.default,{style:C.overlay,children:(0,y.jsxs)(h.default.View,{style:L,children:[q,G,Q,le,ie]})}),c[39]=G,c[40]=Q,c[41]=le,c[42]=ie,c[43]=L,c[44]=q,c[45]=ce):ce=c[45];c[46]!==p||c[47]!==ce||c[48]!==s?(se=(0,y.jsx)(n.default,{visible:s,transparent:!0,animationType:"fade",onRequestClose:p,children:ce}),c[46]=p,c[47]=ce,c[48]=s,c[49]=se):se=c[49];return se};var t=r(_d[0]),o=e(r(_d[1])),l=e(r(_d[2])),n=e(r(_d[3])),i=e(r(_d[4])),c=e(r(_d[5])),s=e(r(_d[6])),u=r(_d[7]),d=e(r(_d[8])),f=r(_d[9]),_=r(_d[10]),h=e(_);!(function(e){if(e&&e.__esModule)return e;var t={};e&&Object.keys(e).forEach(function(o){var l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:function(){return e[o]}})}),t.default=e})(r(_d[11]));r(_d[12]);var y=r(_d[13]);const{width:p}=s.default.get("window"),x={linkYukkuri:r(_d[14])},w={code:"function followSuccessModalTsx1(){const{opacity,scale}=this.__closure;return{opacity:opacity.value,transform:[{scale:scale.value}]};}"},S={code:"function followSuccessModalTsx2(){const{characterScale}=this.__closure;return{transform:[{scale:characterScale.value}]};}"},b={code:"function followSuccessModalTsx3(){const{starScale}=this.__closure;return{transform:[{scale:starScale.value}]};}"},v={code:"function followSuccessModalTsx4(){const{confettiOpacity}=this.__closure;return{opacity:confettiOpacity.value};}"};function j(e,t){return(0,y.jsx)(o.default,{style:[C.confetti,{left:8*t+4+"%",top:30*Math.random()+"%",backgroundColor:["#EC4899","#F97316","#FBBF24","#22C55E","#3B82F6"][t%5],transform:[{rotate:360*Math.random()+"deg"}]}]},t)}const C=c.default.create({overlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.8)",justifyContent:"center",alignItems:"center",padding:20},container:{backgroundColor:"#1A1D21",borderRadius:24,padding:24,width:Math.min(p-40,360),alignItems:"center",borderWidth:2,borderColor:"#EC4899",position:"relative",overflow:"hidden"},confettiContainer:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},confetti:{position:"absolute",width:8,height:8,borderRadius:2},starContainer:{position:"absolute",top:16,right:16},characterContainer:{marginBottom:16},characterImage:{width:100,height:100},messageContainer:{alignItems:"center",marginBottom:20},title:{fontSize:24,fontWeight:"bold",color:"#fff",marginBottom:8},subtitle:{fontSize:16,color:"#EC4899",marginBottom:16,fontWeight:"600"},followInfo:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(34, 197, 94, 0.1)",paddingHorizontal:12,paddingVertical:8,borderRadius:20,marginBottom:16},followText:{color:"#22C55E",fontSize:14,marginLeft:6,fontWeight:"500"},featureList:{width:"100%",backgroundColor:"rgba(236, 72, 153, 0.1)",borderRadius:12,padding:12},featureTitle:{color:"#9CA3AF",fontSize:12,marginBottom:8},featureItem:{flexDirection:"row",alignItems:"center",marginBottom:6},featureText:{color:"#fff",fontSize:14,marginLeft:8},closeButton:{backgroundColor:"#EC4899",paddingHorizontal:32,paddingVertical:14,borderRadius:12,width:"100%"},closeButtonText:{color:"#fff",fontSize:16,fontWeight:"bold",textAlign:"center"}})},1596,[1685,109,188,235,229,28,134,1056,712,3,740,708,104,2,1209]);
__d(function(g,r,_i,a,m,_e,_d){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(_e,'__esModule',{value:!0}),_e.CelebrationAnimation=function({visible:t,onComplete:e,characterSize:o=120,showConfetti:_=!0}){const[y,w]=(0,n.useState)(!1),p=(0,u.useSharedValue)(0),S=(0,u.useSharedValue)(0),b=(0,u.useSharedValue)(0),E=(0,u.useSharedValue)(0),T=Array.from({length:12},(t,e)=>({x:(0,u.useSharedValue)(0),y:(0,u.useSharedValue)(0),rotation:(0,u.useSharedValue)(0),opacity:(0,u.useSharedValue)(0),scale:(0,u.useSharedValue)(1)})),x=()=>{w(!1),e?.()};(0,n.useEffect)(()=>{if(t&&!y){w(!0),E.value=(0,u.withTiming)(1,{duration:200}),p.value=(0,u.withSequence)((0,u.withSpring)(1.2,{damping:8,stiffness:200}),(0,u.withSpring)(1,{damping:10,stiffness:150})),S.value=(0,u.withDelay)(300,(0,u.withRepeat)((0,u.withSequence)((0,u.withTiming)(-30,{duration:200,easing:u.Easing.out(u.Easing.quad)}),(0,u.withTiming)(0,{duration:200,easing:u.Easing.in(u.Easing.quad)})),3,!1)),b.value=(0,u.withDelay)(300,(0,u.withRepeat)((0,u.withSequence)((0,u.withTiming)(-5,{duration:100}),(0,u.withTiming)(5,{duration:100}),(0,u.withTiming)(0,{duration:100})),3,!1)),_&&T.forEach((t,e)=>{const n=50*e,i=e/T.length*Math.PI*2,o=100+50*Math.random();t.opacity.value=(0,u.withDelay)(n,(0,u.withTiming)(1,{duration:100})),t.x.value=(0,u.withDelay)(n,(0,u.withTiming)(Math.cos(i)*o,{duration:800,easing:u.Easing.out(u.Easing.quad)})),t.y.value=(0,u.withDelay)(n,(0,u.withSequence)((0,u.withTiming)(-50-30*Math.random(),{duration:400,easing:u.Easing.out(u.Easing.quad)}),(0,u.withTiming)(100+50*Math.random(),{duration:600,easing:u.Easing.in(u.Easing.quad)}))),t.rotation.value=(0,u.withDelay)(n,(0,u.withTiming)(360*(Math.random()>.5?1:-1),{duration:1e3})),t.opacity.value=(0,u.withDelay)(n+700,(0,u.withTiming)(0,{duration:300}))});const t=setTimeout(()=>{(0,u.runOnJS)(x)()},2e3);return()=>clearTimeout(t)}},[t]);const C=(0,u.useAnimatedStyle)((function({_worklet_16547183904271_init_data:t,opacity:e,scale:n,translateY:i,rotate:o}){const l=()=>({opacity:e.value,transform:[{scale:n.value},{translateY:i.value},{rotate:`${o.value}deg`}]});return l.__closure={opacity:e,scale:n,translateY:i,rotate:o},l.__workletHash=0xf0cb104c60f,l.__initData=t,l})({_worklet_16547183904271_init_data:h,opacity:E,scale:p,translateY:S,rotate:b}));return t||y?(0,c.jsxs)(i.default,{style:v.container,pointerEvents:"none",children:[_&&T.map((t,e)=>{const n=(0,u.useAnimatedStyle)((function({_worklet_16447932563121_init_data:t,item_0:e}){const n=()=>({opacity:e.opacity.value,transform:[{translateX:e.x.value},{translateY:e.y.value},{rotate:`${e.rotation.value}deg`},{scale:e.scale.value}]});return n.__closure={item_0:e},n.__workletHash=0xef5952d7eb1,n.__initData=t,n})({_worklet_16447932563121_init_data:f,item_0:t})),i=["#EC4899","#F97316","#FBBF24","#22C55E","#3B82F6","#8B5CF6"],o=i[e%i.length];return(0,c.jsx)(s.default.View,{style:[v.confetti,n,{backgroundColor:o}]},e)}),(0,c.jsx)(s.default.View,{style:[v.characterContainer,C],children:(0,c.jsx)(l.Image,{source:d,style:{width:o,height:o},contentFit:"contain"})})]}):null},_e.ConfettiEffect=function(t){const o=(0,e.c)(10),{visible:l,onComplete:u}=t;let s;o[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],o[0]=s):s=o[0];const[d,h]=(0,n.useState)(s);let f,y,w,p;o[1]!==u||o[2]!==l?(f=()=>{if(l){const t=["#EC4899","#F97316","#FBBF24","#22C55E","#3B82F6","#8B5CF6"],e=Array.from({length:20},(e,n)=>({id:n,x:100*Math.random()-50,color:t[n%t.length],delay:30*n}));h(e);const n=setTimeout(()=>{h([]),u?.()},1500);return()=>clearTimeout(n)}},o[1]=u,o[2]=l,o[3]=f):f=o[3];o[4]!==l?(y=[l],o[4]=l,o[5]=y):y=o[5];if((0,n.useEffect)(f,y),!l||0===d.length)return null;o[6]!==d?(w=d.map(_),o[6]=d,o[7]=w):w=o[7];o[8]!==w?(p=(0,c.jsx)(i.default,{style:v.confettiContainer,pointerEvents:"none",children:w}),o[8]=w,o[9]=p):p=o[9];return p};var e=r(_d[0]),n=r(_d[1]),i=t(r(_d[2])),o=t(r(_d[3]));r(_d[4]);var l=r(_d[5]),u=r(_d[6]),s=t(u),c=((function(t){if(t&&t.__esModule)return t;var e={};t&&Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),e.default=t})(r(_d[7])),r(_d[8]));const d=r(_d[9]),h={code:"function celebrationAnimationTsx1(){const{opacity,scale,translateY,rotate}=this.__closure;return{opacity:opacity.value,transform:[{scale:scale.value},{translateY:translateY.value},{rotate:rotate.value+\"deg\"}]};}"},f={code:"function celebrationAnimationTsx2(){const{item_0}=this.__closure;return{opacity:item_0.opacity.value,transform:[{translateX:item_0.x.value},{translateY:item_0.y.value},{rotate:item_0.rotation.value+\"deg\"},{scale:item_0.scale.value}]};}"};function _(t){return(0,c.jsx)(w,{...t},t.id)}const y={code:"function celebrationAnimationTsx3(){const{opacity,translateX,translateY,rotation}=this.__closure;return{opacity:opacity.value,transform:[{translateX:translateX.value},{translateY:translateY.value},{rotate:rotation.value+\"deg\"}]};}"};function w(t){const i=(0,e.c)(13),{x:o,color:l,delay:d}=t,h=(0,u.useSharedValue)(-50),f=(0,u.useSharedValue)(0),_=(0,u.useSharedValue)(0),w=(0,u.useSharedValue)(1);let p,S;i[0]!==d||i[1]!==w||i[2]!==_||i[3]!==f||i[4]!==h||i[5]!==o?(p=()=>{f.value=(0,u.withDelay)(d,(0,u.withTiming)(o,{duration:1e3})),h.value=(0,u.withDelay)(d,(0,u.withTiming)(200,{duration:1e3,easing:u.Easing.in(u.Easing.quad)})),_.value=(0,u.withDelay)(d,(0,u.withTiming)(360*(Math.random()>.5?1:-1),{duration:1e3})),w.value=(0,u.withDelay)(d+700,(0,u.withTiming)(0,{duration:300}))},i[0]=d,i[1]=w,i[2]=_,i[3]=f,i[4]=h,i[5]=o,i[6]=p):p=i[6],i[7]===Symbol.for("react.memo_cache_sentinel")?(S=[],i[7]=S):S=i[7],(0,n.useEffect)(p,S);const b=(0,u.useAnimatedStyle)((function({_worklet_14743256713547_init_data:t,opacity:e,translateX:n,translateY:i,rotation:o}){const l=()=>({opacity:e.value,transform:[{translateX:n.value},{translateY:i.value},{rotate:`${o.value}deg`}]});return l.__closure={opacity:e,translateX:n,translateY:i,rotation:o},l.__workletHash=0xd68ae94494b,l.__initData=t,l})({_worklet_14743256713547_init_data:y,opacity:w,translateX:f,translateY:h,rotation:_}));let E,T;return i[8]!==l?(E={backgroundColor:l},i[8]=l,i[9]=E):E=i[9],i[10]!==b||i[11]!==E?(T=(0,c.jsx)(s.default.View,{style:[v.confetti,b,E]}),i[10]=b,i[11]=E,i[12]=T):T=i[12],T}const v=o.default.create({container:{...o.default.absoluteFillObject,alignItems:"center",justifyContent:"center",zIndex:1e3},characterContainer:{alignItems:"center",justifyContent:"center"},confettiContainer:{...o.default.absoluteFillObject,alignItems:"center",justifyContent:"flex-start",paddingTop:100,zIndex:999},confetti:{position:"absolute",width:10,height:10,borderRadius:2}})},1597,[1685,3,109,28,104,1056,740,708,2,1209]);