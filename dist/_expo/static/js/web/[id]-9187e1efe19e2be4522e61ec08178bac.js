__d(function(g,r,i,a,m,_e,_d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return p}});var t=e(r(_d[0])),n=e(r(_d[1])),l=e(r(_d[2])),o=e(r(_d[3])),s=e(r(_d[4]));r(_d[5]);var d=r(_d[6]),c=r(_d[7]),f=r(_d[8]),u=r(_d[9]),h=r(_d[10]),x=e(r(_d[11])),j=r(_d[12]),y=((function(e){if(e&&e.__esModule)return e;var t={};e&&Object.keys(e).forEach(function(n){var l=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:function(){return e[n]}})}),t.default=e})(r(_d[13])),r(_d[14])),b=r(_d[15]);function p(){const{id:e}=(0,d.useLocalSearchParams)(),p=(0,d.useRouter)(),{user:C}=(0,h.useAuth)(),[D,A]=(0,c.useState)(!1),[S,z]=(0,c.useState)(null),{data:w,isLoading:k}=u.trpc.challenges.get.useQuery({id:parseInt(e||"0")},{enabled:!!e}),I=u.trpc.invitations.create.useMutation({onSuccess:e=>{z(e.code)}});(0,c.useEffect)(()=>{e&&C&&I.mutate({challengeId:parseInt(e)})},[e,C]);const F=S?`https://douin-challenge.app/join/${S}`:null;return k?(0,b.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,b.jsx)(n.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(t.default,{style:{color:"#9CA3AF"},children:"\u8aad\u307f\u8fbc\u307f\u4e2d..."})})}):w?(0,b.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,b.jsxs)(l.default,{children:[(0,b.jsx)(y.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,b.jsxs)(o.default,{onPress:()=>p.back(),style:{flexDirection:"row",alignItems:"center"},children:[(0,b.jsx)(x.default,{name:"arrow-back",size:24,color:"#fff"}),(0,b.jsx)(t.default,{style:{color:"#fff",marginLeft:8},children:"\u623b\u308b"})]})}),(0,b.jsx)(j.LinearGradient,{colors:["#DD6500","#EC4899","#8B5CF6"],start:{x:0,y:0},end:{x:1,y:1},style:{padding:20,paddingTop:16},children:(0,b.jsxs)(n.default,{style:{alignItems:"center"},children:[(0,b.jsx)(x.default,{name:"share",size:48,color:"#fff"}),(0,b.jsx)(t.default,{style:{color:"#fff",fontSize:24,fontWeight:"bold",marginTop:12},children:"\u53cb\u9054\u3092\u62db\u5f85"}),(0,b.jsx)(t.default,{style:{color:"rgba(255,255,255,0.8)",fontSize:14,marginTop:4,textAlign:"center"},children:"\u4e00\u7dd2\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3092\u76db\u308a\u4e0a\u3052\u3088\u3046\uff01"})]})}),(0,b.jsx)(n.default,{style:{padding:16},children:(0,b.jsxs)(n.default,{style:{backgroundColor:"#161B22",borderRadius:12,padding:16,borderWidth:1,borderColor:"#2D3139"},children:[(0,b.jsx)(t.default,{style:{color:"#fff",fontSize:18,fontWeight:"bold",marginBottom:8},children:w.title}),(0,b.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,b.jsx)(x.default,{name:"people",size:16,color:"#9CA3AF"}),(0,b.jsxs)(t.default,{style:{color:"#9CA3AF",fontSize:14,marginLeft:4},children:["\u76ee\u6a19: ",w.targetCount,"\u4eba"]})]}),w.venue&&(0,b.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",marginTop:4},children:[(0,b.jsx)(x.default,{name:"location-on",size:16,color:"#9CA3AF"}),(0,b.jsx)(t.default,{style:{color:"#9CA3AF",fontSize:14,marginLeft:4},children:w.venue})]})]})}),(0,b.jsxs)(n.default,{style:{padding:16},children:[(0,b.jsx)(t.default,{style:{color:"#fff",fontSize:16,fontWeight:"bold",marginBottom:12},children:"\u62db\u5f85\u30ea\u30f3\u30af"}),F?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.default,{style:{backgroundColor:"#161B22",borderRadius:8,padding:12,borderWidth:1,borderColor:"#2D3139",marginBottom:12},children:(0,b.jsx)(t.default,{style:{color:"#9CA3AF",fontSize:12},numberOfLines:1,children:F})}),(0,b.jsxs)(o.default,{onPress:async()=>{F&&(navigator.clipboard&&await navigator.clipboard.writeText(F),A(!0),setTimeout(()=>A(!1),2e3))},style:{backgroundColor:D?"#22C55E":"#DD6500",borderRadius:8,padding:14,alignItems:"center",flexDirection:"row",justifyContent:"center",marginBottom:12},children:[(0,b.jsx)(x.default,{name:D?"check":"content-copy",size:20,color:"#fff"}),(0,b.jsx)(t.default,{style:{color:"#fff",fontWeight:"600",marginLeft:8},children:D?"\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\uff01":"\u30ea\u30f3\u30af\u3092\u30b3\u30d4\u30fc"})]}),(0,b.jsxs)(o.default,{onPress:async()=>{if(F&&w)try{await s.default.share({message:`\ud83c\udf89 \u300c${w.title}\u300d\u306b\u4e00\u7dd2\u306b\u53c2\u52a0\u3057\u3088\u3046\uff01\n\n\u76ee\u6a19: ${w.targetCount}\u4eba\n\n\u62db\u5f85\u30ea\u30f3\u30af: ${F}\n\n#\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058 #\u541b\u6597\u308a\u3093\u304f`,url:F})}catch(e){console.error("Share error:",e)}},style:{backgroundColor:"#2D3139",borderRadius:8,padding:14,alignItems:"center",flexDirection:"row",justifyContent:"center",marginBottom:12},children:[(0,b.jsx)(x.default,{name:"share",size:20,color:"#fff"}),(0,b.jsx)(t.default,{style:{color:"#fff",fontWeight:"600",marginLeft:8},children:"\u30b7\u30a7\u30a2\u3059\u308b"})]}),(0,b.jsxs)(o.default,{onPress:()=>{if(F&&w){const e=`https://twitter.com/intent/tweet?text=${encodeURIComponent(`\ud83c\udf89 \u300c${w.title}\u300d\u306b\u4e00\u7dd2\u306b\u53c2\u52a0\u3057\u3088\u3046\uff01\n\n\u76ee\u6a19: ${w.targetCount}\u4eba\n\n\u62db\u5f85\u30ea\u30f3\u30af: ${F}\n\n#\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058 #\u541b\u6597\u308a\u3093\u304f`)}`;window.open(e,"_blank")}},style:{backgroundColor:"#1DA1F2",borderRadius:8,padding:14,alignItems:"center",flexDirection:"row",justifyContent:"center"},children:[(0,b.jsx)(t.default,{style:{fontSize:20},children:"\ud835\udd4f"}),(0,b.jsx)(t.default,{style:{color:"#fff",fontWeight:"600",marginLeft:8},children:"X\u3067\u30b7\u30a7\u30a2"})]})]}):(0,b.jsx)(n.default,{style:{alignItems:"center",padding:20},children:(0,b.jsx)(t.default,{style:{color:"#9CA3AF"},children:"\u62db\u5f85\u30ea\u30f3\u30af\u3092\u751f\u6210\u4e2d..."})})]}),(0,b.jsxs)(n.default,{style:{padding:16},children:[(0,b.jsx)(t.default,{style:{color:"#fff",fontSize:16,fontWeight:"bold",marginBottom:12},children:"QR\u30b3\u30fc\u30c9"}),(0,b.jsxs)(n.default,{style:{backgroundColor:"#fff",borderRadius:12,padding:20,alignItems:"center",alignSelf:"center"},children:[(0,b.jsx)(n.default,{style:{width:150,height:150,backgroundColor:"#f0f0f0",alignItems:"center",justifyContent:"center",borderRadius:8},children:(0,b.jsx)(x.default,{name:"qr-code-2",size:100,color:"#333"})}),(0,b.jsx)(t.default,{style:{color:"#666",fontSize:12,marginTop:8},children:"\u30b9\u30ad\u30e3\u30f3\u3057\u3066\u53c2\u52a0"})]})]}),(0,b.jsx)(n.default,{style:{padding:16},children:(0,b.jsxs)(n.default,{style:{backgroundColor:"#161B22",borderRadius:12,padding:16,borderWidth:1,borderColor:"#DD6500"},children:[(0,b.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:8},children:[(0,b.jsx)(x.default,{name:"card-giftcard",size:24,color:"#DD6500"}),(0,b.jsx)(t.default,{style:{color:"#DD6500",fontSize:16,fontWeight:"bold",marginLeft:8},children:"\u62db\u5f85\u7279\u5178"})]}),(0,b.jsxs)(t.default,{style:{color:"#9CA3AF",fontSize:14,lineHeight:20},children:["\u53cb\u9054\u3092\u62db\u5f85\u3059\u308b\u3068\u3001\u3042\u306a\u305f\u306e\u8ca2\u732e\u5ea6\u304c+1\u3055\u308c\u307e\u3059\uff01","\n","\u305f\u304f\u3055\u3093\u62db\u5f85\u3057\u3066\u3001\u30c1\u30e3\u30ec\u30f3\u30b8\u3092\u76db\u308a\u4e0a\u3052\u3088\u3046\uff01"]})]})}),(0,b.jsx)(n.default,{style:{height:100}})]})}):(0,b.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,b.jsxs)(n.default,{style:{flex:1,alignItems:"center",justifyContent:"center"},children:[(0,b.jsx)(t.default,{style:{color:"#9CA3AF"},children:"\u30c1\u30e3\u30ec\u30f3\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093"}),(0,b.jsx)(o.default,{onPress:()=>p.back(),style:{marginTop:16,padding:12},children:(0,b.jsx)(t.default,{style:{color:"#DD6500"},children:"\u623b\u308b"})})]})})}},1584,[188,109,133,229,225,104,473,3,1083,1087,1185,712,1206,708,1210,2]);