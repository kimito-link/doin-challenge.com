__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return N}});var t=r(d[0]),s=r(d[1]),l=r(d[2]),n=r(d[3]),c=r(d[4]),u=e(r(d[5])),o=e(r(d[6])),x=e(r(d[7])),f=e(r(d[8])),j=e(r(d[9])),h=e(r(d[10])),b=r(d[11]);function N(){const e=(0,s.useColors)(),N=(0,n.useRouter)(),[p,w]=(0,c.useState)(null),[y,P]=(0,c.useState)(!0),[C,S]=(0,c.useState)(!1),[v,k]=(0,c.useState)(null),A=(0,c.useCallback)(async()=>{try{const e=await(0,l.apiGet)("/api/admin/api-usage");if(!e.ok)throw new Error((0,l.getErrorMessage)(e));w(e.data),k(null)}catch(e){console.error("Failed to fetch API usage:",e),k(e instanceof Error?e.message:"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u306b\u5931\u6557\u3057\u307e\u3057\u305f")}finally{P(!1),S(!1)}},[]);(0,c.useEffect)(()=>{A();const e=setInterval(A,3e4);return()=>clearInterval(e)},[A]);const I=(0,c.useCallback)(()=>{S(!0),A()},[A]),R=t=>"critical"===t?e.error:e.warning;return y?(0,b.jsxs)(t.ScreenContainer,{className:"flex-1 items-center justify-center",children:[(0,b.jsx)(j.default,{size:"large",color:e.primary}),(0,b.jsx)(u.default,{className:"mt-4 text-muted",children:"\u8aad\u307f\u8fbc\u307f\u4e2d..."})]}):v?(0,b.jsxs)(t.ScreenContainer,{className:"flex-1 items-center justify-center p-4",children:[(0,b.jsx)(u.default,{className:"text-4xl mb-4",children:"\u26a0\ufe0f"}),(0,b.jsx)(u.default,{className:"text-lg font-bold text-foreground mb-2",children:"\u30a8\u30e9\u30fc"}),(0,b.jsx)(u.default,{className:"text-muted text-center mb-4",children:v}),(0,b.jsx)(f.default,{onPress:A,style:({pressed:t})=>[{backgroundColor:e.primary,paddingHorizontal:24,paddingVertical:12,borderRadius:8,opacity:t?.8:1}],children:(0,b.jsx)(u.default,{className:"text-white font-semibold",children:"\u518d\u8a66\u884c"})})]}):(0,b.jsx)(t.ScreenContainer,{children:(0,b.jsxs)(x.default,{className:"flex-1",contentContainerStyle:{padding:16},refreshControl:(0,b.jsx)(h.default,{refreshing:C,onRefresh:I}),children:[(0,b.jsxs)(o.default,{className:"flex-row items-center justify-between mb-6",children:[(0,b.jsxs)(o.default,{children:[(0,b.jsx)(u.default,{className:"text-2xl font-bold text-foreground",children:"API\u4f7f\u7528\u91cf\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9"}),(0,b.jsx)(u.default,{className:"text-sm text-muted mt-1",children:"Twitter API \u30ec\u30fc\u30c8\u5236\u9650\u306e\u76e3\u8996"})]}),(0,b.jsx)(f.default,{onPress:()=>N.back(),style:({pressed:e})=>[{padding:8,opacity:e?.6:1}],children:(0,b.jsx)(u.default,{className:"text-primary",children:"\u9589\u3058\u308b"})})]}),p?.warnings&&p.warnings.length>0&&(0,b.jsxs)(o.default,{className:"mb-6",children:[(0,b.jsx)(u.default,{className:"text-lg font-semibold text-foreground mb-3",children:"\u26a0\ufe0f \u8b66\u544a"}),p.warnings.map((e,t)=>(0,b.jsxs)(o.default,{className:"p-4 rounded-lg mb-2",style:{backgroundColor:R(e.level)+"20"},children:[(0,b.jsxs)(o.default,{className:"flex-row items-center justify-between",children:[(0,b.jsx)(u.default,{className:"font-semibold",style:{color:R(e.level)},children:"critical"===e.level?"\ud83d\udd34 \u5371\u967a":"\ud83d\udfe1 \u6ce8\u610f"}),(0,b.jsxs)(u.default,{className:"text-sm text-muted",children:["\u6b8b\u308a ",e.remaining," \u56de"]})]}),(0,b.jsx)(u.default,{className:"text-foreground mt-1",children:e.endpoint}),(0,b.jsxs)(u.default,{className:"text-sm text-muted mt-1",children:["\u30ea\u30bb\u30c3\u30c8: ",new Date(e.resetAt).toLocaleString("ja-JP")]})]},t))]}),(0,b.jsxs)(o.default,{className:"mb-6",children:[(0,b.jsx)(u.default,{className:"text-lg font-semibold text-foreground mb-3",children:"\ud83d\udcca \u7d71\u8a08\u30b5\u30de\u30ea\u30fc"}),(0,b.jsxs)(o.default,{className:"flex-row flex-wrap gap-3",children:[(0,b.jsxs)(o.default,{className:"flex-1 min-w-[140px] bg-surface p-4 rounded-lg",children:[(0,b.jsx)(u.default,{className:"text-3xl font-bold text-foreground",children:p?.stats.totalRequests||0}),(0,b.jsx)(u.default,{className:"text-sm text-muted",children:"\u7dcf\u30ea\u30af\u30a8\u30b9\u30c8\u6570"})]}),(0,b.jsxs)(o.default,{className:"flex-1 min-w-[140px] bg-surface p-4 rounded-lg",children:[(0,b.jsx)(u.default,{className:"text-3xl font-bold text-success",children:p?.stats.successfulRequests||0}),(0,b.jsx)(u.default,{className:"text-sm text-muted",children:"\u6210\u529f"})]}),(0,b.jsxs)(o.default,{className:"flex-1 min-w-[140px] bg-surface p-4 rounded-lg",children:[(0,b.jsx)(u.default,{className:"text-3xl font-bold text-error",children:p?.stats.rateLimitedRequests||0}),(0,b.jsx)(u.default,{className:"text-sm text-muted",children:"\u30ec\u30fc\u30c8\u5236\u9650"})]})]})]}),(0,b.jsxs)(o.default,{className:"mb-6",children:[(0,b.jsx)(u.default,{className:"text-lg font-semibold text-foreground mb-3",children:"\ud83d\udd17 \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u5225"}),p?.stats.endpoints&&Object.keys(p.stats.endpoints).length>0?Object.entries(p.stats.endpoints).map(([t,s])=>{return(0,b.jsxs)(o.default,{className:"bg-surface p-4 rounded-lg mb-3",children:[(0,b.jsx)(u.default,{className:"font-semibold text-foreground mb-2",children:t}),(0,b.jsxs)(o.default,{className:"flex-row justify-between mb-2",children:[(0,b.jsxs)(u.default,{className:"text-sm text-muted",children:["\u30ea\u30af\u30a8\u30b9\u30c8: ",s.requests]}),(0,b.jsxs)(u.default,{className:"text-sm text-muted",children:["\u6b8b\u308a: ",s.remaining,"/",s.limit]})]}),(0,b.jsx)(o.default,{className:"h-2 bg-border rounded-full overflow-hidden",children:(0,b.jsx)(o.default,{className:"h-full rounded-full",style:{width:`${s.usagePercent}%`,backgroundColor:(l=s.usagePercent,l>=90?e.error:l>=70?e.warning:e.success)}})}),(0,b.jsxs)(u.default,{className:"text-xs text-muted mt-1",children:["\u4f7f\u7528\u7387: ",s.usagePercent,"% | \u30ea\u30bb\u30c3\u30c8:"," ",new Date(s.resetAt).toLocaleString("ja-JP")]})]},t);var l}):(0,b.jsx)(o.default,{className:"bg-surface p-4 rounded-lg",children:(0,b.jsx)(u.default,{className:"text-muted text-center",children:"\u307e\u3060API\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3042\u308a\u307e\u305b\u3093"})})]}),(0,b.jsxs)(u.default,{className:"text-xs text-muted text-center",children:["\u6700\u7d42\u66f4\u65b0:"," ",p?.stats.lastUpdated?new Date(p.stats.lastUpdated).toLocaleString("ja-JP"):"-"]})]})})}},1499,[1083,728,1187,473,3,188,109,133,242,227,132,2]);