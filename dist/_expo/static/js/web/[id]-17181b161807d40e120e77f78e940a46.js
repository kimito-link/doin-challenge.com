__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return z}});var t=e(r(d[0])),l=e(r(d[1])),n=e(r(d[2])),o=e(r(d[3])),s=e(r(d[4])),c=r(d[5]),u=r(d[6]),f=r(d[7]),h=r(d[8]),x=r(d[9]),y=r(d[10]),j=e(r(d[11])),b=r(d[12]),C=r(d[13]),p=r(d[14]),A=r(d[15]);function z(){const e=(0,y.useColors)(),z=(0,u.useRouter)(),{id:S}=(0,u.useLocalSearchParams)(),{user:k}=(0,x.useAuth)(),I=parseInt(S||"0",10),[D,w]=(0,C.useState)(!1),{data:B,isLoading:F}=h.trpc.events.getById.useQuery({id:I}),{data:W,isLoading:L}=h.trpc.achievements.get.useQuery({challengeId:I}),{data:R,isLoading:v}=h.trpc.participations.listByEvent.useQuery({eventId:I}),P=async()=>{if(B&&W)try{await s.default.share({message:`\ud83c\udf89 ${B.title} \u76ee\u6a19\u9054\u6210\uff01\n\n${W.finalValue}${B.goalUnit||"\u4eba"}\u306e\u76ee\u6a19\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01\n${W.totalParticipants}\u4eba\u306e\u4ef2\u9593\u3068\u4e00\u7dd2\u306b\uff01\n\n#\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058 #\u541b\u6597\u308a\u3093\u304f`})}catch(e){console.error(e)}};if(F||L||v)return(0,A.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,A.jsx)(n.default,{style:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:e.background},children:(0,A.jsx)(l.default,{style:{color:"#9CA3AF"},children:"\u8aad\u307f\u8fbc\u307f\u4e2d..."})})});if(!B)return(0,A.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,A.jsx)(n.default,{style:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:e.background},children:(0,A.jsx)(l.default,{style:{color:"#9CA3AF"},children:"\u30c1\u30e3\u30ec\u30f3\u30b8\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093"})})});if(!W)return(0,A.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,A.jsxs)(n.default,{style:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:e.background},children:[(0,A.jsx)(l.default,{style:{color:"#9CA3AF"},children:"\u9054\u6210\u8a18\u5ff5\u30da\u30fc\u30b8\u306f\u307e\u3060\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u305b\u3093"}),(0,A.jsx)(o.default,{onPress:()=>z.back(),style:{marginTop:16,paddingHorizontal:24,paddingVertical:12,backgroundColor:"#EC4899",borderRadius:24},children:(0,A.jsx)(l.default,{style:{color:e.foreground,fontWeight:"bold"},children:"\u623b\u308b"})})]})});const E=new Date(W.achievedAt),H=`${E.getFullYear()}\u5e74${E.getMonth()+1}\u6708${E.getDate()}\u65e5`,V=D?R:R?.slice(0,20);return(0,A.jsx)(f.ScreenContainer,{containerClassName:"bg-background",children:(0,A.jsxs)(t.default,{style:{flex:1,backgroundColor:e.background},children:[(0,A.jsx)(p.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,A.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",gap:16},children:[(0,A.jsx)(o.default,{onPress:P,children:(0,A.jsx)(j.default,{name:"share",size:24,color:e.foreground})}),(0,A.jsxs)(o.default,{onPress:()=>z.back(),style:{flexDirection:"row",alignItems:"center"},children:[(0,A.jsx)(j.default,{name:"arrow-back",size:24,color:e.foreground}),(0,A.jsx)(l.default,{style:{color:e.foreground,marginLeft:8},children:"\u623b\u308b"})]})]})}),(0,A.jsx)(n.default,{style:{paddingHorizontal:16,paddingBottom:8},children:(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:18,fontWeight:"bold"},children:"\u9054\u6210\u8a18\u5ff5\u30da\u30fc\u30b8"})}),(0,A.jsxs)(b.LinearGradient,{colors:["#EC4899","#8B5CF6","#6366F1"],start:{x:0,y:0},end:{x:1,y:1},style:{marginHorizontal:16,borderRadius:24,padding:24,alignItems:"center"},children:[(0,A.jsx)(l.default,{style:{fontSize:64,marginBottom:8},children:"\ud83c\udf89"}),(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:28,fontWeight:"bold",textAlign:"center",marginBottom:8},children:"\u76ee\u6a19\u9054\u6210\uff01"}),(0,A.jsx)(l.default,{style:{color:"rgba(255,255,255,0.9)",fontSize:18,textAlign:"center"},children:W.title||B.title})]}),(0,A.jsx)(n.default,{style:{padding:16},children:(0,A.jsxs)(n.default,{style:{backgroundColor:"#1A1D21",borderRadius:16,padding:20,borderWidth:1,borderColor:"#2D3139"},children:[(0,A.jsxs)(n.default,{style:{flexDirection:"row",justifyContent:"space-around",marginBottom:20},children:[(0,A.jsxs)(n.default,{style:{alignItems:"center"},children:[(0,A.jsx)(l.default,{style:{color:"#EC4899",fontSize:36,fontWeight:"bold"},children:W.finalValue}),(0,A.jsxs)(l.default,{style:{color:"#9CA3AF",fontSize:12},children:["\u9054\u6210",B.goalUnit||"\u4eba","\u6570"]})]}),(0,A.jsx)(n.default,{style:{width:1,backgroundColor:"#2D3139"}}),(0,A.jsxs)(n.default,{style:{alignItems:"center"},children:[(0,A.jsx)(l.default,{style:{color:"#8B5CF6",fontSize:36,fontWeight:"bold"},children:W.totalParticipants}),(0,A.jsx)(l.default,{style:{color:"#9CA3AF",fontSize:12},children:"\u53c2\u52a0\u8005\u6570"})]}),(0,A.jsx)(n.default,{style:{width:1,backgroundColor:"#2D3139"}}),(0,A.jsxs)(n.default,{style:{alignItems:"center"},children:[(0,A.jsxs)(l.default,{style:{color:"#6366F1",fontSize:36,fontWeight:"bold"},children:[Math.round(W.finalValue/W.goalValue*100),"%"]}),(0,A.jsx)(l.default,{style:{color:"#9CA3AF",fontSize:12},children:"\u9054\u6210\u7387"})]})]}),(0,A.jsxs)(n.default,{style:{borderTopWidth:1,borderTopColor:"#2D3139",paddingTop:16},children:[(0,A.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:8},children:[(0,A.jsx)(j.default,{name:"event",size:16,color:"#DD6500"}),(0,A.jsxs)(l.default,{style:{color:"#9CA3AF",fontSize:14,marginLeft:8},children:["\u9054\u6210\u65e5: ",H]})]}),B.venue&&(0,A.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,A.jsx)(j.default,{name:"place",size:16,color:"#9CA3AF"}),(0,A.jsx)(l.default,{style:{color:"#9CA3AF",fontSize:14,marginLeft:8},children:B.venue})]})]})]})}),W.message&&(0,A.jsx)(n.default,{style:{paddingHorizontal:16,marginBottom:16},children:(0,A.jsx)(n.default,{style:{backgroundColor:"#1A1D21",borderRadius:16,padding:20,borderWidth:1,borderColor:"#2D3139"},children:(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:16,lineHeight:24},children:W.message})})}),(0,A.jsx)(n.default,{style:{padding:16},children:(0,A.jsxs)(n.default,{style:{backgroundColor:"#1A1D21",borderRadius:16,padding:20,borderWidth:1,borderColor:"#2D3139"},children:[(0,A.jsxs)(n.default,{style:{flexDirection:"row",alignItems:"center",marginBottom:16},children:[(0,A.jsx)(j.default,{name:"people",size:24,color:"#EC4899"}),(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:18,fontWeight:"bold",marginLeft:8},children:"\u53c2\u52a0\u8005\u306e\u7686\u3055\u3093"}),(0,A.jsx)(n.default,{style:{flex:1}}),(0,A.jsxs)(l.default,{style:{color:"#9CA3AF",fontSize:14},children:[R?.length||0,"\u4eba"]})]}),(0,A.jsx)(n.default,{style:{flexDirection:"row",flexWrap:"wrap",gap:8},children:V?.map(t=>(0,A.jsxs)(n.default,{style:{alignItems:"center",width:72,marginBottom:8},children:[t.profileImage&&!t.isAnonymous?(0,A.jsx)(c.Image,{source:{uri:t.profileImage},style:{width:48,height:48,borderRadius:24,marginBottom:4}}):(0,A.jsx)(n.default,{style:{width:48,height:48,borderRadius:24,backgroundColor:"#EC4899",alignItems:"center",justifyContent:"center",marginBottom:4},children:(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:18,fontWeight:"bold"},children:t.isAnonymous?"\u533f":t.displayName.charAt(0)})}),(0,A.jsx)(l.default,{style:{color:"#9CA3AF",fontSize:10,textAlign:"center"},numberOfLines:1,children:t.isAnonymous?"\u533f\u540d":t.displayName}),t.contribution>1&&(0,A.jsxs)(l.default,{style:{color:"#EC4899",fontSize:10},children:["+",t.contribution]})]},t.id))}),R&&R.length>20&&!D&&(0,A.jsx)(o.default,{onPress:()=>w(!0),style:{marginTop:16,paddingVertical:12,backgroundColor:"#2D3139",borderRadius:12,alignItems:"center"},children:(0,A.jsxs)(l.default,{style:{color:"#EC4899",fontWeight:"bold"},children:["\u3059\u3079\u3066\u306e\u53c2\u52a0\u8005\u3092\u898b\u308b (",R.length-20,"\u4eba)"]})})]})}),(0,A.jsx)(n.default,{style:{padding:16,paddingBottom:32},children:(0,A.jsxs)(b.LinearGradient,{colors:["rgba(236, 72, 153, 0.2)","rgba(139, 92, 246, 0.2)"],start:{x:0,y:0},end:{x:1,y:1},style:{borderRadius:16,padding:24,alignItems:"center"},children:[(0,A.jsx)(l.default,{style:{fontSize:32,marginBottom:8},children:"\ud83d\udc96"}),(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:18,fontWeight:"bold",textAlign:"center",marginBottom:8},children:"\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01"}),(0,A.jsxs)(l.default,{style:{color:"#9CA3AF",fontSize:14,textAlign:"center",lineHeight:22},children:["\u7686\u3055\u3093\u306e\u5fdc\u63f4\u306e\u304a\u304b\u3052\u3067\u76ee\u6a19\u3092\u9054\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002","\n","\u3053\u308c\u304b\u3089\u3082\u4e00\u7dd2\u306b\u5fdc\u63f4\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\uff01"]})]})}),(0,A.jsx)(n.default,{style:{padding:16,paddingBottom:48},children:(0,A.jsxs)(o.default,{onPress:P,style:{flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#1DA1F2",paddingVertical:16,borderRadius:24},children:[(0,A.jsx)(j.default,{name:"share",size:20,color:e.foreground}),(0,A.jsx)(l.default,{style:{color:e.foreground,fontSize:16,fontWeight:"bold",marginLeft:8},children:"\u9054\u6210\u3092\u30b7\u30a7\u30a2\u3059\u308b"})]})})]})})}},1465,[133,188,109,229,225,1056,473,1083,1087,1185,728,712,1192,3,1196,2]);