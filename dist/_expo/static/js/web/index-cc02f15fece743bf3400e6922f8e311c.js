__d(function(g,r,i,a,m,_e,d){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,"default",{enumerable:!0,get:function(){return N}});var t=r(d[0]),s=e(r(d[1])),l=e(r(d[2])),n=e(r(d[3])),c=e(r(d[4])),o=e(r(d[5]));r(d[6]);var u=r(d[7]),f=r(d[8]),x=r(d[9]),h=r(d[10]),j=r(d[11]),b=r(d[12]);function N(){const e=(0,t.c)(32),N=(0,u.useRouter)(),{user:y}=(0,h.useAuth)(),w=!!y;let _;e[0]!==w?(_={enabled:w},e[0]=w,e[1]=_):_=e[1];const{data:I,isLoading:S}=x.trpc.dm.conversations.useQuery(void 0,_),v=!!y;let P;e[2]!==v?(P={enabled:v},e[2]=v,e[3]=P):P=e[3];const{data:U}=x.trpc.dm.unreadCount.useQuery(void 0,P);if(!y){let t,n,o,u,x;return e[4]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.jsx)(l.default,{className:"text-6xl mb-4",children:"\ud83d\udcac"}),n=(0,b.jsx)(l.default,{className:"text-lg text-muted text-center",children:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u898b\u308b\u306b\u306f\u30ed\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u3067\u3059"}),e[4]=t,e[5]=n):(t=e[4],n=e[5]),e[6]!==N?(o=()=>N.push("/oauth"),e[6]=N,e[7]=o):o=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(u=(0,b.jsx)(l.default,{className:"text-background font-bold",children:"\u30ed\u30b0\u30a4\u30f3"}),e[8]=u):u=e[8],e[9]!==o?(x=(0,b.jsx)(f.ScreenContainer,{className:"p-6",children:(0,b.jsxs)(s.default,{className:"flex-1 items-center justify-center",children:[t,n,(0,b.jsx)(c.default,{onPress:o,className:"mt-4 bg-primary px-6 py-3 rounded-full",children:u})]})}),e[9]=o,e[10]=x):x=e[10],x}let C;e[11]!==N||e[12]!==y.id?(C=e=>{const{item:t}=e,n=t.fromUserId===y.id?t.toUserId:t.fromUserId,u=t.fromUserId===y.id?"\u76f8\u624b":t.fromUserName,f=t.toUserId===y.id&&!t.isRead;return(0,b.jsxs)(c.default,{onPress:()=>N.push(`/messages/${n}?challengeId=${t.challengeId}`),className:"flex-row items-center p-4 border-b border-border "+(f?"bg-primary/10":""),activeOpacity:.7,children:[(0,b.jsx)(s.default,{className:"w-12 h-12 rounded-full bg-surface items-center justify-center mr-3",children:t.fromUserImage?(0,b.jsx)(o.default,{source:{uri:t.fromUserImage},className:"w-12 h-12 rounded-full"}):(0,b.jsx)(l.default,{className:"text-xl",children:"\ud83d\udc64"})}),(0,b.jsxs)(s.default,{className:"flex-1",children:[(0,b.jsxs)(s.default,{className:"flex-row items-center justify-between",children:[(0,b.jsx)(l.default,{className:"font-bold "+(f?"text-foreground":"text-muted"),children:u}),(0,b.jsx)(l.default,{className:"text-xs text-muted",children:new Date(t.createdAt).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})})]}),(0,b.jsx)(l.default,{className:"text-sm mt-1 "+(f?"text-foreground":"text-muted"),numberOfLines:1,children:t.message})]}),f&&(0,b.jsx)(s.default,{className:"w-3 h-3 rounded-full bg-primary ml-2"})]})},e[11]=N,e[12]=y.id,e[13]=C):C=e[13];const k=C;let O,R,A,L,$,B,D,E;return e[14]!==U?(O=U&&U>0&&(0,b.jsx)(s.default,{className:"bg-primary rounded-full px-2 py-1",children:(0,b.jsx)(l.default,{className:"text-xs text-background font-bold text-center",children:U})}),e[14]=U,e[15]=O):O=e[15],e[16]!==N?(R=()=>N.back(),e[16]=N,e[17]=R):R=e[17],e[18]===Symbol.for("react.memo_cache_sentinel")?(A=(0,b.jsx)(l.default,{className:"text-foreground",children:"\u2190 \u623b\u308b"}),e[18]=A):A=e[18],e[19]!==R?(L=(0,b.jsx)(c.default,{onPress:R,className:"flex-row items-center",children:A}),e[19]=R,e[20]=L):L=e[20],e[21]!==O||e[22]!==L?($=(0,b.jsx)(j.AppHeader,{title:"\u541b\u6597\u308a\u3093\u304f\u306e\u52d5\u54e1\u3061\u3083\u308c\u3093\u3058",showCharacters:!1,rightElement:(0,b.jsxs)(s.default,{className:"flex-row items-center gap-4",children:[O,L]})}),e[21]=O,e[22]=L,e[23]=$):$=e[23],e[24]===Symbol.for("react.memo_cache_sentinel")?(B=(0,b.jsx)(s.default,{className:"p-4 border-b border-border",children:(0,b.jsx)(l.default,{className:"text-xl font-bold text-foreground",children:"\u30e1\u30c3\u30bb\u30fc\u30b8"})}),e[24]=B):B=e[24],e[25]!==I||e[26]!==S||e[27]!==k?(D=S?(0,b.jsx)(s.default,{className:"flex-1 items-center justify-center",children:(0,b.jsx)(l.default,{className:"text-muted",children:"\u8aad\u307f\u8fbc\u307f\u4e2d..."})}):I&&I.length>0?(0,b.jsx)(n.default,{data:I,renderItem:k,keyExtractor:p,showsVerticalScrollIndicator:!1,windowSize:5,maxToRenderPerBatch:10,initialNumToRender:10,removeClippedSubviews:!1,updateCellsBatchingPeriod:50}):(0,b.jsxs)(s.default,{className:"flex-1 items-center justify-center p-6",children:[(0,b.jsx)(l.default,{className:"text-6xl mb-4",children:"\ud83d\udcac"}),(0,b.jsx)(l.default,{className:"text-lg font-bold text-foreground mb-2",children:"\u307e\u3060\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3042\u308a\u307e\u305b\u3093"}),(0,b.jsx)(l.default,{className:"text-sm text-muted text-center",children:"\u30c1\u30e3\u30ec\u30f3\u30b8\u306e\u53c2\u52a0\u8005\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u3063\u3066\u307f\u307e\u3057\u3087\u3046"})]}),e[25]=I,e[26]=S,e[27]=k,e[28]=D):D=e[28],e[29]!==D||e[30]!==$?(E=(0,b.jsxs)(f.ScreenContainer,{children:[$,B,D]}),e[29]=D,e[30]=$,e[31]=E):E=e[31],E}function p(e){return`${e.id}`}},1588,[1685,109,188,107,229,178,104,473,1083,1087,1185,1210,2]);